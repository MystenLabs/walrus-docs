<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Using the client HTTP API - Walrus</title>


        <!-- Custom HTML head -->
        <script type="text/javascript">
          // Hacky check to only load Amplitude in production since we don't have environments:
          const localAddresses = ['localhost', '127.0.0.1', '[::1]'];
          if (localAddresses.indexOf(document.location.hostname) === -1) {
            !function(){"use strict";!function(e,t){var r=e.amplitude||{_q:[],_iq:{}};if(r.invoked)e.console&&console.error&&console.error("Amplitude snippet has been loaded.");else{var n=function(e,t){e.prototype[t]=function(){return this._q.push({name:t,args:Array.prototype.slice.call(arguments,0)}),this}},s=function(e,t,r){return function(n){e._q.push({name:t,args:Array.prototype.slice.call(r,0),resolve:n})}},o=function(e,t,r){e._q.push({name:t,args:Array.prototype.slice.call(r,0)})},i=function(e,t,r){e[t]=function(){if(r)return{promise:new Promise(s(e,t,Array.prototype.slice.call(arguments)))};o(e,t,Array.prototype.slice.call(arguments))}},a=function(e){for(var t=0;t<g.length;t++)i(e,g[t],!1);for(var r=0;r<m.length;r++)i(e,m[r],!0)};r.invoked=!0;var c=t.createElement("script");c.type="text/javascript",c.integrity="sha384-pY2pkwHaLM/6UIseFHVU3hOKr6oAvhLcdYkoRZyaMDWLjpM6B7nTxtOdE823WAOQ",c.crossOrigin="anonymous",c.async=!0,c.src="https://cdn.amplitude.com/libs/analytics-browser-2.11.0-min.js.gz",c.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};var u=t.getElementsByTagName("script")[0];u.parentNode.insertBefore(c,u);for(var p=function(){return this._q=[],this},l=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove","getUserProperties"],d=0;d<l.length;d++)n(p,l[d]);r.Identify=p;for(var f=function(){return this._q=[],this},v=["getEventProperties","setProductId","setQuantity","setPrice","setRevenue","setRevenueType","setEventProperties"],y=0;y<v.length;y++)n(f,v[y]);r.Revenue=f;var g=["getDeviceId","setDeviceId","getSessionId","setSessionId","getUserId","setUserId","setOptOut","setTransport","reset","extendSession"],m=["init","add","remove","track","logEvent","identify","groupIdentify","setGroup","revenue","flush"];a(r),r.createInstance=function(e){return r._iq[e]={_q:[]},a(r._iq[e]),r._iq[e]},e.amplitude=r}}(window,document)}();
            amplitude.init('f60df2d0d709d50faa2ffda153a84bc0', { identityStorage:'none', defaultTracking: true });
          }
        </script>
        
        <script>
            function initAskCookbook() {
              // It's a public API key, so it's safe to expose it here
              const PUBLIC_API_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NzU4Y2YyODM4NTcxODU5MjU0MGIyMDciLCJpYXQiOjE3MzM4NzM0NDgsImV4cCI6MjA0OTQ0OTQ0OH0.Z3cv3HuMkYq3aYZYzCKkkYuM5LI3KG-kuA0R-GaSMV4";
        
              let cookbookContainer = document.getElementById("__cookbook");
              if (!cookbookContainer) {
                cookbookContainer = document.createElement("div");
                cookbookContainer.id = "__cookbook";
                cookbookContainer.dataset.apiKey = PUBLIC_API_KEY;
                document.body.appendChild(cookbookContainer);
              }
        
              let cookbookScript = document.getElementById("__cookbook-script");
              if (!cookbookScript) {
                cookbookScript = document.createElement("script");
                cookbookScript.id = "__cookbook-script";
                cookbookScript.src = "https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js";
                cookbookScript.async = true;
                document.head.appendChild(cookbookScript);
              }
        
        
              const keyPressPropagationBlocker = function (e) {
                e.stopPropagation();
              };
              document.addEventListener("cookbook:modal:state:change", function (e) {
                const isOpen = e.detail.isOpen;
                if (isOpen) {
                  document.body.addEventListener("keydown", keyPressPropagationBlocker, { capture: true });
                } else {
                  document.body.removeEventListener("keydown", keyPressPropagationBlocker, { capture: true });
                }
              });
            }
        
            // Check if the document is already loaded and if so, initialize the script, otherwise wait for the load event
            if (document.readyState === "complete") {
              initAskCookbook();
            } else {
              window.addEventListener("load", initAskCookbook);
            }
          </script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././mdbook-admonish.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Walrus</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Dev Blog</li><li class="chapter-item expanded "><a href="../blog/00_intro.html"><strong aria-hidden="true">1.</strong> Blog Preface</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blog/01_announcing_walrus.html"><strong aria-hidden="true">1.1.</strong> Announcing Walrus</a></li><li class="chapter-item expanded "><a href="../blog/02_devnet_update.html"><strong aria-hidden="true">1.2.</strong> Devnet Update</a></li><li class="chapter-item expanded "><a href="../blog/03_whitepaper.html"><strong aria-hidden="true">1.3.</strong> Announcing the Walrus Whitepaper</a></li><li class="chapter-item expanded "><a href="../blog/04_testnet_update.html"><strong aria-hidden="true">1.4.</strong> Announcing Testnet</a></li><li class="chapter-item expanded "><a href="../blog/05_testnet_redeployment.html"><strong aria-hidden="true">1.5.</strong> Announcing Testnet v2</a></li></ol></li><li class="chapter-item expanded "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Design</li><li class="chapter-item expanded "><a href="../design/objectives_use_cases.html"><strong aria-hidden="true">2.</strong> Objectives and use cases</a></li><li class="chapter-item expanded "><a href="../design/overview.html"><strong aria-hidden="true">3.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../design/architecture.html"><strong aria-hidden="true">3.1.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="../design/encoding.html"><strong aria-hidden="true">3.2.</strong> Encoding</a></li></ol></li><li class="chapter-item expanded "><a href="../design/operations.html"><strong aria-hidden="true">4.</strong> Operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../design/operations-sui.html"><strong aria-hidden="true">4.1.</strong> Sui operations</a></li><li class="chapter-item expanded "><a href="../design/operations-off-chain.html"><strong aria-hidden="true">4.2.</strong> Off-chain operations</a></li></ol></li><li class="chapter-item expanded "><a href="../design/properties.html"><strong aria-hidden="true">5.</strong> Properties</a></li><li class="chapter-item expanded "><a href="../design/future.html"><strong aria-hidden="true">6.</strong> Future discussion</a></li><li class="chapter-item expanded affix "><li class="part-title">Usage</li><li class="chapter-item expanded "><a href="../usage/setup.html"><strong aria-hidden="true">7.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../usage/interacting.html"><strong aria-hidden="true">8.</strong> Interacting with Walrus</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../usage/client-cli.html"><strong aria-hidden="true">8.1.</strong> Using the client CLI</a></li><li class="chapter-item expanded "><a href="../usage/json-api.html"><strong aria-hidden="true">8.2.</strong> Using the client JSON API</a></li><li class="chapter-item expanded "><a href="../usage/web-api.html" class="active"><strong aria-hidden="true">8.3.</strong> Using the client HTTP API</a></li><li class="chapter-item expanded "><a href="../usage/sdks.html"><strong aria-hidden="true">8.4.</strong> SDKs and other tools</a></li></ol></li><li class="chapter-item expanded "><a href="../dev-guide/dev-guide.html"><strong aria-hidden="true">9.</strong> Developer guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dev-guide/components.html"><strong aria-hidden="true">9.1.</strong> Components</a></li><li class="chapter-item expanded "><a href="../dev-guide/dev-operations.html"><strong aria-hidden="true">9.2.</strong> Operations</a></li><li class="chapter-item expanded "><a href="../dev-guide/sui-struct.html"><strong aria-hidden="true">9.3.</strong> Sui structures</a></li></ol></li><li class="chapter-item expanded "><a href="../operator-guide/operator-guide.html"><strong aria-hidden="true">10.</strong> Operator guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../operator-guide/storage-node.html"><strong aria-hidden="true">10.1.</strong> Storage node</a></li><li class="chapter-item expanded "><a href="../operator-guide/aggregator.html"><strong aria-hidden="true">10.2.</strong> Aggregator</a></li></ol></li><li class="chapter-item expanded "><a href="../usage/stake.html"><strong aria-hidden="true">11.</strong> Stake and Unstake</a></li><li class="chapter-item expanded "><a href="../usage/examples.html"><strong aria-hidden="true">12.</strong> Examples</a></li><li class="chapter-item expanded "><a href="../usage/troubleshooting.html"><strong aria-hidden="true">13.</strong> Troubleshooting</a></li><li class="chapter-item expanded affix "><li class="part-title">Walrus Sites</li><li class="chapter-item expanded "><a href="../walrus-sites/intro.html"><strong aria-hidden="true">14.</strong> Introduction to Walrus Sites</a></li><li class="chapter-item expanded "><a href="../walrus-sites/tutorial.html"><strong aria-hidden="true">15.</strong> Your first Walrus Site</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../walrus-sites/tutorial-install.html"><strong aria-hidden="true">15.1.</strong> Installing the site builder</a></li><li class="chapter-item expanded "><a href="../walrus-sites/tutorial-publish.html"><strong aria-hidden="true">15.2.</strong> Publishing a Walrus Site</a></li><li class="chapter-item expanded "><a href="../walrus-sites/tutorial-suins.html"><strong aria-hidden="true">15.3.</strong> Bonus: Set a SuiNS name</a></li></ol></li><li class="chapter-item expanded "><a href="../walrus-sites/advanced.html"><strong aria-hidden="true">16.</strong> Advanced functionality</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../walrus-sites/commands.html"><strong aria-hidden="true">16.1.</strong> Site builder commands</a></li><li class="chapter-item expanded "><a href="../walrus-sites/builder-config.html"><strong aria-hidden="true">16.2.</strong> Advanced site-builder configuration</a></li><li class="chapter-item expanded "><a href="../walrus-sites/routing.html"><strong aria-hidden="true">16.3.</strong> Specifying headers and routing</a></li><li class="chapter-item expanded "><a href="../walrus-sites/linking.html"><strong aria-hidden="true">16.4.</strong> Linking from and to Walrus Sites</a></li><li class="chapter-item expanded "><a href="../walrus-sites/redirects.html"><strong aria-hidden="true">16.5.</strong> Redirecting objects to Walrus Sites</a></li></ol></li><li class="chapter-item expanded "><a href="../walrus-sites/overview.html"><strong aria-hidden="true">17.</strong> Technical overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../walrus-sites/portal.html"><strong aria-hidden="true">17.1.</strong> The Walrus Sites portal</a></li><li class="chapter-item expanded "><a href="../walrus-sites/authentication.html"><strong aria-hidden="true">17.2.</strong> Site data authentication</a></li><li class="chapter-item expanded "><a href="../walrus-sites/restrictions.html"><strong aria-hidden="true">17.3.</strong> Known restrictions</a></li></ol></li><li class="chapter-item expanded "><a href="../walrus-sites/tos.html"><strong aria-hidden="true">18.</strong> Terms of service</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../glossary.html">Glossary</a></li><li class="chapter-item expanded affix "><a href="../legal/testnet_tos.html">Testnet terms of service</a></li><li class="chapter-item expanded affix "><a href="../legal/privacy.html">Privacy policy</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Walrus</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="client-daemon-mode--http-api"><a class="header" href="#client-daemon-mode--http-api">Client Daemon mode &amp; HTTP API</a></h1>
<p>In addition to the CLI and JSON modes, the Walrus client offers a <em>daemon mode</em>. In this mode, it
runs a simple web server offering HTTP interfaces to store and read blobs in an <em>aggregator</em> and
<em>publisher</em> role respectively. We also offer
<a href="#public-services">public aggregator and publisher services</a> to try the Walrus HTTP APIs without
the need to run a local client.</p>
<h2 id="local-daemon"><a class="header" href="#local-daemon">Starting the daemon locally</a></h2>
<p>You can run a local Walrus daemon through the <code>walrus</code> binary. There are three different commands:</p>
<ul>
<li><code>walrus aggregator</code> starts an "aggregator" that offers an HTTP interface to read blobs from
Walrus.</li>
<li><code>walrus publisher</code> starts a "publisher" that offers an HTTP interface to store blobs in Walrus.</li>
<li><code>walrus daemon</code> offers the combined functionality of an aggregator and publisher on the same
address and port.</li>
</ul>
<p>The aggregator does not perform any on-chain actions, and only requires specifying the address on
which it listens:</p>
<pre><code class="language-sh">walrus aggregator --bind-address "127.0.0.1:31415"
</code></pre>
<p>The publisher and daemon perform on-chain actions and thus require a Sui Testnet wallet with
sufficient SUI and WAL balances. To enable handling many parallel requests without object
conflicts, they create internal sub-wallets since version 1.4.0, which are funded from the main
wallet. These sub-wallets are persisted in a directory specified with the <code>--sub-wallets-dir</code>
argument; any existing directory can be used. If it already contains sub-wallets, they will be
reused.</p>
<p>By default, 8 sub-wallets are created and funded. This can be changed with the <code>--n-clients</code>
argument. For simple local testing, 1 or 2 sub-wallets are usually sufficient.</p>
<p>For example, you can run a publisher with a single sub-wallet stored in the Walrus configuration
directory with the following command:</p>
<pre><code class="language-sh">PUBLISHER_WALLETS_DIR=~/.config/walrus/publisher-wallets
mkdir -p "$PUBLISHER_WALLETS_DIR"
walrus publisher \
  --bind-address "127.0.0.1:31416" \
  --sub-wallets-dir "$PUBLISHER_WALLETS_DIR" \
  --n-clients 1
</code></pre>
<p>Replace <code>publisher</code> by <code>daemon</code> to run both an aggregator and publisher on the same address and
port.</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="#admonition-warning"></a>
</div>
<div>
<p>While the aggregator does not perform Sui on-chain actions, and therefore consumes no gas, the
publisher does perform actions on-chain and will consume both SUI and WAL tokens. It is therefore
important to ensure only authorized parties may access it, or other measures to manage gas costs,
especially in a future Mainnet deployment.</p>
</div>
</div>
<h3 id="notes-on-publisher-operation"><a class="header" href="#notes-on-publisher-operation">Notes on publisher operation</a></h3>
<p>We list here a few important details on how the publisher deals with funds and objects on Sui.</p>
<h4 id="number-of-sub-wallets"><a class="header" href="#number-of-sub-wallets">Number of sub-wallets</a></h4>
<p>As mentioned above, the publisher uses sub-wallets to allow storing blobs in parallel. By default,
the publisher uses 8 sub-wallets, meaning it can store 8 blobs at the same time.</p>
<h4 id="funds-in-sub-wallets"><a class="header" href="#funds-in-sub-wallets">Funds in sub-wallets</a></h4>
<p>Each of the sub-wallets requires funds to interact with the chain and purchase storage. For this
reason, a background process checks periodically if the sub-wallets have enough funds. In steady
state, each of the sub-wallets will have a balance of 0.5-1.0 SUI and WAL. The amount and triggers
for coin refills can be configured through CLI arguments.</p>
<h4 id="lifecycle-of-created-blob-objects"><a class="header" href="#lifecycle-of-created-blob-objects">Lifecycle of created <code>Blob</code> objects</a></h4>
<p>Each store operation in Walrus creates a <code>Blob</code> object on Sui. This blob object represents the
(partial) ownership over the associated data, and allows certain data management operations (e.g.,
in the case of deletable blobs).</p>
<p>When the publisher stores a blob on behalf of a client, the <code>Blob</code> object is initially owned by the
sub-wallet that stored the blob. Then, the following cases are possible, depending on the
configuration:</p>
<ul>
<li>If the client requests to store a blob and specifies the <code>send_object_to</code> query parameter (see
<a href="#store">the relevant section</a> for examples), then the <code>Blob</code> object is transferred to the
specified address. This is a way for clients to get back the created object for their data.</li>
<li>If the <code>send_object_to</code> query parameter is not specified, two cases are possible:
<ul>
<li>If the publisher was run with the <code>--keep</code> flag, then the sub-wallet transfers the
newly-created blob object to the main wallet, such that all these objects are kept there.</li>
<li>If the <code>--keep</code> flag was omitted, then the sub-wallet <em>immediately burns</em> the <code>Blob</code> object.
Since no one has requested the object, and the availability of the data on Walrus is independent
of the existence of such object, it is safe to do so. This is to avoid cluttering the sub-wallet
with many blob objects.</li>
</ul>
</li>
</ul>
<h2 id="public-services"><a class="header" href="#public-services">Using a public aggregator or publisher</a></h2>
<p>For some use cases (e.g., a public website), or to just try out the HTTP API, a publicly accessible
aggregator and/or publisher is required. Several entities run such aggregators and publishers, see
the lists of public <a href="#public-aggregators">aggregators</a> and <a href="#public-publishers">publishers</a> below.</p>
<p>Public publishers limit requests to 10 MiB by default. If you want to upload larger files, you need
to <a href="#local-daemon">run your own publisher</a> or use the <a href="./client-cli.html">CLI</a>.</p>
<p>Also, note that the publisher consumes (Testnet) SUI and WAL on the service side, and a Mainnet
deployment would likely not be able to provide uncontrolled public access to publishing without
requiring some authentication and compensation for the funds used.</p>
<h3 id="public-aggregators"><a class="header" href="#public-aggregators">Public aggregators</a></h3>
<p>The following is a list of know public aggregators; they are checked periodically, but each of them
may still be temporarily unavailable:</p>
<ul>
<li><code>https://aggregator.walrus-testnet.walrus.space</code></li>
<li><code>https://wal-aggregator-testnet.staketab.org</code></li>
<li><code>https://walrus-testnet-aggregator.redundex.com</code></li>
<li><code>https://walrus-testnet.blockscope.net</code></li>
<li><code>https://walrus-testnet-aggregator.nodes.guru</code></li>
<li><code>https://walrus-cache-testnet.overclock.run</code></li>
<li><code>https://walrus-testnet-aggregator.stakin-nodes.com</code></li>
<li><code>https://testnet-aggregator-walrus.kiliglab.io</code></li>
<li><code>https://walrus-cache-testnet.latitude-sui.com</code></li>
<li><code>https://walrus-testnet-aggregator.nodeinfra.com</code></li>
<li><code>https://walrus-testnet-aggregator.stakingdefenseleague.com</code></li>
<li><code>https://walrus-aggregator.rubynodes.io</code></li>
<li><code>https://walrus-testnet-aggregator.brightlystake.com</code></li>
<li><code>https://walrus-testnet-aggregator.nami.cloud</code></li>
<li><code>https://aggregator.testnet.walrus.mirai.cloud</code></li>
<li><code>https://walrus-testnet-aggregator.stakecraft.com</code></li>
<li><code>https://agg.test.walrus.eosusa.io</code></li>
<li><code>https://walrus-agg.testnet.obelisk.sh</code></li>
<li><code>https://walrus-test-aggregator.thepassivetrust.com</code></li>
<li><code>https://walrus-testnet-aggregator.natsai.xyz</code></li>
<li><code>https://walrus.testnet.aggregator.stakepool.dev.br</code></li>
<li><code>https://aggregator.walrus.banansen.dev</code></li>
<li><code>https://testnet.aggregator.walrus.silentvalidator.com</code></li>
<li><code>https://testnet-aggregator.walrus.graphyte.dev</code></li>
<li><code>https://walrus-testnet-aggregator.imperator.co</code></li>
<li><code>https://walrus-testnet-aggregator.unemployedstake.co.uk</code></li>
<li><code>https://aggregator.walrus-01.tududes.com</code></li>
<li><code>https://walrus-aggregator-testnet.n1stake.com</code></li>
<li><code>https://suiftly-testnet-agg.mhax.io</code></li>
<li><code>https://walrus-testnet-aggregator.trusted-point.com</code></li>
<li><code>https://walrus-testnet-aggregator.veera.com</code></li>
<li><code>https://aggregator.testnet.walrus.atalma.io</code></li>
<li><code>https://153-gb3-val-walrus-aggregator.stakesquid.com</code></li>
<li><code>https://sui-walrus-testnet.bwarelabs.com/aggregator</code></li>
<li><code>https://walrus-testnet.chainbase.online/aggregator</code></li>
<li><code>https://walrus-tn.juicystake.io:9443</code></li>
<li><code>https://walrus-agg-testnet.chainode.tech:9002</code></li>
<li><code>https://walrus-testnet-aggregator.starduststaking.com</code></li>
<li><code>https://walrus-aggregator-testnet.cetus.zone</code></li>
<li><code>https://walrus-testnet-aggregator.everstake.one</code></li>
<li><code>http://walrus.testnet.pops.one:9000</code></li>
<li><code>http://scarlet-brussels-376c2.walrus.bdnodes.net:9000</code></li>
<li><code>http://aggregator.testnet.sui.rpcpool.com:9000</code></li>
<li><code>http://walrus.krates.ai:9000</code></li>
<li><code>http://walrus.globalstake.io:9000</code></li>
<li><code>http://walrus-testnet.staking4all.org:9000</code></li>
<li><code>http://walrus-testnet.rpc101.org:9000</code></li>
<li><code>http://93.115.27.108:9000</code></li>
<li><code>http://65.21.139.112:9000</code></li>
<li><code>http://162.19.18.19:9000</code></li>
<li><code>http://walrus-aggregator.stakeme.pro:9000</code></li>
<li><code>http://walrus-storage.testnet.nelrann.org:9000</code></li>
<li><code>http://walrus-testnet.senseinode.com:9000</code></li>
<li><code>http://walrus-testnet.equinoxdao.xyz:9000</code></li>
<li><code>https://walrus-testnet-aggregator.stakely.io</code></li>
<li><code>https://walrus-testnet-aggregator.talentum.id</code></li>
<li><code>http://37.27.230.228:9000</code></li>
<li><code>https://walrus-testnet-aggregator.luckyresearch.org/</code></li>
<li><code>http://walrus-testnet.suicore.com:9000</code></li>
<li><code>https://walrus-testnet.validators.services.kyve.network/aggregate</code></li>
<li><code>https://walrus-aggregator-testnet.suisec.tech</code></li>
<li><code>https://walrus-testnet-aggregator.dzdaic.com</code></li>
</ul>
<h3 id="public-publishers"><a class="header" href="#public-publishers">Public publishers</a></h3>
<ul>
<li><code>https://publisher.walrus-testnet.walrus.space</code></li>
<li><code>https://wal-publisher-testnet.staketab.org</code></li>
<li><code>https://walrus-testnet-publisher.redundex.com</code></li>
<li><code>https://walrus-testnet-publisher.nodes.guru</code></li>
<li><code>https://walrus-testnet-publisher.stakin-nodes.com</code></li>
<li><code>https://testnet-publisher-walrus.kiliglab.io</code></li>
<li><code>https://walrus-testnet-publisher.nodeinfra.com</code></li>
<li><code>https://walrus-publisher.rubynodes.io</code></li>
<li><code>https://walrus-testnet-publisher.brightlystake.com</code></li>
<li><code>https://walrus-testnet-publisher.nami.cloud</code></li>
<li><code>https://publisher.testnet.walrus.mirai.cloud</code></li>
<li><code>https://walrus-testnet-publisher.stakecraft.com</code></li>
<li><code>https://pub.test.walrus.eosusa.io</code></li>
<li><code>https://walrus-pub.testnet.obelisk.sh</code></li>
<li><code>https://walrus-testnet-publisher.stakingdefenseleague.com</code></li>
<li><code>https://walrus-testnet.thepassivetrust.com</code></li>
<li><code>https://walrus-testnet-publisher.natsai.xyz</code></li>
<li><code>https://walrus.testnet.publisher.stakepool.dev.br</code></li>
<li><code>https://publisher.walrus.banansen.dev</code></li>
<li><code>https://testnet.publisher.walrus.silentvalidator.com</code></li>
<li><code>https://testnet-publisher.walrus.graphyte.dev</code></li>
<li><code>https://walrus-testnet-publisher.imperator.co</code></li>
<li><code>https://walrus-testnet-publisher.unemployedstake.co.uk</code></li>
<li><code>https://publisher.walrus-01.tududes.com</code></li>
<li><code>https://walrus-publisher-testnet.n1stake.com</code></li>
<li><code>https://suiftly-testnet-pub.mhax.io</code></li>
<li><code>https://walrus-testnet-publisher.trusted-point.com</code></li>
<li><code>https://walrus-testnet-publisher.veera.com</code></li>
<li><code>https://publisher.testnet.walrus.atalma.io</code></li>
<li><code>https://153-gb3-val-walrus-publisher.stakesquid.com</code></li>
<li><code>https://sui-walrus-testnet.bwarelabs.com/publisher</code></li>
<li><code>https://walrus-testnet.chainbase.online/publisher</code></li>
<li><code>https://walrus-testnet.blockscope.net:11444</code></li>
<li><code>https://walrus-publish-testnet.chainode.tech:9003</code></li>
<li><code>https://walrus-testnet-publisher.starduststaking.com</code></li>
<li><code>http://walrus-publisher-testnet.overclock.run:9001</code></li>
<li><code>https://walrus-testnet-publisher.everstake.one</code></li>
<li><code>http://walrus.testnet.pops.one:9001</code></li>
<li><code>http://ivory-dakar-e5812.walrus.bdnodes.net:9001</code></li>
<li><code>http://publisher.testnet.sui.rpcpool.com:9001</code></li>
<li><code>http://walrus.krates.ai:9001</code></li>
<li><code>http://walrus-publisher-testnet.latitude-sui.com:9001</code></li>
<li><code>http://walrus-tn.juicystake.io:9090</code></li>
<li><code>http://walrus.globalstake.io:9001</code></li>
<li><code>http://walrus-testnet.staking4all.org:9001</code></li>
<li><code>http://walrus-testnet.rpc101.org:9001</code></li>
<li><code>http://walrus-publisher-testnet.cetus.zone:9001</code></li>
<li><code>http://93.115.27.108:9001</code></li>
<li><code>http://65.21.139.112:9001</code></li>
<li><code>http://162.19.18.19:9001</code></li>
<li><code>http://walrus-publisher.stakeme.pro:9001</code></li>
<li><code>http://walrus-storage.testnet.nelrann.org:9001</code></li>
<li><code>http://walrus-testnet.senseinode.com:9001</code></li>
<li><code>http://walrus-testnet.equinoxdao.xyz:9001</code></li>
<li><code>https://walrus-testnet-publisher.stakely.io</code></li>
<li><code>https://walrus-testnet-publisher.talentum.id</code></li>
<li><code>http://37.27.230.228:9001</code></li>
<li><code>https://walrus-testnet-published.luckyresearch.org</code></li>
<li><code>http://walrus-testnet.suicore.com:9001</code></li>
<li><code>https://walrus-testnet.validators.services.kyve.network/publish</code></li>
<li><code>http://walrus-publisher-testnet.suisec.tech:9001</code></li>
<li><code>https://walrus-testnet-publisher.dzdaic.com</code></li>
</ul>
<h2 id="http-api-usage"><a class="header" href="#http-api-usage">HTTP API Usage</a></h2>
<p>For the following examples, we assume you set the <code>AGGREGATOR</code> and <code>PUBLISHER</code> environment variables
to your desired aggregator and publisher, respectively. For example:</p>
<pre><code class="language-sh">AGGREGATOR=https://aggregator.walrus-testnet.walrus.space
PUBLISHER=https://publisher.walrus-testnet.walrus.space
</code></pre>
<div id="admonition-api-specification" class="admonition admonish-tip" role="note" aria-labelledby="admonition-api-specification-title">
<div class="admonition-title">
<div id="admonition-api-specification-title">
<p>API specification</p>
</div>
<a class="admonition-anchor-link" href="#admonition-api-specification"></a>
</div>
<div>
<p>Walrus aggregators and publishers expose their API specifications at the path <code>/v1/api</code>. You can
view this in the browser, for example, at <a href="https://aggregator.walrus-testnet.walrus.space/v1/api">https://aggregator.walrus-testnet.walrus.space/v1/api</a>.</p>
</div>
</div>
<h3 id="store"><a class="header" href="#store">Store</a></h3>
<p>You can interact with the daemon through simple HTTP PUT requests. For example, with
<a href="https://curl.se">cURL</a>, you can store blobs using a publisher or daemon as follows:</p>
<pre><code class="language-sh">curl -X PUT "$PUBLISHER/v1/blobs" -d "some string" # store the string `some string` for 1 storage epoch
curl -X PUT "$PUBLISHER/v1/blobs?epochs=5" --upload-file "some/file" # store file `some/file` for 5 storage epochs
curl -X PUT "$PUBLISHER/v1/blobs?send_object_to=$ADDRESS" --upload-file "some/file" # store file `some/file` and send the blob object to $ADDRESS
curl -X PUT "$PUBLISHER/v1/blobs?deletable=true" --upload-file "some/file" # store file `some/file` as a deletable blob, instead of a permanent one
</code></pre>
<p>The store HTTP API end points return information about the blob stored in JSON format. When a blob
is stored for the first time, a <code>newlyCreated</code> field contains information about the
new blob:</p>
<pre><code class="language-sh">$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"
{
  "newlyCreated": {
    "blobObject": {
      "id": "0xd765d11848cbac5b1f6eec2fbeb343d4558cbe8a484a00587f9ef5385d64d235",
      "registeredEpoch": 0,
      "blobId": "Cmh2LQEGJwBYfmIC8duzK8FUE2UipCCrshAYjiUheZM",
      "size": 17,
      "encodingType": "RedStuff",
      "certifiedEpoch": 0,
      "storage": {
        "id": "0x28cc75b33e31b3e672646eacf1a7c7a2e5d638644651beddf7ed4c7e21e9cb8e",
        "startEpoch": 0,
        "endEpoch": 1,
        "storageSize": 4747680
      },
      "deletable": false
    },
    "resourceOperation": {
      "registerFromScratch": {
        "encodedLength": 4747680,
        "epochsAhead": 1
      }
    },
    "cost": 231850
  }
}
</code></pre>
<p>The information returned is the content of the <a href="../dev-guide/sui-struct.html">Sui blob object</a>.</p>
<p>When the aggregator finds a certified blob with the same blob ID and a sufficient validity period,
it returns a <code>alreadyCertified</code> JSON structure:</p>
<pre><code class="language-sh">$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"
{
  "alreadyCertified": {
    "blobId": "Cmh2LQEGJwBYfmIC8duzK8FUE2UipCCrshAYjiUheZM",
    "event": {
      "txDigest": "CLE41JTPR2CgZRC1gyKK6P3xpQRHCetQMsmtEgqGjwst",
      "eventSeq": "0"
    },
    "endEpoch": 1
  }
}
</code></pre>
<p>The field <code>event</code> returns the <a href="../dev-guide/sui-struct.html">Sui event ID</a> that can be used to
find the transaction that created the Sui Blob object on the Sui explorer or using a Sui SDK.</p>
<h3 id="read"><a class="header" href="#read">Read</a></h3>
<p>Blobs may be read from an aggregator or daemon using HTTP GET. For example, the following cURL
command reads a blob and writes it to an output file:</p>
<pre><code class="language-sh">curl "$AGGREGATOR/v1/blobs/&lt;some blob ID&gt;" -o &lt;some file name&gt;
</code></pre>
<p>Alternatively you may print the contents of a blob in the terminal with the cURL command:</p>
<pre><code class="language-sh">curl "$AGGREGATOR/v1/blobs/&lt;some blob ID&gt;"
</code></pre>
<div id="admonition-content-sniffing" class="admonition admonish-tip" role="note" aria-labelledby="admonition-content-sniffing-title">
<div class="admonition-title">
<div id="admonition-content-sniffing-title">
<p>Content sniffing</p>
</div>
<a class="admonition-anchor-link" href="#admonition-content-sniffing"></a>
</div>
<div>
<p>Modern browsers will attempt to sniff the content type for such resources, and will generally do a
good job of inferring content types for media. However, the aggregator on purpose prevents such
sniffing from inferring dangerous executable types such as JavaScript or style sheet types.</p>
</div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../usage/json-api.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../usage/sdks.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../usage/json-api.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../usage/sdks.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
