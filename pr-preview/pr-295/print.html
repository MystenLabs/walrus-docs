<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Walrus</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        <script type="text/javascript">
          // Hacky check to only load Amplitude in production since we don't have environments:
          const localAddresses = ['localhost', '127.0.0.1', '[::1]'];
          if (localAddresses.indexOf(document.location.hostname) === -1) {
            !function(){"use strict";!function(e,t){var r=e.amplitude||{_q:[],_iq:{}};if(r.invoked)e.console&&console.error&&console.error("Amplitude snippet has been loaded.");else{var n=function(e,t){e.prototype[t]=function(){return this._q.push({name:t,args:Array.prototype.slice.call(arguments,0)}),this}},s=function(e,t,r){return function(n){e._q.push({name:t,args:Array.prototype.slice.call(r,0),resolve:n})}},o=function(e,t,r){e._q.push({name:t,args:Array.prototype.slice.call(r,0)})},i=function(e,t,r){e[t]=function(){if(r)return{promise:new Promise(s(e,t,Array.prototype.slice.call(arguments)))};o(e,t,Array.prototype.slice.call(arguments))}},a=function(e){for(var t=0;t<g.length;t++)i(e,g[t],!1);for(var r=0;r<m.length;r++)i(e,m[r],!0)};r.invoked=!0;var c=t.createElement("script");c.type="text/javascript",c.integrity="sha384-pY2pkwHaLM/6UIseFHVU3hOKr6oAvhLcdYkoRZyaMDWLjpM6B7nTxtOdE823WAOQ",c.crossOrigin="anonymous",c.async=!0,c.src="https://cdn.amplitude.com/libs/analytics-browser-2.11.0-min.js.gz",c.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};var u=t.getElementsByTagName("script")[0];u.parentNode.insertBefore(c,u);for(var p=function(){return this._q=[],this},l=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove","getUserProperties"],d=0;d<l.length;d++)n(p,l[d]);r.Identify=p;for(var f=function(){return this._q=[],this},v=["getEventProperties","setProductId","setQuantity","setPrice","setRevenue","setRevenueType","setEventProperties"],y=0;y<v.length;y++)n(f,v[y]);r.Revenue=f;var g=["getDeviceId","setDeviceId","getSessionId","setSessionId","getUserId","setUserId","setOptOut","setTransport","reset","extendSession"],m=["init","add","remove","track","logEvent","identify","groupIdentify","setGroup","revenue","flush"];a(r),r.createInstance=function(e){return r._iq[e]={_q:[]},a(r._iq[e]),r._iq[e]},e.amplitude=r}}(window,document)}();
            amplitude.init('f60df2d0d709d50faa2ffda153a84bc0', { identityStorage:'none', defaultTracking: true });
          }
        </script>
        
        <script>
            function initAskCookbook() {
              // It's a public API key, so it's safe to expose it here
              const PUBLIC_API_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NzU4Y2YyODM4NTcxODU5MjU0MGIyMDciLCJpYXQiOjE3MzM4NzM0NDgsImV4cCI6MjA0OTQ0OTQ0OH0.Z3cv3HuMkYq3aYZYzCKkkYuM5LI3KG-kuA0R-GaSMV4";
        
              let cookbookContainer = document.getElementById("__cookbook");
              if (!cookbookContainer) {
                cookbookContainer = document.createElement("div");
                cookbookContainer.id = "__cookbook";
                cookbookContainer.dataset.apiKey = PUBLIC_API_KEY;
                document.body.appendChild(cookbookContainer);
              }
        
              let cookbookScript = document.getElementById("__cookbook-script");
              if (!cookbookScript) {
                cookbookScript = document.createElement("script");
                cookbookScript.id = "__cookbook-script";
                cookbookScript.src = "https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js";
                cookbookScript.async = true;
                document.head.appendChild(cookbookScript);
              }
        
        
              const keyPressPropagationBlocker = function (e) {
                e.stopPropagation();
              };
              document.addEventListener("cookbook:modal:state:change", function (e) {
                const isOpen = e.detail.isOpen;
                if (isOpen) {
                  document.body.addEventListener("keydown", keyPressPropagationBlocker, { capture: true });
                } else {
                  document.body.removeEventListener("keydown", keyPressPropagationBlocker, { capture: true });
                }
              });
            }
        
            // Check if the document is already loaded and if so, initialize the script, otherwise wait for the load event
            if (document.readyState === "complete") {
              initAskCookbook();
            } else {
              window.addEventListener("load", initAskCookbook);
            }
          </script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./mdbook-admonish.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Walrus</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Dev Blog</li><li class="chapter-item expanded "><a href="blog/00_intro.html"><strong aria-hidden="true">1.</strong> Blog Preface</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="blog/01_announcing_walrus.html"><strong aria-hidden="true">1.1.</strong> Announcing Walrus</a></li><li class="chapter-item expanded "><a href="blog/02_devnet_update.html"><strong aria-hidden="true">1.2.</strong> Devnet Update</a></li><li class="chapter-item expanded "><a href="blog/03_whitepaper.html"><strong aria-hidden="true">1.3.</strong> Announcing the Walrus Whitepaper</a></li><li class="chapter-item expanded "><a href="blog/04_testnet_update.html"><strong aria-hidden="true">1.4.</strong> Announcing Testnet</a></li><li class="chapter-item expanded "><a href="blog/05_testnet_redeployment.html"><strong aria-hidden="true">1.5.</strong> Announcing Testnet v2</a></li></ol></li><li class="chapter-item expanded "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Design</li><li class="chapter-item expanded "><a href="design/objectives_use_cases.html"><strong aria-hidden="true">2.</strong> Objectives and use cases</a></li><li class="chapter-item expanded "><a href="design/overview.html"><strong aria-hidden="true">3.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="design/architecture.html"><strong aria-hidden="true">3.1.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="design/encoding.html"><strong aria-hidden="true">3.2.</strong> Encoding</a></li></ol></li><li class="chapter-item expanded "><a href="design/operations.html"><strong aria-hidden="true">4.</strong> Operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="design/operations-sui.html"><strong aria-hidden="true">4.1.</strong> Sui operations</a></li><li class="chapter-item expanded "><a href="design/operations-off-chain.html"><strong aria-hidden="true">4.2.</strong> Off-chain operations</a></li></ol></li><li class="chapter-item expanded "><a href="design/properties.html"><strong aria-hidden="true">5.</strong> Properties</a></li><li class="chapter-item expanded "><a href="design/future.html"><strong aria-hidden="true">6.</strong> Future discussion</a></li><li class="chapter-item expanded affix "><li class="part-title">Usage</li><li class="chapter-item expanded "><a href="usage/setup.html"><strong aria-hidden="true">7.</strong> Setup</a></li><li class="chapter-item expanded "><a href="usage/interacting.html"><strong aria-hidden="true">8.</strong> Interacting with Walrus</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="usage/client-cli.html"><strong aria-hidden="true">8.1.</strong> Using the client CLI</a></li><li class="chapter-item expanded "><a href="usage/json-api.html"><strong aria-hidden="true">8.2.</strong> Using the client JSON API</a></li><li class="chapter-item expanded "><a href="usage/web-api.html"><strong aria-hidden="true">8.3.</strong> Using the client HTTP API</a></li><li class="chapter-item expanded "><a href="usage/sdks.html"><strong aria-hidden="true">8.4.</strong> SDKs and other tools</a></li></ol></li><li class="chapter-item expanded "><a href="dev-guide/dev-guide.html"><strong aria-hidden="true">9.</strong> Developer guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="dev-guide/components.html"><strong aria-hidden="true">9.1.</strong> Components</a></li><li class="chapter-item expanded "><a href="dev-guide/dev-operations.html"><strong aria-hidden="true">9.2.</strong> Operations</a></li><li class="chapter-item expanded "><a href="dev-guide/sui-struct.html"><strong aria-hidden="true">9.3.</strong> Sui structures</a></li></ol></li><li class="chapter-item expanded "><a href="operator-guide/operator-guide.html"><strong aria-hidden="true">10.</strong> Operator guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="operator-guide/storage-node.html"><strong aria-hidden="true">10.1.</strong> Storage node</a></li><li class="chapter-item expanded "><a href="operator-guide/aggregator.html"><strong aria-hidden="true">10.2.</strong> Aggregator</a></li></ol></li><li class="chapter-item expanded "><a href="usage/stake.html"><strong aria-hidden="true">11.</strong> Stake and Unstake</a></li><li class="chapter-item expanded "><a href="usage/examples.html"><strong aria-hidden="true">12.</strong> Examples</a></li><li class="chapter-item expanded "><a href="usage/troubleshooting.html"><strong aria-hidden="true">13.</strong> Troubleshooting</a></li><li class="chapter-item expanded affix "><li class="part-title">Walrus Sites</li><li class="chapter-item expanded "><a href="walrus-sites/intro.html"><strong aria-hidden="true">14.</strong> Introduction to Walrus Sites</a></li><li class="chapter-item expanded "><a href="walrus-sites/tutorial.html"><strong aria-hidden="true">15.</strong> Your first Walrus Site</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="walrus-sites/tutorial-install.html"><strong aria-hidden="true">15.1.</strong> Installing the site builder</a></li><li class="chapter-item expanded "><a href="walrus-sites/tutorial-publish.html"><strong aria-hidden="true">15.2.</strong> Publishing a Walrus Site</a></li><li class="chapter-item expanded "><a href="walrus-sites/tutorial-suins.html"><strong aria-hidden="true">15.3.</strong> Bonus: Set a SuiNS name</a></li></ol></li><li class="chapter-item expanded "><a href="walrus-sites/advanced.html"><strong aria-hidden="true">16.</strong> Advanced functionality</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="walrus-sites/commands.html"><strong aria-hidden="true">16.1.</strong> Site builder commands</a></li><li class="chapter-item expanded "><a href="walrus-sites/builder-config.html"><strong aria-hidden="true">16.2.</strong> Advanced site-builder configuration</a></li><li class="chapter-item expanded "><a href="walrus-sites/routing.html"><strong aria-hidden="true">16.3.</strong> Specifying headers and routing</a></li><li class="chapter-item expanded "><a href="walrus-sites/linking.html"><strong aria-hidden="true">16.4.</strong> Linking from and to Walrus Sites</a></li><li class="chapter-item expanded "><a href="walrus-sites/redirects.html"><strong aria-hidden="true">16.5.</strong> Redirecting objects to Walrus Sites</a></li></ol></li><li class="chapter-item expanded "><a href="walrus-sites/overview.html"><strong aria-hidden="true">17.</strong> Technical overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="walrus-sites/portal.html"><strong aria-hidden="true">17.1.</strong> The Walrus Sites portal</a></li><li class="chapter-item expanded "><a href="walrus-sites/authentication.html"><strong aria-hidden="true">17.2.</strong> Site data authentication</a></li><li class="chapter-item expanded "><a href="walrus-sites/restrictions.html"><strong aria-hidden="true">17.3.</strong> Known restrictions</a></li></ol></li><li class="chapter-item expanded "><a href="walrus-sites/tos.html"><strong aria-hidden="true">18.</strong> Terms of service</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><a href="glossary.html">Glossary</a></li><li class="chapter-item expanded affix "><a href="legal/testnet_tos.html">Testnet terms of service</a></li><li class="chapter-item expanded affix "><a href="legal/privacy.html">Privacy policy</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Walrus</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="walrus"><a class="header" href="#walrus">Walrus</a></h1>
<p>Welcome to the developer documentation for Walrus, a decentralized storage and data availability
protocol designed specifically for large binary files, or "blobs". Walrus focuses on providing a
robust but affordable solution for storing unstructured content on decentralized storage nodes
while ensuring high availability and reliability even in the presence of Byzantine faults.</p>
<div id="admonition-fun-fact" class="admonition admonish-tip" role="note" aria-labelledby="admonition-fun-fact-title">
<div class="admonition-title">
<div id="admonition-fun-fact-title">
<p>Fun fact</p>
</div>
<a class="admonition-anchor-link" href="index.html#admonition-fun-fact"></a>
</div>
<div>
<p>If you are viewing this site at <a href="https://docs.walrus.site">https://docs.walrus.site</a>, you are fetching this from
Walrus behind the scenes. See the <a href="./walrus-sites/intro.html">Walrus Sites chapter</a> for further
details on how this works.</p>
</div>
</div>
<div id="admonition-disclaimer-about-the-walrus-testnet" class="admonition admonish-danger" role="note" aria-labelledby="admonition-disclaimer-about-the-walrus-testnet-title">
<div class="admonition-title">
<div id="admonition-disclaimer-about-the-walrus-testnet-title">
<p>Disclaimer about the Walrus Testnet</p>
</div>
<a class="admonition-anchor-link" href="index.html#admonition-disclaimer-about-the-walrus-testnet"></a>
</div>
<div>
<p>The current Testnet release of Walrus and Walrus Sites is a preview intended to showcase
the technology and solicit feedback from builders, users, and storage-node operators.
All transactions are executed on the Sui Testnet and use Testnet WAL and SUI which have no
value. The state of the store <strong>can and will be wiped</strong> at any point and possibly with no warning.
Do not rely on this Testnet for any production purposes, it comes with no availability or
persistence guarantees.</p>
<p>Furthermore, encodings and blob IDs may be incompatible with the future Testnet and Mainnet, and
developers will be responsible for migrating any Testnet applications and data to Mainnet. Detailed
migration guides will be provided when Mainnet becomes available.</p>
<p>Also see the <a href="../legal/testnet_tos.html">Testnet terms of service</a> under which this Testnet is made
available.</p>
</div>
</div>
<div id="admonition-public-access" class="admonition admonish-danger" role="note" aria-labelledby="admonition-public-access-title">
<div class="admonition-title">
<div id="admonition-public-access-title">
<p>Public access</p>
</div>
<a class="admonition-anchor-link" href="index.html#admonition-public-access"></a>
</div>
<div>
<p><strong>All blobs stored in Walrus are public and discoverable by all.</strong> Therefore you must not use Walrus
to store anything that contains secrets or private data without additional measures to protect
confidentiality.</p>
</div>
</div>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li>
<p><strong>Storage and retrieval:</strong> Walrus supports storage operations to write and read blobs. It also
allows anyone to prove that a blob has been stored and is available for retrieval at a later
time.</p>
</li>
<li>
<p><strong>Cost efficiency:</strong> By utilizing advanced erasure coding, Walrus maintains storage costs at
approximately five times the size of the stored blobs, and encoded parts of each blob are stored
on each storage node. This is significantly more cost-effective than traditional full-replication
methods and much more robust against failures than protocols that only store each blob on a subset
of storage nodes.</p>
</li>
<li>
<p><strong>Integration with the Sui blockchain:</strong> Walrus leverages <a href="https://github.com/MystenLabs/sui">Sui</a>
for coordination, attesting availability, and payments. Storage space is represented as a resource
on Sui, which can be owned, split, merged, and transferred. Stored blobs are also represented by
objects on Sui, which means that smart contracts can check whether a blob is available and for how
long, extend its lifetime or optionally delete it.</p>
</li>
<li>
<p><strong>Epochs, tokenomics, and delegated proof of stake</strong> Walrus is operated by a committee of storage
nodes that evolve between epochs. A native token, WAL (and its subdivision FROST, where 1 WAL is
equal to 1 billion FROST), is used to delegate stake to storage nodes, and those with high stake
become part of the epoch committee. The WAL token is also used for payments for storage. At the
end of each epoch, rewards for selecting storage nodes, storing and serving blobs are distributed
to storage nodes and whose that stake with them. All these processes are mediated by smart
contracts on the Sui platform.</p>
</li>
<li>
<p><strong>Flexible access:</strong> Users can interact with Walrus through a command-line interface (CLI),
software development kits (SDKs), and web2 HTTP technologies. Walrus is designed to work well
with traditional caches and content distribution networks (CDNs), while ensuring all operations
can also be run using local tools to maximize decentralization.</p>
</li>
</ul>
<h2 id="architecture-and-operations"><a class="header" href="#architecture-and-operations">Architecture and operations</a></h2>
<p>Walrus's architecture ensures that content remains accessible and retrievable even when many
storage nodes are unavailable or malicious. Under the hood it uses modern error correction
techniques based on fast linear fountain codes, augmented to ensure resilience against Byzantine
faults, and a dynamically changing set of storage nodes. The core of Walrus remains simple, and
storage node management and blob certification leverages Sui smart contracts.</p>
<h2 id="organization"><a class="header" href="#organization">Organization</a></h2>
<p>This documentation is split into several parts:</p>
<ol>
<li><em>Dev blog</em> contains announcements and other blog posts.</li>
<li><em>Design</em> describes the objectives, security properties, and architecture of Walrus.</li>
<li><em>Usage</em> provides concrete information for developers. If you want to get started quickly, you can
jump directly to the <a href="./usage/setup.html">setup chapter</a>.</li>
<li><em>Walrus Sites</em> describes how you can use Walrus and Sui together to build truly decentralized
websites.</li>
</ol>
<p>Finally, we provide a <a href="./glossary.html">glossary</a> that explains the terminology used throughout the
documentation.</p>
<h2 id="sources"><a class="header" href="#sources">Sources</a></h2>
<p>This documentation is built using <a href="https://rust-lang.github.io/mdBook/">mdBook</a> from source files in
<a href="https://github.com/MystenLabs/walrus-docs/">https://github.com/MystenLabs/walrus-docs/</a>. Please report or fix any errors you find in this
documentation in that GitHub project.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="the-walrus-dev-blog"><a class="header" href="#the-walrus-dev-blog">The Walrus Dev Blog</a></h1>
<p>This part of the Walrus documentation is used to publish news and updates about Walrus's
development!</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-walrus-a-decentralized-storage-and-data-availability-protocol"><a class="header" href="#announcing-walrus-a-decentralized-storage-and-data-availability-protocol">Announcing Walrus: A Decentralized Storage and Data Availability Protocol</a></h1>
<p>Walrus is an innovative decentralized storage network for blockchain apps and autonomous agents. The
Walrus storage system is being released today as a developer preview for Sui builders in order to
gather feedback. We expect a broad rollout to other web3 communities very soon!</p>
<p>Leveraging innovations in erasure coding, Walrus enables fast and robust encoding of unstructured
data blobs into smaller slivers distributed and stored over a network of storage nodes. A subset of
slivers can be used to rapidly reconstruct the original blob, even when up to two-thirds of the
slivers are missing. This is possible while keeping the replication factor down to a minimal 4x-5x,
similar to existing cloud-based services, but with the additional benefits of decentralization and
resilience to more widespread faults.</p>
<h2 id="the-replication-challenge"><a class="header" href="#the-replication-challenge">The Replication Challenge</a></h2>
<p>Sui is the most advanced blockchain system in relation to storage on validators, with innovations
such as a <a href="https://docs.sui.io/concepts/tokenomics/storage-fund">storage fund</a> that future-proofs
the cost of storing data on-chain. Nevertheless, Sui still requires complete data replication among
all validators, resulting in a replication factor of 100x or more in today’s Sui Mainnet. While this
is necessary for replicated computing and smart contracts acting on the state of the blockchain, it
is inefficient for simply storing unstructured data blobs, such as music, video, blockchain history,
etc.</p>
<h2 id="introducing-walrus-efficient-and-robust-decentralized-storage"><a class="header" href="#introducing-walrus-efficient-and-robust-decentralized-storage">Introducing Walrus: Efficient and Robust Decentralized Storage</a></h2>
<p>To tackle the challenge of high replication costs, Mysten Labs has developed Walrus, a decentralized
storage network offering exceptional data availability and robustness with a minimal replication
factor of 4x-5x. Walrus provides two key benefits:</p>
<ol>
<li>
<p><strong>Cost-Effective Blob Storage:</strong> Walrus allows for the uploading of gigabytes of data at a time
with minimal cost, making it an ideal solution for storing large volumes of data. Walrus can do
this because the data blob is transmitted only once over the network, and storage nodes only
spend a fraction of resources compared to the blob size. As a result, the more storage nodes the
system has, the fewer resources each storage node uses per blob.</p>
</li>
<li>
<p><strong>High Availability and Robustness:</strong> Data stored on Walrus enjoys enhanced reliability and
availability under fault conditions. Data recovery is still possible even if two-thirds of the
storage nodes crash or come under adversarial control. Further, availability may be certified
efficiently without downloading the full blob.</p>
</li>
</ol>
<p>Decentralized storage can take multiple forms in modern ecosystems. For instance, it offers better
guarantees for digital assets traded as NFTs. Unlike current designs that store data off-chain,
decentralized storage ensures users own the actual resource, not just metadata, mitigating risks of
data being taken down or misrepresented.</p>
<p>Additionally, decentralized storage is not only useful for storing data such as pictures or files
with high availability; it can also double as a low-cost data availability layer for rollups. Here,
sequencers can upload transactions on Walrus, and the rollup executor only needs to temporarily
reconstruct them for execution.</p>
<p>We also believe Walrus will accompany existing disaster recovery strategies for millions of
enterprise companies. Not only is Walrus low-cost, it also provides unmatched layers of data
availability, integrity, transparency, and resilience that centralized solutions by design cannot
offer.</p>
<p>Walrus is powered by the Sui Network and scales horizontally to hundreds or thousands of networked
decentralized storage nodes. This should enable Walrus to offer Exabytes of storage at costs
competitive with current centralized offerings, given the higher assurance and decentralization.</p>
<h2 id="the-future-of-walrus"><a class="header" href="#the-future-of-walrus">The Future of Walrus</a></h2>
<p>By releasing this developer preview we hope to share some of the design decisions with the
decentralized app developer community and gather feedback on the approach and the APIs for storing,
retrieving, and certifying blobs. In this developer preview, all storage nodes are operated by
Mysten Labs to help us understand use cases, fix bugs, and improve the performance of the software.</p>
<p>Future updates to Walrus will allow for dynamically changing the set of decentralized storage nodes,
as well as changing the mapping of what slivers are managed by each storage node. The available
operations and tools will also be expanded to cover more storage-related use cases. Many of these
functions will be designed with the feedback we gather in mind.</p>
<p>Stay tuned for more updates on how Walrus will revolutionize data storage in the web3 ecosystem.</p>
<h2 id="what-can-developers-build"><a class="header" href="#what-can-developers-build">What can developers build?</a></h2>
<p>As part of this developer preview, we provide a binary client (currently macOS, ubuntu) that can be
operated from the <a href="https://docs.walrus.site/usage/client-cli.html">command line interface</a>, a <a href="https://docs.walrus.site/usage/json-api.html">JSON
API</a>, and an <a href="https://docs.walrus.site/usage/web-api.html">HTTP
API</a>. We also offer the community an aggregator and
publisher service and a Devnet deployment of 10 storage nodes operated by Mysten Labs.</p>
<p>We hope developers will experiment with building applications that leverage the Walrus Decentralized
Store in a variety of ways. As examples, we hope to see the community build:</p>
<ul>
<li>
<p><strong>Storage of media for NFT or dapps:</strong> Walrus can directly store and serve media such as images,
sounds, sprites, videos, other game assets, etc. This is publicly available media that can be
accessed using HTTP requests at caches to create multimedia dapps.</p>
</li>
<li>
<p><strong>AI-related use cases:</strong> Walrus can store clean data sets of training data, datasets with a known
and verified provenance, model weights, and proofs of correct training for AI models. Or it may be
used to store and ensure the availability and authenticity of an AI model output.</p>
</li>
<li>
<p><strong>Storage of long term archival of blockchain history:</strong> Walrus can be used as a lower-cost
decentralized store to store blockchain history. For Sui, this can include sequences of
checkpoints with all associated transaction and effects content, as well as historic snapshots of
the blockchain state, code, or binaries.</p>
</li>
<li>
<p><strong>Support availability for L2s:</strong> Walrus enables parties to certify the availability of blobs, as
required by L2s that need data to be stored and attested as available to all. This may also
include the availability of extra audit data such as validity proofs, zero-knowledge proofs of
correct execution, or large fraud proofs.</p>
</li>
<li>
<p><strong>Support a full decentralized web experience:</strong> Walrus can host full decentralized web
experiences including all resources (such as js, css, html, and media). These can provide content
but also host the UX of dapps, enabling fully decentralized front- and back-ends on chain. It
brings the full "web" back into "web3".</p>
</li>
<li>
<p><strong>Support subscription models for media:</strong> Creators can store encrypted media on Walrus and only
provide access via decryption keys to parties that have paid a subscription fee or have paid for
content. (Note that Walrus provides the storage; encryption and decryption must be done off
Walrus).</p>
</li>
</ul>
<p>We are excited to see what else the web3 developer community can imagine!</p>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>For this developer preview the public Walrus Devnet is openly available to all developers. Developer
documentation is available at <a href="https://docs.walrus.site">https://docs.walrus.site</a>.</p>
<p>SUI Testnet token is the main currency for interacting with Walrus. Developers pay for Walrus Devnet
storage using SUI Testnet tokens which can be acquired at the <a href="https://discord.com/channels/916379725201563759/1037811694564560966">Sui Testnet Discord
faucet</a>.</p>
<h2 id="one-more-thing-"><a class="header" href="#one-more-thing-">One more thing …</a></h2>
<p>The <a href="https://walrus.site">Walrus Sites website</a>, the <a href="https://docs.walrus.site">Walrus docs</a>, and
<a href="https://blog.walrus.site">this very blog</a> are hosted on Walrus. To learn more about Walrus Sites
and how you can deploy your own, <a href="https://docs.walrus.site/walrus-sites/intro.html">click here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="devnet-update"><a class="header" href="#devnet-update">Devnet Update</a></h1>
<p>Published on: 2024-08-12</p>
<p>We have redeployed the Walrus Devnet to incorporate various improvements to the Walrus storage nodes
and clients. In this process, all blobs stored on Walrus were wiped. Note that this may happen again
on Devnet and Testnet, but obviously <em>not on the future Mainnet</em>.</p>
<h2 id="migration-and-re-deployment-of-walrus-sites"><a class="header" href="#migration-and-re-deployment-of-walrus-sites">Migration and Re-deployment of Walrus Sites</a></h2>
<p>You can obtain the latest version of the <code>walrus</code> binary and the new configuration as described in
the <a href="blog/../usage/setup.html">setup chapter</a>.</p>
<p>If you had deployed any Walrus Sites, the site object on Sui and any SuiNS name are still valid.
However, you need to re-store all blobs on Walrus. You can achieve this by running the site-builder
tool (from the <code>walrus-sites</code> directory) as follows:</p>
<pre><code class="language-sh">./target/release/site-builder --config site-builder/assets/builder-example.yaml update --force \
    &lt;path to the site&gt; &lt;site object ID&gt;
</code></pre>
<h2 id="changes"><a class="header" href="#changes">Changes</a></h2>
<p>Besides many improvements to the storage nodes, the new version of Walrus includes the following
user-facing changes:</p>
<ul>
<li>Improved coin management: The client now better selects coins for gas and storage fees. Users no
longer require multiple coins in their wallet.</li>
<li>Improved connection management: The client now limits the number of parallel connections to
improve performance for users with low network bandwidth storing large blobs.</li>
<li>OpenAPI specification: Walrus storage nodes, aggregators, and publishers expose their API
specifications at the path <code>/v1/api</code>.</li>
<li>System info in JSON: The <code>info</code> command is now also available in JSON mode.</li>
<li>Client version: The <code>walrus</code> CLI now has a <code>--version</code> option.</li>
<li>Support for the empty blob: The empty blob is now supported by Walrus.</li>
<li>Default configuration-file paths: The client now looks for configuration files in
<code>~/.config/walrus</code> in addition to <code>~/.walrus</code> and recognizes the extension <code>.yml</code> in addition to
<code>.yaml</code>.</li>
<li>Home directory in paths: Paths specified in configuration files now expand the <code>~</code> symbol at the
beginning to the user's home directory.</li>
<li>More robust store and status check: The <code>store</code> and <code>blob-status</code> commands are now more robust
against Sui full nodes that aggressively prune past events and against load-balancers that send
transactions to different full nodes.</li>
<li>Fix CLI parsing: The <code>walrus</code> CLI now properly handles hyphens in blob IDs.</li>
</ul>
<p>This update also increases the number of shards to 1000, which is more representative of the
expected value in Testnet and Mainnet.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-the-official-walrus-whitepaper"><a class="header" href="#announcing-the-official-walrus-whitepaper">Announcing the Official Walrus Whitepaper</a></h1>
<p>In June, Mysten Labs announced Walrus, a new decentralized secure blob store design, and introduced
a developer preview that currently stores over <a href="https://capacity.walrus.site/">12TiB</a> of data.
<a href="https://info.breakingtheice.sui.io/">Breaking the Ice</a> gathered over 200 developers to build apps
leveraging decentralized storage.</p>
<p>It is time to unveil the next stage of the project: Walrus will become an independent decentralized
network with its own utility token, WAL, that will play a key role in the operation and governance
of the network. Walrus will be operated by storage nodes through a delegated proof-of-stake
mechanism using the WAL token. An independent Walrus foundation will encourage the advancement and
adoption of Walrus, and support its community of users and developers.</p>
<p>Today, we published the Walrus <a href="blog/../walrus.pdf">whitepaper</a> (also on
<a href="https://github.com/MystenLabs/walrus-docs/blob/main/docs/walrus.pdf">GitHub</a>) that offers
additional details, including:</p>
<ul>
<li>The encoding scheme and Read / Write operations Walrus uses to ensure both security and efficient
scaling to 100s and 1000s of storage nodes, including interactions with the Sui blockchain which
serves as a coordination layer for Walrus’ operations.</li>
<li>The reconfiguration of storage nodes across epochs, and how the protocol ensures available blobs
on Walrus remain available over long periods of time.</li>
<li>The tokenomics of Walrus based on the WAL token, including how staking and staking rewards are
structured, how pricing and payments for storage are handled and distributed in each epoch, and
the governance of key system parameters.</li>
<li>Forward-looking design options, such as a cheap mechanism to challenge and audit storage nodes,
options for ensuring reads with a higher service quality, possibly against a payment, and designs
that empower light nodes to meaningfully contribute to the protocol’s robustness, serve reads, and
be rewarded.</li>
</ul>
<p>The whitepaper focuses on the steady-state design aspects of Walrus. Further details about the
project, such as timelines, opportunities for community participation, how to join the network as a
storage node, and plans around light nodes, will be shared in subsequent posts.</p>
<p>To be part of this journey:</p>
<ul>
<li>Follow us on <a href="https://x.com/WalrusProtocol">Twitter</a></li>
<li>Join our <a href="https://discord.com/invite/walrusprotocol">Discord</a></li>
<li><a href="blog/../index.html">Build apps</a> on Walrus</li>
<li><a href="blog/../walrus-sites/intro.html">Publish a Walrus Site</a> and share it</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-testnet"><a class="header" href="#announcing-testnet">Announcing Testnet</a></h1>
<p>Published on: 2024-10-17</p>
<p>Today, a community of operators launches the first public Walrus Testnet.
This is an important milestone in validating the operation of Walrus as a decentralized blob store,
by operating it on a set of independent storage nodes, that change over time through a delegated
proof of stake mechanism. The Testnet also brings functionality updates relating to governance,
epochs, and blob deletion.</p>
<h2 id="blob-deletion"><a class="header" href="#blob-deletion">Blob deletion</a></h2>
<p>The most important user-facing new feature is optional blob deletion. The uploader of a blob can
optionally indicate a blob is "deletable". This information is stored in the Sui blob metadata
object, and is also included in the event denoting when the blob is certified. Subsequently, the
owner of the Sui blob metadata object can "delete" it. As a result storage for the remaining
period is reclaimed and can be used by subsequent blob storage operations.</p>
<p>Blob deletion allows more fine-grained storage cost management: smart contracts that wrap blob
metadata objects can define logic that stores blobs and delete them to minimize costs, and reclaim
storage space before Walrus epochs end.</p>
<p>However, blob deletion is not an effective privacy mechanism in itself: copies of the blob may exist
outside Walrus storage nodes on caches and end-user stores or devices. Furthermore, if the identical
blob is stored by multiple Walrus users, the blob will still be available on Walrus until no copy
exists. Thus deleting your own copy of a blob cannot guarantee that it is deleted from Walrus as a
whole.</p>
<ul>
<li>Find out how to
<a href="blog/../usage/client-cli.html#reclaiming-space-via-deletable-blobs">upload and delete deletable blobs</a>
through the CLI.</li>
<li>Find out more about how <a href="blog/../dev-guide/dev-operations.html#delete">delete operations work</a>.</li>
</ul>
<h2 id="epochs"><a class="header" href="#epochs">Epochs</a></h2>
<p>Walrus Testnet enables multiple epochs. Initially, the epoch duration is set to a single day to
ensure the logic of epoch change is thoroughly tested. At Mainnet, epochs will likely be multiple
weeks long.</p>
<p>The progress of epochs makes the expiry epoch of blobs meaningful, and blobs will become unavailable
after their expiry epoch. The store command may be used to extend the expiry epoch of a blob that is
still available. This operation is efficient and only affects payments and metadata, and does not
re-upload blob contents.</p>
<ul>
<li>Find out the <a href="blog/../usage/client-cli.html#walrus-system-information">current epoch</a> through the CLI.</li>
<li>Find out how to store a blob for
<a href="blog/../usage/client-cli.html#storing-querying-status-and-reading-blobs">multiple epochs</a>.</li>
</ul>
<h2 id="the-wal-token-and-the-testnet-wal-faucet"><a class="header" href="#the-wal-token-and-the-testnet-wal-faucet">The WAL token and the Testnet WAL faucet</a></h2>
<p>Payments for blob storage and extending blob expiry are denominated in Testnet WAL, a
Walrus token issued on the Sui Testnet. Testnet WAL has no value, and an unlimited supply; so no
need to covet or hoard it, it's just for testing purposes and only issued on Sui Testnet.</p>
<p>WAL also has a smaller unit called FROST, similar to MIST for SUI. 1 WAL is equal to 1 billion
(1000000000) FROST.</p>
<p>To make Testnet WAL available to all who want to experiment with the Walrus Testnet we provide a
utility and smart contract to convert Testnet SUI (which also has no value) into Testnet WAL using
a one-to-one exchange rate. This is chosen arbitrarily, and generally one should not read too much
into the actual WAL denominated costs of storage on Testnet. They have been chosen arbitrarily.</p>
<p>Find out how to <a href="blog/../usage/setup.html#testnet-wal-faucet">request Testnet WAL tokens</a> through the CLI.</p>
<h2 id="decentralization-through-staking--unstaking"><a class="header" href="#decentralization-through-staking--unstaking">Decentralization through staking &amp; unstaking</a></h2>
<p>The WAL token may also be used to stake with storage operators. Staked WAL can be unstaked and
re-staked with other operators or used to purchase storage.</p>
<p>Each epoch storage nodes are selected and allocated storage shards according to their delegated
stake. At the end of each epoch payments for storing blobs for the epoch are distributed to storage
nodes and those that delegate stake to them. Furthermore, important network parameters (such as
total available storage and storage price) are set by the selected storage operators each epoch
according to their stake weight.</p>
<p>A staking web dApp is provided to experiment with this functionality. Community members have also
created explorers that can be used to view storage nodes when considering who to stake with. Staking
ensures that the ultimate governance of Walrus, directly in terms of storage nodes, and indirectly
in terms of parameters and software they chose, rests with WAL Token holders.</p>
<p>Under the hood and over the next months we will be testing many aspects of epoch changes and
storage node committee changes: better shard allocation mechanisms upon changes or storage node
stake; efficient ways to sync state between storage nodes; as well as better ways for storage nodes
to follow Sui event streams.</p>
<ul>
<li>Explore the <a href="https://stake.walrus.site">Walrus staking dApp</a>.</li>
<li>Look at recent activity on the <a href="https://walruscan.com/testnet/home">Walrus Explorer</a>.</li>
</ul>
<h2 id="new-move-contracts--documentation"><a class="header" href="#new-move-contracts--documentation">New Move contracts &amp; documentation</a></h2>
<p>As part of the Testnet release of Walrus, the documentation and Move Smart contracts have been
updated, and can be found in the <a href="https://github.com/MystenLabs/walrus-docs"><code>walrus-docs</code>
repository</a>.</p>
<h2 id="new-walrus-sites-features"><a class="header" href="#new-walrus-sites-features">New Walrus Sites features</a></h2>
<p>With the move to Walrus Testnet, Walrus Sites have also been updated! The new features in this
update greatly increase the flexibility, speed, and security of Walrus Sites. Developers can now
specify client-side routing rules, and add custom HTTP headers to the portals' responses for their
site, expanding the possibilities for what Walrus Sites can do.</p>
<p>Migrate now to take advantage of these new features! The old Walrus Sites, based on Walrus Devnet,
will still be available for a short time. However, Devnet will be wiped soon (as described below),
so it is recommended to migrate as soon as possible.</p>
<h2 id="discontinuation-of-walrus-devnet"><a class="header" href="#discontinuation-of-walrus-devnet">Discontinuation of Walrus Devnet</a></h2>
<p>The previous Walrus Devnet instance is now deprecated and <strong>will be shut down after 2024-10-31</strong>.
All data stored on Walrus Devnet (including Walrus Sites) will no longer be accessible at that
point. You need to re-upload all data to Walrus Testnet if you want it to remain accessible. Walrus
Sites also need to be migrated.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-testnet-v2"><a class="header" href="#announcing-testnet-v2">Announcing Testnet v2</a></h1>
<p>Published on: 2025-01-16</p>
<p>We are today redeploying the Walrus Testnet to incorporate various improvements, including some
backwards-incompatible changes. Make sure to get the latest binary and configuration as described
in the <a href="blog/../usage/setup.html">setup section</a>.</p>
<p>Note that all blob data on the previous Testnet instance has been wiped. All blobs need to be
re-uploaded to the new Testnet instance, including Walrus Sites. In addition, there is a new version
of the WAL token, so your previous WAL tokens will not work anymore. To use the Testnet v2, you
need to obtain new WAL tokens.</p>
<p>In the following sections, we describe the notable changes and the actions required for existing
Walrus Sites.</p>
<h2 id="epoch-duration"><a class="header" href="#epoch-duration">Epoch duration</a></h2>
<p>The epoch duration has been increased from one day to two days to emphasize that this duration is
different from Sui epochs (at Mainnet, epochs will likely be multiple weeks long). In addition, the
maximum number of epochs a blob can be stored for has been reduced from 200 to 183 (corresponding
to one year).</p>
<p>The <code>walrus store</code> command now also supports the <code>--epochs max</code> flag, which will store
the blob for the maximum number of epochs. Note that the <code>--epochs</code> flag is now mandatory.</p>
<h2 id="new-features"><a class="header" href="#new-features">New features</a></h2>
<p>Besides many improvements to the contracts and the storage-node service, the latest Walrus release
also brings several user-facing improvements.</p>
<ul>
<li>The <code>walrus store</code> command now supports storing multiple files at once. This is faster and more
cost-effective compared to storing each file separately as transactions can be batched through
<a href="https://docs.sui.io/concepts/transactions/prog-txn-blocks">PTBs</a>. Notably, this is compatible
with glob patterns offered by many shells, so you can for example run a command like <code>walrus store *.png --epochs 100</code> to store all PNG files in the current directory.</li>
<li>The <code>walrus</code> CLI now supports creating, funding, and extending <em>shared blobs</em> using the <code>walrus share</code>, <code>walrus store --share</code>, and <code>walrus fund-shared-blob</code> commands. Shared blobs are an
example of collectively managed and funded blobs. See the <a href="blog/../usage/client-cli.html#shared-blobs">shared blobs
section</a> for more details.</li>
</ul>
<h2 id="new-wal-token"><a class="header" href="#new-wal-token">New WAL token</a></h2>
<p>Along with the redeployment of Walrus, we have also deployed a fresh WAL contract. This
means that you cannot use any WAL token from the previous Testnet instance with the new Testnet
instance. You need to request new WAL tokens through the <a href="blog/../usage/setup.html#testnet-wal-faucet">Testnet WAL
faucet</a>.</p>
<h2 id="backwards-incompatible-changes"><a class="header" href="#backwards-incompatible-changes">Backwards-incompatible changes</a></h2>
<p>One reason for a full redeployment is to allow us to make some changes that are
backwards-incompatible. Many of those are related to the contracts and thus less visible to users.
There are, however, some changes that may affect you.</p>
<h3 id="configuration-files"><a class="header" href="#configuration-files">Configuration files</a></h3>
<p>The format of the configuration files for storage nodes and clients has been changed. Make sure to
use the latest version of the configuration files, see the <a href="blog/../usage/setup.html#configuration">configuration
section</a>.</p>
<h3 id="cli-options"><a class="header" href="#cli-options">CLI options</a></h3>
<p>Several CLI options of the <code>walrus</code> CLI have been changed. Notably, all "short" variants of options
(e.g., <code>-e</code> instead of <code>--epochs</code>) have been removed to prevent future confusion with new options.
Additionally, the <code>--epochs</code> flag is now mandatory for the <code>walrus store</code> command (this also affects
the <a href="blog/../usage/json-api.html">JSON API</a>).</p>
<p>Please refer to the CLI help (<code>walrus --help</code>, or <code>walrus &lt;command&gt; --help</code>) for further details.</p>
<h3 id="http-apis"><a class="header" href="#http-apis">HTTP APIs</a></h3>
<p>The paths, request, and response formats of the HTTP APIs have changed for the storage nodes, and
also the aggregator and publisher. Please refer to the section on the <a href="blog/../usage/web-api.html">HTTP
API</a> for further details.</p>
<h2 id="effects-on-and-actions-required-for-existing-walrus-sites"><a class="header" href="#effects-on-and-actions-required-for-existing-walrus-sites">Effects on and actions required for existing Walrus Sites</a></h2>
<p>The Walrus Sites contracts have not changed, which means that all corresponding objects on Sui are
still valid. However, the resources now point to blob IDs that do not yet exist on the new Testnet.
The easiest way to fix existing sites is to simply update them with the <code>--force</code> flag:</p>
<pre><code class="language-sh">site-builder update --epochs &lt;number of epochs&gt; --force &lt;path to site&gt; &lt;existing site object&gt;
</code></pre>
<h2 id="new-move-contracts--documentation-1"><a class="header" href="#new-move-contracts--documentation-1">New Move contracts &amp; documentation</a></h2>
<p>As part of the new Testnet release of Walrus, the Move smart contracts have been updated; the
deployed version can be found in the <a href="https://github.com/MystenLabs/walrus-docs/tree/main/contracts"><code>walrus-docs</code>
repository</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="objectives-and-use-cases"><a class="header" href="#objectives-and-use-cases">Objectives and use cases</a></h1>
<p>Walrus supports operations to store and read blobs, and to prove and verify their availability.
It ensures content survives storage nodes suffering Byzantine faults and remains available and
retrievable. It provides APIs to access the stored content over a CLI, SDKs and over web2 HTTP
technologies, and supports content delivery infrastructures like caches and content distribution
networks (CDNs).</p>
<p>Under the hood, storage cost is a small fixed multiple of the size of blobs (around 5x). Advanced
erasure coding keeps the cost low, in contrast to the full replication of data traditional to
blockchains, such as the &gt;100x multiple for data stored in Sui objects. As a result, storage of much
bigger resources (up to several GiB) is possible on Walrus at substantially lower cost than on Sui
or other blockchains. Because encoded blobs are stored on all storage nodes, Walrus also provides
superior robustness than designs with a small amount of replicas storing the full blob.</p>
<p>Walrus uses the Sui chain for coordination and payments. Available storage is represented as Sui
objects that can be acquired, owned, split, merged, and transferred. Storage space can be tied to
a stored blob for a period of time, with the resulting Sui object used to prove
availability on chain in smart contracts, or off chain using light clients.</p>
<p>The <a href="design/./overview.html">next chapter</a> discusses the above operations relating to storage,
retrieval, and availability in detail.</p>
<p>In the future, we plan to include in Walrus some minimal governance to allow storage nodes to
change between storage epochs. Walrus is also compatible with periodic payments for continued
storage. We also plan to implement storage attestation based on challenges to get confidence
that blobs are stored or at least available. Walrus also allows light nodes that store small parts
of blobs to get rewards for proving availability and assisting recovery. We will cover these
topics in later documents. We also provide details of the encoding scheme in a separate document.</p>
<h2 id="non-objectives"><a class="header" href="#non-objectives">Non-objectives</a></h2>
<p>There are a few things that Walrus explicitly is not:</p>
<ul>
<li>
<p>Walrus does not reimplement a CDN that might be geo-replicated or have less than tens of
milliseconds of latency. Instead, it ensures that traditional CDNs are usable and compatible with
Walrus caches.</p>
</li>
<li>
<p>Walrus does not re-implement a full smart contracts platform with consensus or execution. It
relies on Sui smart contracts when necessary, to manage Walrus resources and processes including
payments, storage epochs, and so on.</p>
</li>
<li>
<p>Walrus supports storage of any blob, including encrypted blobs. However, Walrus itself is not the
distributed key management infrastructure that manages and distributed encryption or decryption
keys to support a full private storage eco-system. It can, however, provide the storage layer for
such infrastructures.</p>
</li>
</ul>
<h2 id="use-cases"><a class="header" href="#use-cases">Use cases</a></h2>
<p>App builders may use Walrus in conjunction with any L1 or L2 blockchains to build experiences that
require large amounts of data to be stored in a decentralized manner and possibly certified as
available:</p>
<ul>
<li>
<p><strong>Storage of media for NFT or dApps:</strong> Walrus can directly store and serve media such as images,
sounds, sprites, videos, other game assets, and so on. This is publicly available media that is
accessed using HTTP requests at caches to create multimedia dApps.</p>
</li>
<li>
<p><strong>AI related use cases:</strong> Walrus can store clean data sets of training data, datasets with a
known and verified provenance, models, weights and proofs of correct training for AI models.
It can also store and ensure the availability of an AI model output.</p>
</li>
<li>
<p><strong>Storage of long term archival of blockchain history:</strong> Walrus can act as a lower-cost
decentralized store to store blockchain history. For Sui, this can include sequences of
checkpoints with all associated transaction and effects content, as well as historic snapshots
of the blockchain state, code, or binaries.</p>
</li>
<li>
<p><strong>Support availability for L2s:</strong> Walrus allows parties to certify the availability of blobs, as
required by L2s that need data to be stored and be attested as available to all. This may also
include availability of extra audit data such as validity proofs, zero knowledge proofs of
correct execution or large fraud proofs.</p>
</li>
<li>
<p><strong>Support a fully decentralized web experience:</strong> Walrus can host fully decentralized web
experiences, including all resources (such as js, css, html, media). These can not only
provide content, but also host the UX of dApps to enable applications with fully decentralized
front end and back ends on chain. Walrus puts the full "web" into web3.</p>
</li>
<li>
<p><strong>Support subscription models for media:</strong> Creators can store encrypted media on Walrus and only
provide access via decryption keys to parties that have paid a subscription fee or have paid for
content. Walrus provides the storage, encryption and decryption needs to happen off
the system.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="system-overview"><a class="header" href="#system-overview">System overview</a></h1>
<p>This chapter provides an overview of the <a href="design/./architecture.html">architecture</a> and <a href="design/./encoding.html">encoding
mechanisms</a> of the Walrus system.</p>
<p>Use the <a href="design/../glossary.html">glossary</a> as a reference for many of the bolded terms used in this
documentation.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="basic-architecture-and-security-assumptions"><a class="header" href="#basic-architecture-and-security-assumptions">Basic architecture and security assumptions</a></h1>
<p>The key actors in the Walrus architecture are the following:</p>
<ul>
<li>
<p><strong>Users</strong> through <strong>clients</strong> want to store and read <strong>blobs</strong> identified by their <strong>blob ID</strong>.</p>
<p>These actors are ready to pay for service
when it comes to writes and non-best-effort reads. Users also want to prove
the <strong>availability</strong> of a blob to third parties without the cost of sending or receiving the full
blob.</p>
<p>Users might be malicious in various ways: they might not want to pay for services, prove the
availability of unavailable blobs, modify/delete blobs without authorization, try to
exhaust resources of storage nodes, and so on.</p>
</li>
<li>
<p><strong>Storage nodes</strong> hold one or many <strong>shards</strong> within a <strong>storage epoch</strong>.</p>
<p>Each blob is erasure-encoded into many <strong>slivers</strong>. Slivers from each stored blob become part
of all shards. A shard at any storage epoch is associated with a storage node that actually stores
all slivers of the shard and is ready to serve them.</p>
<p>A Sui smart contract controls the assignment of shards to storage nodes within
<strong>storage epochs</strong>, and Walrus assumes that more than 2/3 of the
shards are managed by correct storage nodes within each storage epoch. This means that Walrus must
tolerate up to 1/3 of the shards managed by Byzantine storage nodes (approximately 1/3 of the
storage nodes being Byzantine) within each storage epoch and across storage epochs.</p>
</li>
<li>
<p>All clients and storage nodes operate a blockchain client (specifically on Sui), and mediate
payments, resources (space), mapping of shards to storage nodes, and metadata through blockchain
smart contracts. Users interact with the blockchain to acquire storage resources and upload
certificates for stored blobs. Storage nodes listen to the blockchain events to coordinate
their operations.</p>
</li>
</ul>
<p>Walrus supports any additional number of optional infrastructure actors that can operate in a
permissionless way:</p>
<ul>
<li>
<p><strong>Aggregators</strong> are clients that reconstruct blobs from slivers and make them available to users
over traditional web2 technologies (such as HTTP). They are optional in that end users may
reconstruct blobs directly or run a local aggregator to perform Walrus reads over web2
technologies locally.</p>
</li>
<li>
<p><strong>Caches</strong> are aggregators with additional caching functionality to decrease latency and reduce
load on storage nodes. Such cache infrastructures may also act as CDNs, split the cost of blob
reconstruction over many requests, be better connected, and so on. A client can always verify that
reads from such infrastructures are correct.</p>
</li>
<li>
<p><strong>Publishers</strong> are clients that help end users store a blob using web2 technologies,
using less bandwidth and custom logic.</p>
<p>In effect, they receive the blob to be published over traditional web2 protocols (like HTTP) and
run the Walrus store protocol on the end user's behalf. This includes encoding the blob into
slivers, distributing the slivers to storage nodes, collecting storage-node signatures and
aggregating them into a certificate, as well as all other on-chain actions.</p>
<p>They are optional in that a user can directly interact with Sui and
the storage nodes to store blobs. An end user can always verify that a publisher
performed their duties correctly by checking that an event associated with the
<strong><a href="design/./properties.html">point of availability</a></strong> for the blob exists on chain
and then either performing a read to see if Walrus returns the blob or encoding the blob
and comparing the result to the blob ID in the certificate.</p>
</li>
</ul>
<p>Aggregators, publishers, and end users are not considered trusted components of the system, and they
might deviate from the protocol arbitrarily. However, some of the security properties of Walrus only
hold for honest end users that use honest intermediaries (caches and publishers). Walrus provides a
means for end users to audit the correct operation of both caches and publishers.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="encoding-overheads-and-verification"><a class="header" href="#encoding-overheads-and-verification">Encoding, overheads, and verification</a></h1>
<p>The following list summarizes the basic encoding and cryptographic techniques used in Walrus:</p>
<ul>
<li>
<p>An <a href="https://en.wikipedia.org/wiki/Erasure_code">erasure code</a> encode algorithm takes a blob,
splits it into a number <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> of symbols, and encodes it into <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> symbols in such a way that a
subset of these <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> symbols can be used to reconstruct the blob.</p>
</li>
<li>
<p>Walrus uses a highly efficient erasure code and selects <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> such that a third of symbols can be
used to reconstruct the blob by the decode algorithm.</p>
</li>
<li>
<p>The encoding is <em>systematic</em>, meaning that some storage nodes hold part of the original blob,
allowing for fast random-access reads.</p>
</li>
<li>
<p>All encoding and decoding operations are deterministic, and encoders have no discretion about it.</p>
</li>
<li>
<p>For each blob, multiple symbols are combined into a <strong>sliver</strong>, which is then assigned to a shard.</p>
</li>
<li>
<p>Storage nodes manage one or more shards, and corresponding slivers of each blob are distributed
to all the storage shards.</p>
</li>
</ul>
<p>The detailed encoding setup results in an expansion of the blob size by a factor of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4.5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>.
This is independent of the number of shards and the number of storage nodes.</p>
<hr />
<p>Each blob is also associated with some metadata including a <strong>blob ID</strong> to allow verification:</p>
<ul>
<li>
<p>The blob ID is computed as an authenticator of the set of all shard data and metadata (byte size,
encoding, blob hash).</p>
<p>Walrus hashes a sliver representation in each of the shards and adds the resulting hashes into a
Merkle tree. Then the root of the Merkle tree is the blob hash used to derive the blob ID that
identifies the blob in the system.</p>
</li>
<li>
<p>Each storage node can use the blob ID to check if some shard data belongs to a blob using the
authenticated structure corresponding to the blob hash (Merkle tree). A successful check means
that the data is indeed as intended by the writer of the blob.</p>
</li>
<li>
<p>As the writer of a blob might have incorrectly encoded a blob (by mistake or on purpose), any
party that reconstructs a blob ID from shard slivers must check that it encodes to the correct
blob ID. The same is necessary when accepting any blob claiming to be a specific blob ID.</p>
<p>This process involves re-encoding the blob using the erasure code, and deriving the blob ID again
to check that the blob matches. This prevents a malformed blob (incorrectly erasure coded) from
ever being read as a valid blob at any correct recipient.</p>
</li>
<li>
<p>A set of slivers equal to the reconstruction threshold belonging to a blob ID that are either
inconsistent or lead to the reconstruction of a different ID represent an incorrect encoding. This
happens only if the user that encoded the blob was faulty or malicious and encoded it incorrectly.</p>
<p>Walrus can extract one symbol per sliver to form an inconsistency proof. Storage nodes can delete
slivers belonging to inconsistently encoded blobs, and upon request return either the
inconsistency proof or an inconsistency certificate posted on chain.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operations"><a class="header" href="#operations">Operations</a></h1>
<p>Walrus operations can be separated in <a href="design/./operations-sui.html">interactions with the Sui chain</a>, which
is used by Walrus for coordination and governance, and <a href="design/./operations-off-chain.html">off-chain
interactions</a> between clients and storage nodes.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operations-on-sui"><a class="header" href="#operations-on-sui">Operations on Sui</a></h1>
<p>Walrus uses Sui smart contracts to coordinate storage operations as resources that have a lifetime,
and payments. Smart contracts also facilitate governance to determine the storage nodes holding each
storage shard. The following content outlines these operations and refers to them as part of the
read/write paths.</p>
<p>Metadata is the only blob element ever exposed to Sui or its validators, as the content
of blobs is always stored off chain on Walrus storage nodes and caches. The storage nodes or caches
do not have to overlap with any Sui infrastructure components (such as validators), and the storage
epochs can be of different lengths and not have the same start/end times as Sui epochs.</p>
<h2 id="storage-resource-life-cycle-on-sui"><a class="header" href="#storage-resource-life-cycle-on-sui">Storage resource life cycle on Sui</a></h2>
<p>A number of Sui smart contracts hold the metadata of the Walrus system and all its entities.</p>
<ul>
<li>
<p>A <strong>Walrus system object</strong> holds the committee of storage nodes for the current storage epoch. The
system object also holds the total available space on Walrus and the price per unit of storage (1
KiB).</p>
<p>These values are determined by 2/3 agreement between the storage nodes for the storage
epoch. Users can pay to purchase storage space for some time duration. These space resources can
be split, merged, and transferred. Later, they can be used to place a blob ID into Walrus.</p>
</li>
<li>
<p>The <strong>storage fund</strong> holds funds for storing blobs over one or multiple storage epochs. When
purchasing storage space from the system object, users pay into the storage fund separated over
multiple storage epochs. Payments are made each epoch to storage nodes according to performance
(details follow).</p>
</li>
<li>
<p>A user acquires some storage through the contracts or transfer and can assign to it a blob ID,
signifying they want to store this blob ID into it. This emits a Move <strong>resource event</strong> that
storage nodes listen for to expect and authorize off-chain storage operations.</p>
</li>
<li>
<p>Eventually a user holds an off-chain <strong>availability certificate</strong> from storage nodes for a blob
ID. The user <strong>uploads the certificate on chain</strong> to signal that the blob ID is available for an
availability period. The certificate is checked against the latest Walrus committee,
and an <strong>availability event</strong> is emitted for the blob ID if correct. This is the point of
availability for the blob.</p>
</li>
<li>
<p>At a later time, a certified blob's storage can be <strong>extended</strong> by adding a storage object to it
with a longer expiry period. This facility can be used by smart contracts to extend the
availability of blobs stored in perpetuity as long as funds exist to continue providing storage.</p>
</li>
<li>
<p>In case a blob ID is not correctly encoded, an <strong>inconsistency proof certificate</strong> can be uploaded
on chain at a later time. This action emits an <strong>inconsistent blob event</strong>, signaling that the
blob ID read results always return <code>None</code>. This indicates that its slivers can be deleted by
storage nodes, except for an indicator to return <code>None</code>.</p>
</li>
</ul>
<p>Users writing to Walrus, need to perform Sui transactions to acquire storage and certify blobs.
Users creating or consuming proofs for attestations of blob availability read the chain
only to prove or verify emission of events. Nodes read
the blockchain to get committee metadata only once per epoch, and then request slivers directly
from storage nodes by blob ID to perform reads on Walrus resources.</p>
<h2 id="governance-operations-on-sui"><a class="header" href="#governance-operations-on-sui">Governance operations on Sui</a></h2>
<p>Each Walrus storage epoch is represented by the Walrus system object that contains a storage
committee and various metadata or storage nodes, like the mapping between shards and storage nodes,
available space, and current costs.</p>
<p>Users can go to the system object for the period and <strong>buy some storage</strong> amount for one or more
storage epochs. At each storage epoch there is a price for storage, and the payment provided becomes
part of a <strong>storage fund</strong> for all the storage epochs that span the storage bought. There is a
maximum number of storage epochs in the future for which storage can be bought (approximately 2
years). Storage is a resource that can be split, merged, and transferred.</p>
<p>At the end of the storage epoch, part of the funds in the <strong>storage fund need to be allocated to
storage nodes</strong>. The idea here is for storage nodes to perform light audits of each other,
and suggest which nodes are to be paid based on the performance of these audits.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="off-chain-operations"><a class="header" href="#off-chain-operations">Off-chain operations</a></h1>
<p>While Walrus operations happen off Sui, they might interact with the blockchain flows defining the
resource life cycle.</p>
<h2 id="write-paths"><a class="header" href="#write-paths">Write paths</a></h2>
<p><img src="design/../assets/WriteFlow.png" alt="Write paths of Walrus" /></p>
<p>Systems overview of writes, illustrated in the previous image:</p>
<ul>
<li>
<p>A user acquires a storage resource of appropriate size and duration on chain, either by directly
buying it on the Walrus system object or a secondary market. A user can split, merge, and
transfer owned storage resources.</p>
</li>
<li>
<p>When users want to store a blob, they first erasure code it and compute the
blob ID. Then they can perform the following steps themselves, or use a publisher to perform steps
on their behalf.</p>
</li>
<li>
<p>The user goes on chain (Sui) and updates a storage resource to register the blob ID with the
desired size and lifetime. This emits an event, received by storage nodes. After the
user receives they then continue the upload.</p>
</li>
<li>
<p>The user sends the blob metadata to all storage nodes and each of the blob slivers to the storage
node that currently manages the corresponding shard.</p>
</li>
<li>
<p>A storage node managing a shard receives a sliver and checks it against the blob ID.
It also checks that there is a blob resource with the blob ID that is authorized to store
a blob. If correct, the storage node then signs a statement that it holds the sliver for blob ID
(and metadata) and returns it to the user.</p>
</li>
<li>
<p>The user puts together the signatures returned from storage nodes into an availability certificate
and submits it to the chain. When the certificate is verified on chain, an availability event for
the blob ID is emitted, and all other storage nodes seek to download any missing shards for the
blob ID. This event emitted by Sui is the <a href="design/./properties.html">point of availability (PoA)</a> for the
blob ID.</p>
</li>
<li>
<p>After the PoA, and without user involvement, storage nodes sync and recover any missing metadata
and slivers.</p>
</li>
</ul>
<p>The user waits for 2/3 of shard signatures to return to create the certificate of
availability. The rate of the code is below 1/3, allowing for reconstruction even if only 1/3 of
shards return the sliver for a read. Because at most 1/3 of the storage nodes can fail, this ensures
reconstruction if a reader requests slivers from all storage nodes. The full process can
be mediated by a publisher that receives a blob and drives the process to completion.</p>
<h2 id="refresh-availability"><a class="header" href="#refresh-availability">Refresh availability</a></h2>
<p>Because no content data is required to refresh the duration of storage, refresh is conducted fully
on chain within the protocol. To request an extension to the availability of a blob, a user provides
an appropriate storage resource. Upon success this emits an event that storage nodes receive to
extend the time for which each sliver is stored.</p>
<h2 id="inconsistent-resource-flow"><a class="header" href="#inconsistent-resource-flow">Inconsistent resource flow</a></h2>
<p>When a correct storage node tries to reconstruct a sliver for a blob past <a href="design/./properties.html">PoA</a>,
this may fail if the encoding of the blob was incorrect. In this case, the storage node can instead
extract an inconsistency proof for the blob ID. It then uses the proof to create an inconsistency
certificate and upload it on chain.</p>
<p>The flow is as follows:</p>
<ul>
<li>
<p>A storage node fails to reconstruct a sliver, and instead computes an inconsistency proof.</p>
</li>
<li>
<p>The storage node sends the blob ID and inconsistency proof to all storage nodes of the Walrus
epoch. The storage nodes verify the proof and sign it.</p>
</li>
<li>
<p>The storage node who found the inconsistency aggregates the signatures into an inconsistency
certificate and sends it to the Walrus smart contract, which verifies it and emits an inconsistent
resource event.</p>
</li>
<li>
<p>Upon receiving an inconsistent resource event, correct storage nodes delete sliver data for the
blob ID and record in the metadata to return <code>None</code> for the blob ID for the
<a href="design/./properties.html">availability period</a>. No storage attestation challenges are issued for this
blob ID.</p>
</li>
</ul>
<div id="admonition-reading-inconsistent-blobs" class="admonition admonish-tip" role="note" aria-labelledby="admonition-reading-inconsistent-blobs-title">
<div class="admonition-title">
<div id="admonition-reading-inconsistent-blobs-title">
<p>Reading inconsistent blobs</p>
</div>
<a class="admonition-anchor-link" href="design/operations-off-chain.html#admonition-reading-inconsistent-blobs"></a>
</div>
<div>
<p>A blob ID that is inconsistent always resolves to <code>None</code> upon reading because
the read process re-encodes the received blob to check that the blob ID is correctly derived from a
consistent encoding. This means that an inconsistency proof reveals only a true fact to storage
nodes (that do not otherwise run decoding), and does not change the output of read in any case.</p>
<p>However, partial reads leveraging the systematic nature of the encoding might successfully return
partial reads for inconsistently encoded files. Thus, if consistency and availability of reads is
important, dApps should do full reads rather than partial reads.</p>
</div>
</div>
<h2 id="read-paths"><a class="header" href="#read-paths">Read paths</a></h2>
<p>A user can read stored blobs either directly or through an aggregator/cache. The operations are the
same for direct user access, for aggregators, and caches in case of cache misses. In practice, most
reads happen through caches for blobs that are hot and do not result in requests to storage nodes.</p>
<ul>
<li>
<p>The reader gets the metadata for the blob ID from any storage node, and authenticates it using
the blob ID.</p>
</li>
<li>
<p>The reader then sends a request to the storage nodes for the shards corresponding to the blob ID
and waits for <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> to respond. Sufficient requests are sent in parallel to ensure low latency
for reads.</p>
</li>
<li>
<p>The reader authenticates the slivers returned with the blob ID, reconstructs the blob, and decides
whether the contents are a valid blob or inconsistent.</p>
</li>
<li>
<p>Optionally, for a cache, the result is cached and can be served without reconstruction until it is
evicted from the cache. Requests for the blob to the cache return the blob contents, or a proof
that the blob is inconsistently encoded.</p>
</li>
</ul>
<h2 id="challenge-mechanism-for-storage-attestation"><a class="header" href="#challenge-mechanism-for-storage-attestation">Challenge mechanism for storage attestation</a></h2>
<p>During an epoch, a correct storage node challenges all shards to provide symbols for blob slivers
past PoA:</p>
<ul>
<li>
<p>The list of available blobs for the epoch is determined by the sequence of Sui events up
to the past epoch. Inconsistent blobs are not challenged, and a record proving this status
can be returned instead.</p>
</li>
<li>
<p>A challenge sequence is determined by providing a seed to the challenged shard. The sequence is
then computed based both on the seed <strong>and</strong> the content of each challenged blob ID. This creates
a sequential read dependency.</p>
</li>
<li>
<p>The response to the challenge provides the sequence of shard contents for the blob IDs in a
timely manner.</p>
</li>
<li>
<p>The challenger node uses thresholds to determine whether the challenge was passed, and reports
the result on chain.</p>
</li>
<li>
<p>The challenge/response communication is authenticated.</p>
</li>
</ul>
<p>Challenges provide some reassurance that the storage node can actually recover shard data in a
probabilistic manner, avoiding storage nodes getting payment without any evidence they might
retrieve shard data. The sequential nature of the challenge and some reasonable timeout also ensures
that the process is timely.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="walrus-assurance-and-security-properties"><a class="header" href="#walrus-assurance-and-security-properties">Walrus assurance and security properties</a></h1>
<p>The properties below hold true subject to the assumption that for all storage epochs 2/3 of shards
are operated by storage nodes that faithfully and correctly follow the Walrus protocol.</p>
<p>As described <a href="design/./encoding.html">before</a>, each blob is encoded into slivers using an erasure code and a
blob ID is cryptographically derived. For a given blob ID there is a <strong>point of availability (PoA)</strong>
and an <strong>availability period</strong>, observable through an event on the Sui chain.</p>
<p>The following properties relate to the PoA:</p>
<ul>
<li>After the PoA, for a blob ID, any correct user that performs a read within the availability period
will eventually terminate and get a value <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> which is either the blob contents <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> or <code>None</code>.</li>
<li>After the PoA, if two correct users perform a read and get <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>, respectively, then
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>.</li>
<li>A correct user with an appropriate storage resource can always perform store for a blob <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> with
a blob ID and advance the protocol until the PoA.</li>
<li>A read after the PoA for a blob <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> stored by a correct user, will result in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>.</li>
</ul>
<p>Some assurance properties ensure the correct internal processes of Walrus storage nodes.
For the purposes of defining these, an <strong>inconsistency proof</strong> proves that a blob ID was
stored by a user that incorrectly encoded a blob.</p>
<ul>
<li>After the PoA and for a blob ID stored by a correct user, a storage node is always able to recover
the correct slivers for its shards for this blob ID.</li>
<li>After the PoA, if a correct storage node cannot recover a sliver, it can produce an inconsistency
proof for the blob ID.</li>
<li>If a blob ID is stored by a correct user, an inconsistently proof cannot be derived for it.</li>
<li>A read by a correct user for a blob ID for which an inconsistency proof may exist returns <code>None</code>.</li>
</ul>
<p>Note that there is no delete operation and a blob ID past the PoA will be available for the full
availability period.</p>
<div id="admonition-rule-of-thumb" class="admonition admonish-tip" role="note" aria-labelledby="admonition-rule-of-thumb-title">
<div class="admonition-title">
<div id="admonition-rule-of-thumb-title">
<p>Rule of thumb</p>
</div>
<a class="admonition-anchor-link" href="design/properties.html#admonition-rule-of-thumb"></a>
</div>
<div>
<p>Before the PoA it is the responsibility of a client to ensure the availability of a blob and its
upload to Walrus. After the PoA it is the responsibility of Walrus as a system to maintain the
availability of the blob as part of its operation for the full availability period remaining.
Emission of the event corresponding to the PoA for a blob ID attests its availability.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="future-discussion"><a class="header" href="#future-discussion">Future discussion</a></h1>
<p>In this document, we left out details of the following features:</p>
<ul>
<li><strong>Shard transfer and recovery upon storage epoch change:</strong> The encoding scheme used in Walrus has
been designed to allow for highly efficient recovery in case of shard failures. A storage node
attempting to recover slivers only needs to get data of the same magnitude as the missing data to
reconstruct them.</li>
<li><strong>Details of light clients that can be used to sample availability:</strong> Individual clients may
sample the certified blobs from Sui metadata and sample the availability of some slivers that
they store. On-chain bounties may be used to retrieve these slivers for missing blobs.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="setup"><a class="header" href="#setup">Setup</a></h1>
<p>At this stage of the project, our Walrus code is not yet public. Instead, we provide a pre-compiled
<code>walrus</code> client binary for macOS (Intel and Apple CPUs) and Ubuntu, which supports different usage
patterns (see <a href="usage/./interacting.html">the next chapter</a>). This chapter describes the
<a href="usage/setup.html#prerequisites">prerequisites</a>, <a href="usage/setup.html#installation">installation</a>, and <a href="usage/setup.html#configuration">configuration</a>
of the Walrus client.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites: Sui wallet and Testnet SUI</a></h2>
<div id="admonition-quick-wallet-setup" class="admonition admonish-tip" role="note" aria-labelledby="admonition-quick-wallet-setup-title">
<div class="admonition-title">
<div id="admonition-quick-wallet-setup-title">
<p>Quick wallet setup</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-quick-wallet-setup"></a>
</div>
<div>
<p>If you just want to set up a new Sui wallet for Walrus, you can skip this section and use the
<code>walrus generate-sui-wallet</code> command after <a href="usage/setup.html#installation">installing Walrus</a>. In that case, make
sure to set the <code>wallet_config</code> parameter in the <a href="usage/setup.html#advanced-configuration-optional">Walrus
configuration</a> to the newly generated wallet. Also, make sure to
obtain some Testnet SUI tokens from the <a href="https://faucet.sui.io/?network=testnet">Sui Testnet faucet</a>.</p>
</div>
</div>
<p>Interacting with Walrus requires a valid Sui Testnet wallet with some amount of SUI tokens. The
normal way to set this up is via the Sui CLI; see the <a href="https://docs.sui.io/guides/developer/getting-started/sui-install">installation
instructions</a> in the Sui
documentation.</p>
<p>After installing the Sui CLI, you need to set up a Testnet wallet by running <code>sui client</code>, which
prompts you to set up a new configuration. Make sure to point it to Sui Testnet, you can use the
full node at <code>https://fullnode.testnet.sui.io:443</code> for this. See
<a href="https://docs.sui.io/guides/developer/getting-started/connect">here</a> for further details.</p>
<p>If you already have a Sui wallet configured, you can directly set up the Testnet environment (if you
don't have it yet),</p>
<pre><code class="language-sh">sui client new-env --alias testnet --rpc https://fullnode.testnet.sui.io:443
</code></pre>
<p>and switch the active environment to it:</p>
<pre><code class="language-sh">sui client switch --env testnet
</code></pre>
<p>After this, you should get something like this (everything besides the <code>testnet</code> line is optional):</p>
<pre><code class="language-terminal">$ sui client envs
╭──────────┬─────────────────────────────────────┬────────╮
│ alias    │ url                                 │ active │
├──────────┼─────────────────────────────────────┼────────┤
│ devnet   │ https://fullnode.devnet.sui.io:443  │        │
│ localnet │ http://127.0.0.1:9000               │        │
│ testnet  │ https://fullnode.testnet.sui.io:443 │ *      │
│ mainnet  │ https://fullnode.mainnet.sui.io:443 │        │
╰──────────┴─────────────────────────────────────┴────────╯
</code></pre>
<p>Finally, make sure you have at least one gas coin with at least 1 SUI. You can obtain one from the
<a href="https://faucet.sui.io/?network=testnet">Sui Testnet faucet</a> (you can find your address through the
<code>sui client active-address</code> command).</p>
<p>After some seconds, you should see your new SUI coins:</p>
<pre><code class="language-terminal">$ sui client gas
╭─────────────────┬────────────────────┬──────────────────╮
│ gasCoinId       │ mistBalance (MIST) │ suiBalance (SUI) │
├─────────────────┼────────────────────┼──────────────────┤
│ 0x65dca966dc... │ 1000000000         │ 1.00             │
╰─────────────────┴────────────────────┴──────────────────╯
</code></pre>
<p>The system-wide wallet will be used by Walrus if no other path is specified. If you want to use a
different Sui wallet, you can specify this in the <a href="usage/setup.html#configuration">Walrus configuration file</a> or
when <a href="usage/./interacting.html">running the CLI</a>.</p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>We currently provide the <code>walrus</code> client binary for macOS (Intel and Apple CPUs), Ubuntu, and
Windows:</p>
<div class="table-wrapper"><table><thead><tr><th>OS</th><th>CPU</th><th>Architecture</th></tr></thead><tbody>
<tr><td>Ubuntu</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-testnet-latest-ubuntu-x86_64"><code>ubuntu-x86_64</code></a></td></tr>
<tr><td>Ubuntu</td><td>Intel 64bit (generic)</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-testnet-latest-ubuntu-x86_64-generic"><code>ubuntu-x86_64-generic</code></a></td></tr>
<tr><td>MacOS</td><td>Apple Silicon</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-testnet-latest-macos-arm64"><code>macos-arm64</code></a></td></tr>
<tr><td>MacOS</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-testnet-latest-macos-x86_64"><code>macos-x86_64</code></a></td></tr>
<tr><td>Windows</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-testnet-latest-windows-x86_64.exe"><code>windows-x86_64.exe</code></a></td></tr>
</tbody></table>
</div><div id="admonition-windows" class="admonition admonish-note" role="note" aria-labelledby="admonition-windows-title">
<div class="admonition-title">
<div id="admonition-windows-title">
<p>Windows</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-windows"></a>
</div>
<div>
<p>We now offer a pre-built binary also for Windows. However, most of the remaining instructions assume
a UNIX-based system for the directory structure, commands, etc. If you use Windows, you may need to
adapt most of those.</p>
</div>
</div>
<p>You can download the latest build from our Google Cloud Storage (GCS) bucket (correctly setting the
<code>$SYSTEM</code> variable):</p>
<pre><code class="language-sh">SYSTEM= # set this to your system: ubuntu-x86_64, ubuntu-x86_64-generic, macos-x86_64, macos-arm64, windows-x86_64.exe
curl https://storage.googleapis.com/mysten-walrus-binaries/walrus-testnet-latest-$SYSTEM -o walrus
chmod +x walrus
</code></pre>
<p>On Ubuntu, you should generally use the <code>ubuntu-x86_64</code> version. However, this is incompatible with
old hardware and certain virtualized environments (throwing an "Illegal instruction (core dumped)"
error); in these cases you can use the <code>ubuntu-x86_64-generic</code> version.</p>
<p>To be able to run it simply as <code>walrus</code>, move the binary to any directory included in your <code>$PATH</code>
environment variable. Standard locations are <code>/usr/local/bin/</code>, <code>$HOME/bin/</code>, or
<code>$HOME/.local/bin/</code>.</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-note"></a>
</div>
<div>
<p>Previously, this guide recommended placing the binary in <code>$HOME/.local/bin/</code>. If you install the
latest binary somewhere else, make sure to clean up old versions. You can find the binary in use by
calling <code>which walrus</code> and its version through <code>walrus -V</code>.</p>
</div>
</div>
<p>Once this is done, you should be able to simply type <code>walrus</code> in your terminal. For example you can
get usage instructions (see <a href="usage/./interacting.html">the next chapter</a> for further details):</p>
<pre><code class="language-terminal">$ walrus --help
Walrus client

Usage: walrus [OPTIONS] &lt;COMMAND&gt;

Commands:
⋮
</code></pre>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-tip"></a>
</div>
<div>
<p>Our latest Testnet Walrus binaries are also available on Walrus itself, namely on
<a href="https://bin.walrus.site">https://bin.walrus.site</a>, for example, <a href="https://bin.walrus.site/walrus-testnet-latest-ubuntu-x86_64">https://bin.walrus.site/walrus-testnet-latest-ubuntu-x86_64</a>.
Note that due to DoS protection, it may not be possible to download the binaries with <code>curl</code> or
<code>wget</code>.</p>
</div>
</div>
<h3 id="previous-versions-optional"><a class="header" href="#previous-versions-optional">Previous versions (optional)</a></h3>
<p>In addition to the latest version of the <code>walrus</code> binary, the GCS bucket also contains previous
versions. An overview in XML format is available at
<a href="https://storage.googleapis.com/mysten-walrus-binaries/">https://storage.googleapis.com/mysten-walrus-binaries/</a>.</p>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<p>The Walrus client needs to know about the Sui objects that store the Walrus system and staking
information, see the <a href="usage/../dev-guide/sui-struct.html#system-and-staking-information">developer guide</a>.
These need to be configured in a file <code>~/.config/walrus/client_config.yaml</code>. Additionally, a
<code>subsidies</code> object can be specified, which will subsidize storage bought with the client.
Finally, exchange objects are needed to swap SUI for WAL.</p>
<p>The current Testnet deployment uses the following objects:</p>
<pre><code class="language-yaml">system_object: 0x98ebc47370603fe81d9e15491b2f1443d619d1dab720d586e429ed233e1255c1
staking_object: 0x20266a17b4f1a216727f3eef5772f8d486a9e3b5e319af80a5b75809c035561d
exchange_objects:
  - 0x59ab926eb0d94d0d6d6139f11094ea7861914ad2ecffc7411529c60019133997
  - 0x89127f53890840ab6c52fca96b4a5cf853d7de52318d236807ad733f976eef7b
  - 0x9f9b4f113862e8b1a3591d7955fadd7c52ecc07cf24be9e3492ce56eb8087805
  - 0xb60118f86ecb38ec79e74586f1bb184939640911ee1d63a84138d080632ee28a
subsidies_object: 0x4b23c353c35a4dde72fe862399ebe59423933d3c2c0a3f2733b9f74cb3b4933d
</code></pre>
<!-- markdownlint-disable code-fence-style -->
<div id="admonition-tip-1" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-1-title">
<div class="admonition-title">
<div id="admonition-tip-1-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-tip-1"></a>
</div>
<div>
<p>The easiest way to obtain the latest configuration is by downloading it from GitHub:</p>
<pre><code class="language-sh">curl https://raw.githubusercontent.com/MystenLabs/walrus-docs/refs/heads/main/docs/client_config.yaml \
    -o ~/.config/walrus/client_config.yaml
</code></pre>
</div>
</div>
<!-- markdownlint-enable code-fence-style -->
<h3 id="config-custom-path"><a class="header" href="#config-custom-path">Custom path (optional)</a></h3>
<p>By default, the Walrus client will look for the <code>client_config.yaml</code> (or <code>client_config.yml</code>)
configuration file in the current directory, <code>$XDG_CONFIG_HOME/walrus/</code>, <code>~/.config/walrus/</code>, or
<code>~/.walrus/</code>. However, you can place the file anywhere and name it anything you like; in this case
you need to use the <code>--config</code> option when running the <code>walrus</code> binary.</p>
<h3 id="advanced-configuration-optional"><a class="header" href="#advanced-configuration-optional">Advanced configuration (optional)</a></h3>
<p>The configuration file currently supports the following parameters:</p>
<pre><code class="language-yaml"># These are the only mandatory fields. These objects are specific for a particular Walrus
# deployment but then do not change over time.
system_object: 0x98ebc47370603fe81d9e15491b2f1443d619d1dab720d586e429ed233e1255c1
staking_object: 0x20266a17b4f1a216727f3eef5772f8d486a9e3b5e319af80a5b75809c035561d

# The exchange objects are used to swap SUI for WAL. If multiple ones are defined (as below), a
# random one is chosen for the exchange.
exchange_objects:
  - 0x59ab926eb0d94d0d6d6139f11094ea7861914ad2ecffc7411529c60019133997
  - 0x89127f53890840ab6c52fca96b4a5cf853d7de52318d236807ad733f976eef7b
  - 0x9f9b4f113862e8b1a3591d7955fadd7c52ecc07cf24be9e3492ce56eb8087805
  - 0xb60118f86ecb38ec79e74586f1bb184939640911ee1d63a84138d080632ee28a

# The subsidies object allows the client to use the subsidies contract to purchase storage
# which will reduce the cost of obtaining a storage resource and extending blobs and also
# adds subsidies to the rewards of the staking pools.
subsidies_object: 0x4b23c353c35a4dde72fe862399ebe59423933d3c2c0a3f2733b9f74cb3b4933d

# You can define a custom path to your Sui wallet configuration here. If this is unset or `null`,
# the wallet is configured from `./sui_config.yaml` (relative to your current working directory), or
# the system-wide wallet at `~/.sui/sui_config/client.yaml` in this order.
wallet_config: null

# The following parameters can be used to tune the networking behavior of the client. There is no
# risk in playing around with these values. In the worst case, you may not be able to store/read
# blob due to timeouts or other networking errors.
communication_config:
  max_concurrent_writes: null
  max_concurrent_sliver_reads: null
  max_concurrent_metadata_reads: 3
  max_concurrent_status_reads: null
  max_data_in_flight: null
  reqwest_config:
    total_timeout_millis: 30000
    pool_idle_timeout_millis: null
    http2_keep_alive_timeout_millis: 5000
    http2_keep_alive_interval_millis: 30000
    http2_keep_alive_while_idle: true
  request_rate_config:
    max_node_connections: 10
    backoff_config:
      min_backoff_millis: 1000
      max_backoff_millis: 30000
      max_retries: 5
  disable_proxy: false
  disable_native_certs: true
  sliver_write_extra_time:
    factor: 0.5
    base_millis: 500
  registration_delay_millis: 200
  max_total_blob_size: 1073741824
</code></pre>
<div id="admonition-important" class="admonition admonish-warning" role="note" aria-labelledby="admonition-important-title">
<div class="admonition-title">
<div id="admonition-important-title">
<p>Important</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-important"></a>
</div>
<div>
<p>If you specify a wallet path, make sure your wallet is set up for Sui <strong>Testnet</strong>.</p>
</div>
</div>
<h2 id="testnet-wal-faucet"><a class="header" href="#testnet-wal-faucet">Testnet WAL faucet</a></h2>
<p>The Walrus Testnet uses Testnet WAL tokens to buy storage and stake. Testnet WAL tokens have no
value and can be exchanged (at a 1:1 rate) for some Testnet SUI tokens, which also have no value,
through the following command:</p>
<pre><code class="language-sh">walrus get-wal
</code></pre>
<p>You can check that you have received Testnet WAL by checking the Sui balances:</p>
<pre><code class="language-sh">sui client balance
╭─────────────────────────────────────────╮
│ Balance of coins owned by this address  │
├─────────────────────────────────────────┤
│ ╭─────────────────────────────────────╮ │
│ │ coin  balance (raw)     balance     │ │
│ ├─────────────────────────────────────┤ │
│ │ Sui   8869252670        8.86 SUI    │ │
│ │ WAL   500000000         0.50 WAL    │ │
│ ╰─────────────────────────────────────╯ │
╰─────────────────────────────────────────╯
</code></pre>
<p>By default, 0.5 SUI are exchanged for 0.5 WAL, but a different amount of SUI may be exchanged using
the <code>--amount</code> option (the value is in MIST/FROST), and a specific SUI/WAL exchange object may be
used through the <code>--exchange-id</code> option. The <code>walrus get-wal --help</code> command provides more
information about those.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="interacting-with-walrus"><a class="header" href="#interacting-with-walrus">Interacting with Walrus</a></h1>
<p>We provide 3 ways to interact directly with the Walrus storage system:</p>
<ul>
<li>Through the Walrus <a href="usage/./client-cli.html">client command line interface (CLI)</a>.</li>
<li>Through a <a href="usage/./json-api.html">JSON API</a> of the Walrus CLI.</li>
<li>Through an <a href="usage/./web-api.html">HTTP API</a> exposed by a public or local Walrus client daemon.</li>
</ul>
<p>Furthermore, users can <a href="usage/./stake.html">stake and unstake</a> through the staking dApp or Sui smart
contracts.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="using-the-walrus-client"><a class="header" href="#using-the-walrus-client">Using the Walrus client</a></h1>
<p>The <code>walrus</code> binary can be used to interact with Walrus as a client. See the <a href="usage/./setup.html">setup
chapter</a> for prerequisites, installation, and configuration.</p>
<p>Detailed usage information is available through</p>
<pre><code class="language-sh">walrus --help
</code></pre>
<p>Each sub-command of <code>walrus</code> can also be called with <code>--help</code> to print its specific arguments and
their meaning.</p>
<h2 id="walrus-system-information"><a class="header" href="#walrus-system-information">Walrus system information</a></h2>
<p>Information about the Walrus system is available through the <code>walrus info</code> command. It provides an
overview of current system parameters such as the current epoch, the number of storage nodes and
shards in the system, the maximum blob size, and the current cost in (Testnet) WAL for storing
blobs:</p>
<pre><code class="language-console">$ walrus info

Walrus system information

Epochs and storage duration
Current epoch: 6
Epoch duration: 2days
Blobs can be stored for at most 183 epochs in the future.

Storage nodes
Number of storage nodes: 58
Number of shards: 1000

Blob size
Maximum blob size: 13.3 GiB (14,273,391,930 B)
Storage unit: 1.00 MiB

Approximate storage prices per epoch
(Conversion rate: 1 WAL = 1,000,000,000 FROST)
Price per encoded storage unit: 100 FROST
Additional price for each write: 2,000 FROST
Price to store metadata: 6,200 FROST
Marginal price per additional 1 MiB (w/o metadata): 500 FROST

Total price for example blob sizes
16.0 MiB unencoded (135 MiB encoded): 13,500 FROST per epoch
512 MiB unencoded (2.33 GiB encoded): 0.0002 WAL per epoch
13.3 GiB unencoded (60.5 GiB encoded): 0.0062 WAL per epoch
</code></pre>
<div id="admonition-frost-and-wal" class="admonition admonish-tip" role="note" aria-labelledby="admonition-frost-and-wal-title">
<div class="admonition-title">
<div id="admonition-frost-and-wal-title">
<p>FROST and WAL</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-frost-and-wal"></a>
</div>
<div>
<p>FROST is the smaller unit of WAL, similar to MIST for SUI. The conversion is also the same as for
SUI: <code>1 WAL = 1 000 000 000 FROST</code>.</p>
</div>
</div>
<p>Additional information such as encoding parameters and sizes, BFT system information, and
information on the storage nodes in the current and (if already selected) the next committee,
including their node IDs and stake and shard distribution can be viewed with various subcommands,
see <code>walrus info --help</code> for details. Note that the previous <code>--dev</code> option has been replaced by the
<code>all</code> subcommand.</p>
<p>The health of storage nodes can be checked with the <code>walrus health</code> command. This command takes
different options to select the nodes to check (see <code>walrus health --help</code> for details). For
example, <code>walrus health --committee</code> checks the status of all current committee members.</p>
<h2 id="storing-blobs"><a class="header" href="#storing-blobs">Storing blobs</a></h2>
<div id="admonition-public-access" class="admonition admonish-danger" role="note" aria-labelledby="admonition-public-access-title">
<div class="admonition-title">
<div id="admonition-public-access-title">
<p>Public access</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-public-access"></a>
</div>
<div>
<p><strong>All blobs stored in Walrus are public and discoverable by all.</strong> Therefore you must not use Walrus
to store anything that contains secrets or private data without additional measures to protect
confidentiality.</p>
</div>
</div>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-warning"></a>
</div>
<div>
<p>It must be ensured that only a single process uses the Sui wallet for write actions (storing or
deleting). When using multiple instances of the client simultaneously, each of them must be pointed
to a different wallet. Note, it is possible to store multiple blobs with a single <code>walrus store</code>
command.</p>
</div>
</div>
<div id="admonition-obtaining-testnet-wal" class="admonition admonish-tip" role="note" aria-labelledby="admonition-obtaining-testnet-wal-title">
<div class="admonition-title">
<div id="admonition-obtaining-testnet-wal-title">
<p>Obtaining Testnet WAL</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-obtaining-testnet-wal"></a>
</div>
<div>
<p>You can exchange Testnet SUI for Testnet WAL by running <code>walrus get-wal</code>. See the <a href="usage/./setup.html#testnet-wal-faucet">setup
page</a> for further details.</p>
</div>
</div>
<p>Storing one or multiple blobs on Walrus can be achieved through the following command:</p>
<pre><code class="language-sh">walrus store &lt;FILES&gt; --epochs &lt;EPOCHS&gt;
</code></pre>
<p>The mandatory CLI argument <code>--epochs &lt;EPOCHS&gt;</code> indicates the number of epochs the blob should be
stored for. There is an upper limit on the number of epochs a blob can be stored for, which is 183
for the current Testnet deployment (corresponding to one year). In addition to a positive integer,
you can also use <code>--epochs max</code> to store the blob for the maximum number of epochs.</p>
<p>You can store a single file or multiple files, separated by spaces. Notably, this is compatible
with glob patterns; for example, <code>walrus store *.png --epochs &lt;EPOCHS&gt;</code> will store all PNG files
in the current directory.</p>
<p>By default, the command will store the blob as a <em>permanent</em> blob. See the <a href="usage/client-cli.html#reclaiming-space-via-deletable-blobs">section on deletable
blobs</a> for more details on deletable blobs. Also, by default
an owned <code>Blob</code> object is created. It is possible to wrap this into a shared object, which can be
funded and extended by anyone, see the <a href="usage/client-cli.html#shared-blobs">shared blobs section</a>.</p>
<p>When storing a blob, the client performs a number of automatic optimizations, including the
following:</p>
<ul>
<li>If the blob is already stored as a <em>permanent blob</em> on Walrus for a sufficient number of epochs
the command does not store it again. This behavior can be overwritten with the <code>--force</code>
CLI option, which stores the blob again and creates a fresh blob object on Sui belonging to the
wallet address.</li>
<li>If the user's wallet has a storage resource of suitable size and duration, it is (re-)used instead
of buying a new one.</li>
<li>If the blob is already certified on Walrus but as a <em>deletable</em> blob or not for a sufficient
number of epochs, the command skips sending encoded blob data to the storage nodes and just
collects the availability certificate</li>
</ul>
<h2 id="querying-blob-status"><a class="header" href="#querying-blob-status">Querying blob status</a></h2>
<p>The status of a blob can be queried through one of the following commands:</p>
<pre><code class="language-sh">walrus blob-status --blob-id &lt;BLOB_ID&gt;
walrus blob-status --file &lt;FILE&gt;
</code></pre>
<p>This returns whether the blob is stored and its availability period. If you specify a file with the
<code>--file</code> option,the CLI re-encodes the content of the file and derives the blob ID before checking
the status.</p>
<p>When the blob is available, the <code>blob-status</code> command also returns the <code>BlobCertified</code> Sui event ID,
which consists of a transaction ID and a sequence number in the events emitted by the transaction.
The existence of this event certifies the availability of the blob.</p>
<h2 id="reading-blobs"><a class="header" href="#reading-blobs">Reading blobs</a></h2>
<p>Reading blobs from Walrus can be achieved through the following command:</p>
<pre><code class="language-sh">walrus read &lt;some blob ID&gt;
</code></pre>
<p>By default the blob data is written to the standard output. The <code>--out &lt;OUT&gt;</code> CLI option
can be used to specify an output file name. The <code>--rpc-url &lt;URL&gt;</code> may be used to specify
a Sui RPC node to use instead of the one set in the wallet configuration or the default one.</p>
<h2 id="reclaiming-space-via-deletable-blobs"><a class="header" href="#reclaiming-space-via-deletable-blobs">Reclaiming space via deletable blobs</a></h2>
<p>By default <code>walrus store</code> uploads a permanent blob available until after its expiry
epoch. Not even the uploader may delete it beforehand. However, optionally, the store command
may be invoked with the <code>--deletable</code> flag, to indicate the blob may be deleted before its expiry
by the owner of the Sui blob object representing the blob. Deletable blobs are indicated as such
in the Sui events that certify them, and should not be relied upon for availability by others.</p>
<p>A deletable blob may be deleted with the command:</p>
<pre><code class="language-sh">walrus delete --blob-id &lt;BLOB_ID&gt;
</code></pre>
<p>Optionally the delete command can be invoked by specifying a <code>--file &lt;PATH&gt;</code> option, to derive the
blob ID from a file, or <code>--object-id &lt;SUI_ID&gt;</code> to delete the blob in the Sui blob object specified.</p>
<p>Before deleting a blob, the <code>walrus delete</code> command will ask for confirmation unless the <code>--yes</code>
option is specified.</p>
<p>The <code>delete</code> command reclaims the storage object associated with the deleted blob, which is re-used
to store new blobs. The delete operation provides flexibility around managing storage costs and
re-using storage.</p>
<p>The delete operation has limited utility for privacy: It only deletes slivers from the current epoch
storage nodes, and subsequent epoch storage nodes, if no other user has uploaded a copy of the same
blob. If another copy of the same blob exists in Walrus, the delete operation will not make the blob
unavailable for download, and <code>walrus read</code> invocations will download it. After the deletion is
finished, the CLI checks the updated status of the blob to see if it is still accessible in Walrus
(unless the <code>--no-status-check</code> option is specified). However, even if it isn't, copies of the
public blob may be cached or downloaded by users, and these copies are not deleted.</p>
<div id="admonition-delete-reclaims-space-only" class="admonition admonish-danger" role="note" aria-labelledby="admonition-delete-reclaims-space-only-title">
<div class="admonition-title">
<div id="admonition-delete-reclaims-space-only-title">
<p>Delete reclaims space only</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-delete-reclaims-space-only"></a>
</div>
<div>
<p><strong>All blobs stored in Walrus are public and discoverable by all.</strong> The <code>delete</code> command will
not delete slivers if other copies of the blob are stored on Walrus possibly by other users.
It does not delete blobs from caches, slivers from past storage nodes, or copies
that could have been made by users before the blob was deleted.</p>
</div>
</div>
<h2 id="shared-blobs"><a class="header" href="#shared-blobs">Shared blobs</a></h2>
<p><em>Shared blobs</em> are shared Sui objects wrapping "standard" <code>Blob</code> objects that can be funded and
whose lifetime can be extended by anyone. See the <a href="https://github.com/MystenLabs/walrus-docs/blob/main/contracts/walrus/sources/system/shared_blob.move">shared blobs
contracts</a>
for further details.</p>
<p>You can create a shared blob from an existing <code>Blob</code> object you own with the <code>walrus share</code> command:</p>
<pre><code class="language-sh">walrus share --blob-obj-id &lt;BLOB_OBJ_ID&gt;
</code></pre>
<p>The resulting shared blob can be directly funded by adding an <code>--amount</code>, or you can fund an
existing shared blob with the <code>walrus fund-shared-blob</code> command. Additionally, you can immediately
share a newly created blob by adding the <code>--share</code> option to the <code>walrus store</code> command.</p>
<p>You can use the <code>walrus extend</code> command to extend the lifetime of a shared blob object. Shared blobs
can only contain permanent blobs and cannot be deleted before their expiry.</p>
<h2 id="blob-id-utilities"><a class="header" href="#blob-id-utilities">Blob ID utilities</a></h2>
<p>The <code>walrus blob-id &lt;FILE&gt;</code> may be used to derive the blob ID of any file. The blob ID is a
commitment to the file, and any blob with the same ID will decode to the same content. The blob
ID is a 256 bit number and represented on some Sui explorer as a decimal large number. The
command <code>walrus convert-blob-id &lt;BLOB_ID_DECIMAL&gt;</code> may be used to convert it to a base64 URL safe
encoding used by the command line tools and other APIs.</p>
<p>The <code>walrus list-blobs</code> command lists all the non expired Sui blob object that the current account
owns, including their blob ID, object ID, and metadata about expiry and deletable status.
The option <code>--include-expired</code> also lists expired blob objects.</p>
<h2 id="changing-the-default-configuration"><a class="header" href="#changing-the-default-configuration">Changing the default configuration</a></h2>
<p>Use the <code>--config</code> option to specify a custom path to the
<a href="usage/../usage/setup.html#configuration">configuration location</a>.</p>
<p>The <code>--wallet &lt;WALLET&gt;</code> argument may be used to specify a non-standard Sui wallet configuration
file. And a <code>--gas-budget &lt;GAS_BUDGET&gt;</code> argument may be used to change the maximum amount of Sui (in
MIST) that the command is allowed to use.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="json-mode"><a class="header" href="#json-mode">JSON mode</a></h1>
<p>All Walrus client commands are also available in JSON mode. In this mode, all the command-line flags
of the original CLI command can be specified in JSON format. The JSON mode therefore simplifies
programmatic access to the CLI.</p>
<p>For example, to store a blob, run:</p>
<pre><code class="language-sh">walrus json \
    '{
        "config": "path/to/client_config.yaml",
        "command": {
            "store": {
                "files": ["README.md", "LICENSE"],
                "epochs": 100
            }
        }
    }'
</code></pre>
<p>Or, to read a blob knowing the blob ID:</p>
<pre><code class="language-sh">walrus json \
    '{
        "config": "path/to/client_config.yaml",
        "command": {
            "read": {
                "blobId": "4BKcDC0Ih5RJ8R0tFMz3MZVNZV8b2goT6_JiEEwNHQo"
            }
        }
    }'
</code></pre>
<p>All options, default values, and commands are equal to those of the "standard" CLI mode, except that
they are written in "camelCase" instead of "kebab-case".</p>
<p>The <code>json</code> command also accepts input from <code>stdin</code>.</p>
<p>The output of a <code>json</code> command will itself be JSON-formatted, again to simplify parsing the results
in a programmatic way. For example, the JSON output can be piped to the <code>jq</code> command for parsing and
manually extracting relevant fields.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="client-daemon-mode--http-api"><a class="header" href="#client-daemon-mode--http-api">Client Daemon mode &amp; HTTP API</a></h1>
<p>In addition to the CLI and JSON modes, the Walrus client offers a <em>daemon mode</em>. In this mode, it
runs a simple web server offering HTTP interfaces to store and read blobs in an <em>aggregator</em> and
<em>publisher</em> role respectively. We also offer
<a href="usage/web-api.html#public-services">public aggregator and publisher services</a> to try the Walrus HTTP APIs without
the need to run a local client.</p>
<h2 id="local-daemon"><a class="header" href="#local-daemon">Starting the daemon locally</a></h2>
<p>You can run a local Walrus daemon through the <code>walrus</code> binary. There are three different commands:</p>
<ul>
<li><code>walrus aggregator</code> starts an "aggregator" that offers an HTTP interface to read blobs from
Walrus.</li>
<li><code>walrus publisher</code> starts a "publisher" that offers an HTTP interface to store blobs in Walrus.</li>
<li><code>walrus daemon</code> offers the combined functionality of an aggregator and publisher on the same
address and port.</li>
</ul>
<p>The aggregator does not perform any on-chain actions, and only requires specifying the address on
which it listens:</p>
<pre><code class="language-sh">walrus aggregator --bind-address "127.0.0.1:31415"
</code></pre>
<p>The publisher and daemon perform on-chain actions and thus require a Sui Testnet wallet with
sufficient SUI and WAL balances. To enable handling many parallel requests without object
conflicts, they create internal sub-wallets since version 1.4.0, which are funded from the main
wallet. These sub-wallets are persisted in a directory specified with the <code>--sub-wallets-dir</code>
argument; any existing directory can be used. If it already contains sub-wallets, they will be
reused.</p>
<p>By default, 8 sub-wallets are created and funded. This can be changed with the <code>--n-clients</code>
argument. For simple local testing, 1 or 2 sub-wallets are usually sufficient.</p>
<p>For example, you can run a publisher with a single sub-wallet stored in the Walrus configuration
directory with the following command:</p>
<pre><code class="language-sh">PUBLISHER_WALLETS_DIR=~/.config/walrus/publisher-wallets
mkdir -p "$PUBLISHER_WALLETS_DIR"
walrus publisher \
  --bind-address "127.0.0.1:31416" \
  --sub-wallets-dir "$PUBLISHER_WALLETS_DIR" \
  --n-clients 1
</code></pre>
<p>Replace <code>publisher</code> by <code>daemon</code> to run both an aggregator and publisher on the same address and
port.</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-warning"></a>
</div>
<div>
<p>While the aggregator does not perform Sui on-chain actions, and therefore consumes no gas, the
publisher does perform actions on-chain and will consume both SUI and WAL tokens. It is therefore
important to ensure only authorized parties may access it, or other measures to manage gas costs,
especially in a future Mainnet deployment.</p>
</div>
</div>
<h3 id="notes-on-publisher-operation"><a class="header" href="#notes-on-publisher-operation">Notes on publisher operation</a></h3>
<p>We list here a few important details on how the publisher deals with funds and objects on Sui.</p>
<h4 id="number-of-sub-wallets"><a class="header" href="#number-of-sub-wallets">Number of sub-wallets</a></h4>
<p>As mentioned above, the publisher uses sub-wallets to allow storing blobs in parallel. By default,
the publisher uses 8 sub-wallets, meaning it can store 8 blobs at the same time.</p>
<h4 id="funds-in-sub-wallets"><a class="header" href="#funds-in-sub-wallets">Funds in sub-wallets</a></h4>
<p>Each of the sub-wallets requires funds to interact with the chain and purchase storage. For this
reason, a background process checks periodically if the sub-wallets have enough funds. In steady
state, each of the sub-wallets will have a balance of 0.5-1.0 SUI and WAL. The amount and triggers
for coin refills can be configured through CLI arguments.</p>
<h4 id="lifecycle-of-created-blob-objects"><a class="header" href="#lifecycle-of-created-blob-objects">Lifecycle of created <code>Blob</code> objects</a></h4>
<p>Each store operation in Walrus creates a <code>Blob</code> object on Sui. This blob object represents the
(partial) ownership over the associated data, and allows certain data management operations (e.g.,
in the case of deletable blobs).</p>
<p>When the publisher stores a blob on behalf of a client, the <code>Blob</code> object is initially owned by the
sub-wallet that stored the blob. Then, the following cases are possible, depending on the
configuration:</p>
<ul>
<li>If the client requests to store a blob and specifies the <code>send_object_to</code> query parameter (see
<a href="usage/web-api.html#store">the relevant section</a> for examples), then the <code>Blob</code> object is transferred to the
specified address. This is a way for clients to get back the created object for their data.</li>
<li>If the <code>send_object_to</code> query parameter is not specified, two cases are possible:
<ul>
<li>If the publisher was run with the <code>--keep</code> flag, then the sub-wallet transfers the
newly-created blob object to the main wallet, such that all these objects are kept there.</li>
<li>If the <code>--keep</code> flag was omitted, then the sub-wallet <em>immediately burns</em> the <code>Blob</code> object.
Since no one has requested the object, and the availability of the data on Walrus is independent
of the existence of such object, it is safe to do so. This is to avoid cluttering the sub-wallet
with many blob objects.</li>
</ul>
</li>
</ul>
<h2 id="public-services"><a class="header" href="#public-services">Using a public aggregator or publisher</a></h2>
<p>For some use cases (e.g., a public website), or to just try out the HTTP API, a publicly accessible
aggregator and/or publisher is required. Several entities run such aggregators and publishers, see
the lists of public <a href="usage/web-api.html#public-aggregators">aggregators</a> and <a href="usage/web-api.html#public-publishers">publishers</a> below.</p>
<p>Public publishers limit requests to 10 MiB by default. If you want to upload larger files, you need
to <a href="usage/web-api.html#local-daemon">run your own publisher</a> or use the <a href="usage/./client-cli.html">CLI</a>.</p>
<p>Also, note that the publisher consumes (Testnet) SUI and WAL on the service side, and a Mainnet
deployment would likely not be able to provide uncontrolled public access to publishing without
requiring some authentication and compensation for the funds used.</p>
<h3 id="public-aggregators"><a class="header" href="#public-aggregators">Public aggregators</a></h3>
<p>The following is a list of know public aggregators; they are checked periodically, but each of them
may still be temporarily unavailable:</p>
<ul>
<li><code>https://aggregator.walrus-testnet.walrus.space</code></li>
<li><code>https://wal-aggregator-testnet.staketab.org</code></li>
<li><code>https://walrus-testnet-aggregator.redundex.com</code></li>
<li><code>https://walrus-testnet.blockscope.net</code></li>
<li><code>https://walrus-testnet-aggregator.nodes.guru</code></li>
<li><code>https://walrus-cache-testnet.overclock.run</code></li>
<li><code>https://walrus-testnet-aggregator.stakin-nodes.com</code></li>
<li><code>https://testnet-aggregator-walrus.kiliglab.io</code></li>
<li><code>https://walrus-cache-testnet.latitude-sui.com</code></li>
<li><code>https://walrus-testnet-aggregator.nodeinfra.com</code></li>
<li><code>https://walrus-testnet-aggregator.stakingdefenseleague.com</code></li>
<li><code>https://walrus-aggregator.rubynodes.io</code></li>
<li><code>https://walrus-testnet-aggregator.brightlystake.com</code></li>
<li><code>https://walrus-testnet-aggregator.nami.cloud</code></li>
<li><code>https://aggregator.testnet.walrus.mirai.cloud</code></li>
<li><code>https://walrus-testnet-aggregator.stakecraft.com</code></li>
<li><code>https://agg.test.walrus.eosusa.io</code></li>
<li><code>https://walrus-agg.testnet.obelisk.sh</code></li>
<li><code>https://walrus-test-aggregator.thepassivetrust.com</code></li>
<li><code>https://walrus-testnet-aggregator.natsai.xyz</code></li>
<li><code>https://walrus.testnet.aggregator.stakepool.dev.br</code></li>
<li><code>https://aggregator.walrus.banansen.dev</code></li>
<li><code>https://testnet.aggregator.walrus.silentvalidator.com</code></li>
<li><code>https://testnet-aggregator.walrus.graphyte.dev</code></li>
<li><code>https://walrus-testnet-aggregator.imperator.co</code></li>
<li><code>https://walrus-testnet-aggregator.unemployedstake.co.uk</code></li>
<li><code>https://aggregator.walrus-01.tududes.com</code></li>
<li><code>https://walrus-aggregator-testnet.n1stake.com</code></li>
<li><code>https://suiftly-testnet-agg.mhax.io</code></li>
<li><code>https://walrus-testnet-aggregator.trusted-point.com</code></li>
<li><code>https://walrus-testnet-aggregator.veera.com</code></li>
<li><code>https://aggregator.testnet.walrus.atalma.io</code></li>
<li><code>https://153-gb3-val-walrus-aggregator.stakesquid.com</code></li>
<li><code>https://sui-walrus-testnet.bwarelabs.com/aggregator</code></li>
<li><code>https://walrus-testnet.chainbase.online/aggregator</code></li>
<li><code>https://walrus-tn.juicystake.io:9443</code></li>
<li><code>https://walrus-agg-testnet.chainode.tech:9002</code></li>
<li><code>https://walrus-testnet-aggregator.starduststaking.com</code></li>
<li><code>https://walrus-aggregator-testnet.cetus.zone</code></li>
<li><code>https://walrus-testnet-aggregator.everstake.one</code></li>
<li><code>http://walrus.testnet.pops.one:9000</code></li>
<li><code>http://scarlet-brussels-376c2.walrus.bdnodes.net:9000</code></li>
<li><code>http://aggregator.testnet.sui.rpcpool.com:9000</code></li>
<li><code>http://walrus.krates.ai:9000</code></li>
<li><code>http://walrus.globalstake.io:9000</code></li>
<li><code>http://walrus-testnet.staking4all.org:9000</code></li>
<li><code>http://walrus-testnet.rpc101.org:9000</code></li>
<li><code>http://93.115.27.108:9000</code></li>
<li><code>http://65.21.139.112:9000</code></li>
<li><code>http://162.19.18.19:9000</code></li>
<li><code>http://walrus-aggregator.stakeme.pro:9000</code></li>
<li><code>http://walrus-storage.testnet.nelrann.org:9000</code></li>
<li><code>http://walrus-testnet.senseinode.com:9000</code></li>
<li><code>http://walrus-testnet.equinoxdao.xyz:9000</code></li>
<li><code>https://walrus-testnet-aggregator.stakely.io</code></li>
<li><code>https://walrus-testnet-aggregator.talentum.id</code></li>
<li><code>http://37.27.230.228:9000</code></li>
<li><code>https://walrus-testnet-aggregator.luckyresearch.org/</code></li>
<li><code>http://walrus-testnet.suicore.com:9000</code></li>
<li><code>https://walrus-testnet.validators.services.kyve.network/aggregate</code></li>
<li><code>https://walrus-aggregator-testnet.suisec.tech</code></li>
<li><code>https://walrus-testnet-aggregator.dzdaic.com</code></li>
</ul>
<h3 id="public-publishers"><a class="header" href="#public-publishers">Public publishers</a></h3>
<ul>
<li><code>https://publisher.walrus-testnet.walrus.space</code></li>
<li><code>https://wal-publisher-testnet.staketab.org</code></li>
<li><code>https://walrus-testnet-publisher.redundex.com</code></li>
<li><code>https://walrus-testnet-publisher.nodes.guru</code></li>
<li><code>https://walrus-testnet-publisher.stakin-nodes.com</code></li>
<li><code>https://testnet-publisher-walrus.kiliglab.io</code></li>
<li><code>https://walrus-testnet-publisher.nodeinfra.com</code></li>
<li><code>https://walrus-publisher.rubynodes.io</code></li>
<li><code>https://walrus-testnet-publisher.brightlystake.com</code></li>
<li><code>https://walrus-testnet-publisher.nami.cloud</code></li>
<li><code>https://publisher.testnet.walrus.mirai.cloud</code></li>
<li><code>https://walrus-testnet-publisher.stakecraft.com</code></li>
<li><code>https://pub.test.walrus.eosusa.io</code></li>
<li><code>https://walrus-pub.testnet.obelisk.sh</code></li>
<li><code>https://walrus-testnet-publisher.stakingdefenseleague.com</code></li>
<li><code>https://walrus-testnet.thepassivetrust.com</code></li>
<li><code>https://walrus-testnet-publisher.natsai.xyz</code></li>
<li><code>https://walrus.testnet.publisher.stakepool.dev.br</code></li>
<li><code>https://publisher.walrus.banansen.dev</code></li>
<li><code>https://testnet.publisher.walrus.silentvalidator.com</code></li>
<li><code>https://testnet-publisher.walrus.graphyte.dev</code></li>
<li><code>https://walrus-testnet-publisher.imperator.co</code></li>
<li><code>https://walrus-testnet-publisher.unemployedstake.co.uk</code></li>
<li><code>https://publisher.walrus-01.tududes.com</code></li>
<li><code>https://walrus-publisher-testnet.n1stake.com</code></li>
<li><code>https://suiftly-testnet-pub.mhax.io</code></li>
<li><code>https://walrus-testnet-publisher.trusted-point.com</code></li>
<li><code>https://walrus-testnet-publisher.veera.com</code></li>
<li><code>https://publisher.testnet.walrus.atalma.io</code></li>
<li><code>https://153-gb3-val-walrus-publisher.stakesquid.com</code></li>
<li><code>https://sui-walrus-testnet.bwarelabs.com/publisher</code></li>
<li><code>https://walrus-testnet.chainbase.online/publisher</code></li>
<li><code>https://walrus-testnet.blockscope.net:11444</code></li>
<li><code>https://walrus-publish-testnet.chainode.tech:9003</code></li>
<li><code>https://walrus-testnet-publisher.starduststaking.com</code></li>
<li><code>http://walrus-publisher-testnet.overclock.run:9001</code></li>
<li><code>https://walrus-testnet-publisher.everstake.one</code></li>
<li><code>http://walrus.testnet.pops.one:9001</code></li>
<li><code>http://ivory-dakar-e5812.walrus.bdnodes.net:9001</code></li>
<li><code>http://publisher.testnet.sui.rpcpool.com:9001</code></li>
<li><code>http://walrus.krates.ai:9001</code></li>
<li><code>http://walrus-publisher-testnet.latitude-sui.com:9001</code></li>
<li><code>http://walrus-tn.juicystake.io:9090</code></li>
<li><code>http://walrus.globalstake.io:9001</code></li>
<li><code>http://walrus-testnet.staking4all.org:9001</code></li>
<li><code>http://walrus-testnet.rpc101.org:9001</code></li>
<li><code>http://walrus-publisher-testnet.cetus.zone:9001</code></li>
<li><code>http://93.115.27.108:9001</code></li>
<li><code>http://65.21.139.112:9001</code></li>
<li><code>http://162.19.18.19:9001</code></li>
<li><code>http://walrus-publisher.stakeme.pro:9001</code></li>
<li><code>http://walrus-storage.testnet.nelrann.org:9001</code></li>
<li><code>http://walrus-testnet.senseinode.com:9001</code></li>
<li><code>http://walrus-testnet.equinoxdao.xyz:9001</code></li>
<li><code>https://walrus-testnet-publisher.stakely.io</code></li>
<li><code>https://walrus-testnet-publisher.talentum.id</code></li>
<li><code>http://37.27.230.228:9001</code></li>
<li><code>https://walrus-testnet-published.luckyresearch.org</code></li>
<li><code>http://walrus-testnet.suicore.com:9001</code></li>
<li><code>https://walrus-testnet.validators.services.kyve.network/publish</code></li>
<li><code>http://walrus-publisher-testnet.suisec.tech:9001</code></li>
<li><code>https://walrus-testnet-publisher.dzdaic.com</code></li>
</ul>
<h2 id="http-api-usage"><a class="header" href="#http-api-usage">HTTP API Usage</a></h2>
<p>For the following examples, we assume you set the <code>AGGREGATOR</code> and <code>PUBLISHER</code> environment variables
to your desired aggregator and publisher, respectively. For example:</p>
<pre><code class="language-sh">AGGREGATOR=https://aggregator.walrus-testnet.walrus.space
PUBLISHER=https://publisher.walrus-testnet.walrus.space
</code></pre>
<div id="admonition-api-specification" class="admonition admonish-tip" role="note" aria-labelledby="admonition-api-specification-title">
<div class="admonition-title">
<div id="admonition-api-specification-title">
<p>API specification</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-api-specification"></a>
</div>
<div>
<p>Walrus aggregators and publishers expose their API specifications at the path <code>/v1/api</code>. You can
view this in the browser, for example, at <a href="https://aggregator.walrus-testnet.walrus.space/v1/api">https://aggregator.walrus-testnet.walrus.space/v1/api</a>.</p>
</div>
</div>
<h3 id="store"><a class="header" href="#store">Store</a></h3>
<p>You can interact with the daemon through simple HTTP PUT requests. For example, with
<a href="https://curl.se">cURL</a>, you can store blobs using a publisher or daemon as follows:</p>
<pre><code class="language-sh">curl -X PUT "$PUBLISHER/v1/blobs" -d "some string" # store the string `some string` for 1 storage epoch
curl -X PUT "$PUBLISHER/v1/blobs?epochs=5" --upload-file "some/file" # store file `some/file` for 5 storage epochs
curl -X PUT "$PUBLISHER/v1/blobs?send_object_to=$ADDRESS" --upload-file "some/file" # store file `some/file` and send the blob object to $ADDRESS
curl -X PUT "$PUBLISHER/v1/blobs?deletable=true" --upload-file "some/file" # store file `some/file` as a deletable blob, instead of a permanent one
</code></pre>
<p>The store HTTP API end points return information about the blob stored in JSON format. When a blob
is stored for the first time, a <code>newlyCreated</code> field contains information about the
new blob:</p>
<pre><code class="language-sh">$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"
{
  "newlyCreated": {
    "blobObject": {
      "id": "0xd765d11848cbac5b1f6eec2fbeb343d4558cbe8a484a00587f9ef5385d64d235",
      "registeredEpoch": 0,
      "blobId": "Cmh2LQEGJwBYfmIC8duzK8FUE2UipCCrshAYjiUheZM",
      "size": 17,
      "encodingType": "RedStuff",
      "certifiedEpoch": 0,
      "storage": {
        "id": "0x28cc75b33e31b3e672646eacf1a7c7a2e5d638644651beddf7ed4c7e21e9cb8e",
        "startEpoch": 0,
        "endEpoch": 1,
        "storageSize": 4747680
      },
      "deletable": false
    },
    "resourceOperation": {
      "registerFromScratch": {
        "encodedLength": 4747680,
        "epochsAhead": 1
      }
    },
    "cost": 231850
  }
}
</code></pre>
<p>The information returned is the content of the <a href="usage/../dev-guide/sui-struct.html">Sui blob object</a>.</p>
<p>When the aggregator finds a certified blob with the same blob ID and a sufficient validity period,
it returns a <code>alreadyCertified</code> JSON structure:</p>
<pre><code class="language-sh">$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"
{
  "alreadyCertified": {
    "blobId": "Cmh2LQEGJwBYfmIC8duzK8FUE2UipCCrshAYjiUheZM",
    "event": {
      "txDigest": "CLE41JTPR2CgZRC1gyKK6P3xpQRHCetQMsmtEgqGjwst",
      "eventSeq": "0"
    },
    "endEpoch": 1
  }
}
</code></pre>
<p>The field <code>event</code> returns the <a href="usage/../dev-guide/sui-struct.html">Sui event ID</a> that can be used to
find the transaction that created the Sui Blob object on the Sui explorer or using a Sui SDK.</p>
<h3 id="read"><a class="header" href="#read">Read</a></h3>
<p>Blobs may be read from an aggregator or daemon using HTTP GET. For example, the following cURL
command reads a blob and writes it to an output file:</p>
<pre><code class="language-sh">curl "$AGGREGATOR/v1/blobs/&lt;some blob ID&gt;" -o &lt;some file name&gt;
</code></pre>
<p>Alternatively you may print the contents of a blob in the terminal with the cURL command:</p>
<pre><code class="language-sh">curl "$AGGREGATOR/v1/blobs/&lt;some blob ID&gt;"
</code></pre>
<div id="admonition-content-sniffing" class="admonition admonish-tip" role="note" aria-labelledby="admonition-content-sniffing-title">
<div class="admonition-title">
<div id="admonition-content-sniffing-title">
<p>Content sniffing</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-content-sniffing"></a>
</div>
<div>
<p>Modern browsers will attempt to sniff the content type for such resources, and will generally do a
good job of inferring content types for media. However, the aggregator on purpose prevents such
sniffing from inferring dangerous executable types such as JavaScript or style sheet types.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="software-development-kits-sdks-and-other-tools"><a class="header" href="#software-development-kits-sdks-and-other-tools">Software development kits (SDKs) and other tools</a></h1>
<p>The Walrus core team is actively working on a Rust SDK and a TypeScript SDK for Walrus. These will
cover interactions with storage nodes directly and be released around the time of the Mainnet
launch.</p>
<p>Besides these upcoming official SDKs, there also exist unofficial third-party SDKs for interacting
with the <a href="usage/./web-api.html#http-api-usage">HTTP API</a> exposed by Walrus aggregators and publishers:</p>
<ul>
<li><a href="https://github.com/namihq/walrus-go">Walrus Go SDK</a> (maintained by the <em>Nami Cloud</em> team)</li>
<li><a href="https://github.com/suicore/walrus-sdk-php">Walrus PHP SDK</a> (maintained by the <em>Suicore</em> team)</li>
</ul>
<p>Finally, there is <a href="https://docs.tusky.io/about/about-tusky">Tusky</a>, a complete data storage platform
built on Walrus, including encryption, HTTP APIs, sharing capabilities, and more.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="developer-guide"><a class="header" href="#developer-guide">Developer guide</a></h1>
<p>This guide introduces all the concepts needed to build applications that use Walrus as a storage
or availability layer. The <a href="dev-guide/../design/overview.html">overview</a> provides more background and explains
in more detail how Walrus operates internally.</p>
<p>This developer guide describes the following:</p>
<ul>
<li><a href="dev-guide/components.html">Components</a> of Walrus of interest to developers that wish to use it for
storage or availability.</li>
<li><a href="dev-guide/dev-operations.html">Operations</a> supported through client binaries, APIs, or Sui operations.</li>
<li><a href="dev-guide/sui-struct.html">The Sui structures</a> Walrus uses to store metadata, and how they can be read
from Sui smart contracts, or through the Sui SDK.</li>
</ul>
<p>Refer again to the <a href="dev-guide/../glossary.html">glossary</a> of terms as a reference.</p>
<div id="admonition-disclaimer-about-the-walrus-testnet" class="admonition admonish-danger" role="note" aria-labelledby="admonition-disclaimer-about-the-walrus-testnet-title">
<div class="admonition-title">
<div id="admonition-disclaimer-about-the-walrus-testnet-title">
<p>Disclaimer about the Walrus Testnet</p>
</div>
<a class="admonition-anchor-link" href="dev-guide/dev-guide.html#admonition-disclaimer-about-the-walrus-testnet"></a>
</div>
<div>
<p>The current Testnet release of Walrus and Walrus Sites is a preview intended to showcase
the technology and solicit feedback from builders, users, and storage-node operators.
All transactions are executed on the Sui Testnet and use Testnet WAL and SUI which have no
value. The state of the store <strong>can and will be wiped</strong> at any point and possibly with no warning.
Do not rely on this Testnet for any production purposes, it comes with no availability or
persistence guarantees.</p>
<p>Furthermore, encodings and blob IDs may be incompatible with the future Testnet and Mainnet, and
developers will be responsible for migrating any Testnet applications and data to Mainnet. Detailed
migration guides will be provided when Mainnet becomes available.</p>
<p>Also see the <a href="dev-guide/../legal/testnet_tos.html">Testnet terms of service</a> under which this Testnet is made
available.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="components"><a class="header" href="#components">Components</a></h1>
<p>From a developer perspective, some Walrus components are objects and smart contracts on
Sui, and some components are Walrus-specific binaries and services. As a rule, Sui is used to
manage blob and storage node metadata, while Walrus-specific services are used to store and
read blob contents, which can be very large.</p>
<p>Walrus defines a number of objects and smart contracts on Sui:</p>
<ul>
<li>A shared <em>system object</em> records and manages the current committee of storage nodes.</li>
<li><em>Storage resources</em> represent empty storage space that may be used to store blobs.</li>
<li><em>Blob resources</em> represent blobs being registered and certified as stored.</li>
<li>Changes to these objects emit <em>Walrus-related events</em>.</li>
</ul>
<p>The Walrus system object ID can be found in the Walrus <code>client_config.yaml</code> file (see
<a href="dev-guide/../usage/setup.html#configuration">Configuration</a>). You may use any Sui explorer to look at its
content, as well as explore the content of blob objects. There is more information about these in
the <a href="dev-guide/sui-struct.html">quick reference to the Walrus Sui structures</a>.</p>
<p>Walrus is also composed of a number of Walrus-specific services and binaries:</p>
<ul>
<li>A client (binary) can be executed locally and provides a
<a href="dev-guide/../usage/client-cli.html">Command Line Interface (CLI)</a>, a <a href="dev-guide/../usage/json-api.html">JSON API</a>
and an <a href="dev-guide/../usage/web-api.html">HTTP API</a> to perform Walrus operations.</li>
<li>Aggregator services allow reading blobs via HTTP requests.</li>
<li>Publisher services are used to store blobs to Walrus.</li>
<li>A set of storage nodes store encoded blobs. These nodes form the decentralized
storage infrastructure of Walrus.</li>
</ul>
<p>Aggregators, publishers, and other services use the client APIs to interact with Walrus. End users
of services using Walrus interact with the store via custom services, aggregators, or publishers
that expose HTTP APIs to avoid the need to run locally a binary client.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operations-1"><a class="header" href="#operations-1">Operations</a></h1>
<h2 id="blob-encoding-and-blob-id"><a class="header" href="#blob-encoding-and-blob-id">Blob encoding and blob ID</a></h2>
<p>Walrus stores blobs across storage nodes in an <a href="dev-guide/../design/encoding.html">encoded form</a>, and refers
to blobs by their <em>blob ID</em>. The blob ID is deterministically derived from the content of a blob
and the Walrus configuration. The blob ID of two files with the same content will be the same.</p>
<p>You can derive the blob ID of a file locally using the command: <code>walrus blob-id &lt;file path&gt;</code>.</p>
<h2 id="store-1"><a class="header" href="#store-1">Store</a></h2>
<p>Walrus may be used to <strong>store a blob</strong>, via the native client APIs or a publisher.</p>
<div id="admonition-public-access" class="admonition admonish-danger" role="note" aria-labelledby="admonition-public-access-title">
<div class="admonition-title">
<div id="admonition-public-access-title">
<p>Public access</p>
</div>
<a class="admonition-anchor-link" href="dev-guide/dev-operations.html#admonition-public-access"></a>
</div>
<div>
<p><strong>All blobs stored in Walrus are public and discoverable by all.</strong> Therefore you must not use Walrus
to store anything that contains secrets or private data without additional measures to protect
confidentiality.</p>
</div>
</div>
<p>Under the hood a number of operations happen both on Sui as well as on storage nodes:</p>
<ul>
<li>The client or publisher encodes the blob and derives a <em>blob ID</em> that identifies the blob. This
is a <code>u256</code> often encoded as a URL-safe base64 string.</li>
<li>A transaction is executed on Sui to purchase some storage from the system object, and then to
<em>register the blob ID</em> occupying this storage. Client APIs return the <em>Sui blob object ID</em>. The
transactions use SUI to purchase storage and pay for gas.</li>
<li>Encoded slivers of the blob are distributed to all storage nodes. They each sign a receipt.</li>
<li>Signed receipts are aggregated and submitted to the Sui blob object to <em>certify the blob</em>.
Certifying a blob emits a Sui event with the blob ID and the period of availability.</li>
</ul>
<p>A blob is considered available on Walrus once the corresponding Sui blob object has been
certified in the final step. The steps involved in a store operation can be executed by the binary
client, or a publisher that accepts and publishes blobs via HTTP.</p>
<p>Walrus currently allows the storage of blobs up to a maximum size that may be determined
through the <a href="dev-guide/../usage/client-cli.html#walrus-system-information"><code>walrus info</code></a> CLI command. The
maximum blob size is currently 13.3 GiB. You may store larger blobs by splitting them into
smaller chunks.</p>
<p>Blobs are stored for a certain number of <em>epochs</em>, as specified at the time they were stored. Walrus
storage nodes ensure that within these epochs a read succeeds. The current Testnet uses a short
epoch duration of two days for testing purposes, but Mainnet epochs are planned to be multiple
weeks.</p>
<h2 id="read-1"><a class="header" href="#read-1">Read</a></h2>
<p>Walrus can also be used to <strong>read a blob</strong> after it is stored by providing its blob ID.
A read is executed by performing the following steps:</p>
<ul>
<li>The system object on Sui is read to determine the Walrus storage node committee.</li>
<li>A number of storage nodes are queried for blob metadata and the slivers they store.</li>
<li>The blob is reconstructed from the recovered slivers and checked against the blob ID.</li>
</ul>
<p>The steps involved in the read operation are performed by the binary client, or the aggregator
service that exposes an HTTP interface to read blobs. Reads are extremely resilient and will succeed
in recovering the blob in all cases even if up to one-third of storage nodes are unavailable. In
most cases, after synchronization is complete, blob can be read even if two-thirds of storage nodes
are down.</p>
<h2 id="certify-availability"><a class="header" href="#certify-availability">Certify Availability</a></h2>
<p>Walrus can be used to <strong>certify the availability of a blob</strong> using Sui. Checking that this happened
may currently be done in 3 different ways:</p>
<ul>
<li>A Sui SDK read can be
used to authenticate the certified blob event emitted when the blob ID was certified on Sui. The
client <code>walrus blob-status</code> command may be used to identify the event ID that needs to be checked.</li>
<li>A Sui SDK read may be
used to authenticate the Sui blob object corresponding to the blob ID, and check it is certified,
before the expiry epoch, and not deletable.</li>
<li>A Sui smart contract can read the blob object on Sui (or a reference to it) to check
it is certified, before the expiry epoch, and not deletable.</li>
</ul>
<p>The underlying protocol of the
<a href="https://github.com/MystenLabs/sui/tree/main/crates/sui-light-client">Sui light client</a>
returns digitally signed evidence for emitted events
or objects, and can be used by off-line or non-interactive applications as a proof of availability
for the blob ID for a certain number of epochs.</p>
<p>Once a blob is certified, Walrus will ensure that sufficient slivers will always be
available on storage nodes to recover it within the specified epochs.</p>
<h2 id="delete"><a class="header" href="#delete">Delete</a></h2>
<p>Stored blobs can be optionally set as deletable by the user that creates them. This metadata is
stored in the Sui blob object, and whether a blob is deletable or not is included in certified blob
events. A deletable blob may be deleted by the owner of the blob object, to reclaim and re-use
the storage resource associated with it.</p>
<p>If no other copies of the blob exist in Walrus, deleting a blob will eventually make it
unrecoverable using read commands. However, if other copies of the blob exist on Walrus, a delete
command will reclaim storage space for the user that invoked it, but will not make the blob
unavailable until all other copies have been deleted or expire.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="sui-structures"><a class="header" href="#sui-structures">Sui Structures</a></h1>
<p>This section is optional and enables advanced use cases.</p>
<p>You can interact with Walrus purely through the client CLI, and JSON or HTTP APIs provided, without
querying or executing transactions on Sui directly. However, Walrus uses Sui to manage its metadata
and smart contract developers can read information about the Walrus system, as well as stored blobs,
on Sui.</p>
<p>The Move code of the Walrus Testnet contracts is available at
<a href="https://github.com/MystenLabs/walrus-docs/blob/main/contracts">https://github.com/MystenLabs/walrus-docs/blob/main/contracts</a>. An example package using
the Walrus contracts is available at
<a href="https://github.com/MystenLabs/walrus-docs/blob/main/examples/move">https://github.com/MystenLabs/walrus-docs/blob/main/examples/move</a>.</p>
<p>The following sections provide further insights into the contract and an overview of how you may use
Walrus objects in your own Sui smart contracts.</p>
<div id="admonition-a-word-of-caution" class="admonition admonish-danger" role="note" aria-labelledby="admonition-a-word-of-caution-title">
<div class="admonition-title">
<div id="admonition-a-word-of-caution-title">
<p>A word of caution</p>
</div>
<a class="admonition-anchor-link" href="dev-guide/sui-struct.html#admonition-a-word-of-caution"></a>
</div>
<div>
<p>Walrus Mainnet will use new Move packages with <code>struct</code> layouts and function signatures that may not
be compatible with this package. Move code that builds against this package will need to be rewritten.</p>
</div>
</div>
<h2 id="blob-and-storage-objects"><a class="header" href="#blob-and-storage-objects">Blob and storage objects</a></h2>
<p>Walrus blobs are represented as Sui objects of type <code>Blob</code>. A blob is first registered, indicating
that the storage nodes should expect slivers from a Blob ID to be stored. Then a blob is certified,
indicating that a sufficient number of slivers have been stored to guarantee the blob's
availability. When a blob is certified, its <code>certified_epoch</code> field contains the epoch in which it
was certified.</p>
<p>A <code>Blob</code> object is always associated with a <code>Storage</code> object, reserving enough space for
a long enough period for the blob's storage. A certified blob is available for the period the
underlying storage resource guarantees storage.</p>
<p>Concretely, <code>Blob</code> and <code>Storage</code> objects have the following fields, which can be read through the
Sui SDKs:</p>
<pre><code class="language-move">
/// The blob structure represents a blob that has been registered to with some storage,
/// and then may eventually be certified as being available in the system.
public struct Blob has key, store {
    id: UID,
    registered_epoch: u32,
    blob_id: u256,
    size: u64,
    encoding_type: u8,
    // Stores the epoch first certified.
    certified_epoch: option::Option&lt;u32&gt;,
    storage: Storage,
    // Marks if this blob can be deleted.
    deletable: bool,
}

/// Reservation for storage for a given period, which is inclusive start, exclusive end.
public struct Storage has key, store {
    id: UID,
    start_epoch: u32,
    end_epoch: u32,
    storage_size: u64,
}
</code></pre>
<p>All fields of <code>Blob</code> and <code>Storage</code> objects can be read using the expected functions:</p>
<pre><code class="language-move">// Blob functions
public fun blob_id(b: &amp;Blob): u256;
public fun size(b: &amp;Blob): u64;
public fun erasure_code_type(b: &amp;Blob): u8;
public fun registered_epoch(self: &amp;Blob): u32;
public fun certified_epoch(b: &amp;Blob): &amp;Option&lt;u32&gt;;
public fun storage(b: &amp;Blob): &amp;Storage;
...

// Storage functions
public fun start_epoch(self: &amp;Storage): u32;
public fun end_epoch(self: &amp;Storage): u32;
public fun storage_size(self: &amp;Storage): u64;
...
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<p>When a blob is first registered, a <code>BlobRegistered</code> event is emitted that informs storage nodes
that they should expect slivers associated with its Blob ID. Eventually when the blob is
certified, a <code>BlobCertified</code> is emitted containing information about the blob ID and the epoch
after which the blob will be deleted. Before that epoch the blob is guaranteed to be available.</p>
<pre><code class="language-move">/// Signals that a blob with metadata has been registered.
public struct BlobRegistered has copy, drop {
    epoch: u32,
    blob_id: u256,
    size: u64,
    encoding_type: u8,
    end_epoch: u32,
    deletable: bool,
    // The object id of the related `Blob` object
    object_id: ID,
}

/// Signals that a blob is certified.
public struct BlobCertified has copy, drop {
    epoch: u32,
    blob_id: u256,
    end_epoch: u32,
    deletable: bool,
    // The object id of the related `Blob` object
    object_id: ID,
    // Marks if this is an extension for explorers, etc.
    is_extension: bool,
}
</code></pre>
<p>The <code>BlobCertified</code> event with <code>deletable</code> set to false and an <code>end_epoch</code> in the future indicates
that the blob will be available until this epoch. A light client proof that this event was emitted
for a blob ID constitutes a proof of availability for the data with this blob ID.</p>
<p>When a deletable blob is deleted, a <code>BlobDeleted</code> event is emitted:</p>
<pre><code class="language-move">/// Signals that a blob has been deleted.
public struct BlobDeleted has copy, drop {
    epoch: u32,
    blob_id: u256,
    end_epoch: u32,
    // The object ID of the related `Blob` object.
    object_id: ID,
    // If the blob object was previously certified.
    was_certified: bool,
}
</code></pre>
<p>The <code>InvalidBlobID</code> event is emitted when storage nodes detect an incorrectly encoded blob.
Anyone attempting a read on such a blob is guaranteed to also detect it as invalid.</p>
<pre><code class="language-move">/// Signals that a BlobID is invalid.
public struct InvalidBlobID has copy, drop {
    epoch: u32, // The epoch in which the blob ID is first registered as invalid
    blob_id: u256,
}
</code></pre>
<p>System level events such as <code>EpochChangeStart</code> and <code>EpochChangeDone</code> indicate transitions
between epochs. And associated events such as <code>ShardsReceived</code>, <code>EpochParametersSelected</code>,
and <code>ShardRecoveryStart</code> indicate storage node level events related to epoch transitions,
shard migrations and epoch parameters.</p>
<h2 id="system-and-staking-information"><a class="header" href="#system-and-staking-information">System and staking information</a></h2>
<p>The Walrus system object contains metadata about the available and used storage, as well as the
price of storage per KiB of storage in FROST. The committee
structure within the system object can be used to read the current epoch number, as well as
information about the committee.</p>
<pre><code class="language-move">public struct SystemStateInnerV1 has key, store {
    id: UID,
    /// The current committee, with the current epoch.
    committee: BlsCommittee,
    // Some accounting
    total_capacity_size: u64,
    used_capacity_size: u64,
    /// The price per unit size of storage.
    storage_price_per_unit_size: u64,
    /// The write price per unit size.
    write_price_per_unit_size: u64,
    /// Accounting ring buffer for future epochs.
    future_accounting: FutureAccountingRingBuffer,
    /// Event blob certification state
    event_blob_certification_state: EventBlobCertificationState,
}

/// This represents a BLS signing committee for a given epoch.
public struct BlsCommittee has store, copy, drop {
    /// A vector of committee members
    members: vector&lt;BlsCommitteeMember&gt;,
    /// The total number of shards held by the committee
    n_shards: u16,
    /// The epoch in which the committee is active.
    epoch: u32,
}

public struct BlsCommitteeMember has store, copy, drop {
    public_key: Element&lt;G1&gt;,
    weight: u16,
    node_id: ID,
}

</code></pre>
<!-- TODO (#146): say more about staking contracts. -->
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operator-guide"><a class="header" href="#operator-guide">Operator guide</a></h1>
<p>This chapter introduces all the concepts needed for operators of the different components that make
up the Walrus system. It is currently a work in progress and will be updated as the platform
matures.</p>
<p>Specifically, this guide describes the following:</p>
<ul>
<li><a href="operator-guide/storage-node.html">Storage node</a> contains the most relevant instructions for operators of a Walrus
storage node.</li>
<li><a href="operator-guide/aggregator.html">Aggregator</a> describes the operation of a Walrus aggregator host.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operating-a-storage-node"><a class="header" href="#operating-a-storage-node">Operating a storage node</a></h1>
<!-- TODO (#141): Update and add further details, also on monitoring. -->
<p>The binary of the storage node is not yet publicly available. Prior to official network launch the
code will be open-sourced.</p>
<p>A basic systemd service running the Storage Node could look like this:</p>
<pre><code class="language-ini">[Unit]
Description=Walrus Storage Node

[Service]
User=walrus
Environment=RUST_BACKTRACE=1
Environment=RUST_LOG=info,walrus=debug
ExecStart=/opt/walrus/bin/walrus-node run --config-path /opt/walrus/config/walrus-node.yaml
Restart=always

LimitNOFILE=65536
</code></pre>
<p>Make sure to adjust any paths and, if desired, the log level.</p>
<p>The <code>walrus-node</code> binary stores slivers in RocksDB, which means the data will be stored on disk, to
a path configured by the <code>/opt/walrus/config/walrus-node.yaml</code> file. The full format with all
mandatory and optional configuration parameters will be made available with the binary.</p>
<p>Here are some important config params from a shortened version of the <code>walrus-node.yaml</code> config
file:</p>
<pre><code class="language-yaml">storage_path: /opt/walrus/db
metrics_address: 127.0.0.1:9184
rest_api_address: 0.0.0.0:9185
sui:
  rpc: https://fullnode.testnet.sui.io:443
  system_object: 0xWALRUS_CONTRACT
blob_recovery:
  max_concurrent_blob_syncs: 10
  retry_interval_min_secs: 1
  retry_interval_max_secs: 3600
  metadata_request_timeout_secs: 5
  max_concurrent_metadata_requests: 1
  sliver_request_timeout_secs: 300
  invalidity_sync_timeout_secs: 300
</code></pre>
<p>For monitoring, you can configure Grafana Agent to fetch metrics from <code>localhost:9184/metrics</code>
(or whatever you've configured <code>metrics_address</code> to be).</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operating-an-aggregator"><a class="header" href="#operating-an-aggregator">Operating an aggregator</a></h1>
<!-- TODO (#141): Add further details and example cache setup. -->
<p>Below is an example of an aggregator node which hosts a HTTP endpoint that can be used
to fetch data from Walrus over the web.</p>
<p>The aggregator process is run via the <code>walrus</code> client binary in <a href="operator-guide/../usage/web-api.html">daemon mode</a>.
It can be run in many ways, one example being via a systemd service:</p>
<pre><code class="language-ini">[Unit]
Description=Walrus Aggregator

[Service]
User=walrus
Environment=RUST_BACKTRACE=1
Environment=RUST_LOG=info,walrus=debug
ExecStart=/opt/walrus/bin/walrus --config /opt/walrus/config/client_config.yaml aggregator --bind-address 0.0.0.0:9000
Restart=always

LimitNOFILE=65536
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="staking"><a class="header" href="#staking">Staking</a></h1>
<p>In Walrus, anyone can delegate stake to storage nodes and, by doing so, influence, which storage
nodes get selected for the committee in future epochs, and how many shards these nodes will hold.
Shards are assigned to storage nodes every epoch, roughly proportional to the amount of stake
that was delegated to them. By staking with a storage node, users also earn rewards, as they
will receive a share of the storage fees.</p>
<p>Since moving shards from one storage node to another requires transferring a lot of data, and
storage nodes potentially need to expand their storage capacity, the selection of the committee
for the next epoch is done ahead of time, in the middle of the previous epoch. This provides
sufficient time to storage-node operators to provision additional resources, if needed.</p>
<p>For stake to affect the shard distribution in epoch <code>e</code> and become "active", it must be staked
before the committee for this epoch has been selected, meaning that it has to be staked before
the midpoint of epoch <code>e - 1</code>. If it is staked after that point in time, it will only influence
the committee selection for epoch <code>e + 1</code> and thus only become active, and accrue rewards, in
that epoch.</p>
<p>Unstaking has a similar delay: because unstaking funds only has an effect on the committee in
the next committee selection, the stake will remain active until that committee takes over.
This means that, to unstake at the start of epoch <code>e</code>, the user needs to "request withdrawal"
before the midpoint of epoch <code>e - 1</code>. Otherwise, that is, if the user unstakes after this point,
the stake will remain active, and continue to accrue rewards, throughout epoch <code>e</code>, and the
balance and rewards will be available to withdraw at the start of epoch <code>e + 1</code>.</p>
<h2 id="how-to-stake-with-the-walrus-staking-dapp"><a class="header" href="#how-to-stake-with-the-walrus-staking-dapp">How to stake with the Walrus Staking dApp</a></h2>
<p>The Walrus Staking dApp allows users to stake (or unstake) to any of the storage nodes of the
system.</p>
<p>To use the dApp, visit <a href="https://stake.walrus.site">https://stake.walrus.site</a> and connect your wallet:</p>
<ul>
<li>Click the <code>Connect Wallet</code> button at the top right corner.</li>
<li>Select the wallet (if the wallet was connected before, this and the next step won't be required).</li>
<li>Approve the connection.</li>
<li>(Make sure the selected wallet network is Testnet).</li>
</ul>
<h3 id="exchange-testnet-sui-to-wal"><a class="header" href="#exchange-testnet-sui-to-wal">Exchange Testnet SUI to WAL</a></h3>
<p>To be able to stake you will need to have Testnet WAL in your wallet.
You can exchange your Testnet SUI to WAL using the dApp as follows:</p>
<ul>
<li>Click the <code>Get WAL</code> button.</li>
<li>Select the amount of SUI. This will be exchanged to WAL at a 1:1 rate.</li>
<li>And click <code>Exchange</code>.</li>
<li><em>Follow the instructions in your wallet to approve the transaction.</em></li>
</ul>
<h3 id="stake"><a class="header" href="#stake">Stake</a></h3>
<ul>
<li>Find the storage node that you want to stake to.
<ul>
<li>Below the system stats, there is the list of the "Current Committee" of storage nodes.</li>
<li>You can select one of the nodes in that list or, if the storage node is not in the current
committee, you find all the storage nodes at the bottom of the page.</li>
</ul>
</li>
<li>Once you selected the storage node, click the stake button.</li>
<li>Select the amount of WAL.</li>
<li>Click Stake.</li>
<li><em>Follow the instructions in your wallet to approve the transaction.</em></li>
</ul>
<h3 id="unstake"><a class="header" href="#unstake">Unstake</a></h3>
<ul>
<li>Find the <code>Staked WAL</code> you want to unstake.
<ul>
<li>Below the "Current Committee" list you will find all your <code>Staked WAL</code>.</li>
<li>Also you can expand a storage node and find all your stakes with that node.</li>
</ul>
</li>
<li>Depending on the state of the <code>Staked WAL</code> you will be able to unstake or Withdraw your funds.</li>
<li>Click the <code>Unstake</code> or <code>Withdraw</code> button.</li>
<li>Click continue to confirm your action.</li>
<li><em>Follow the instructions in your wallet to approve the transaction.</em></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="examples"><a class="header" href="#examples">Examples</a></h1>
<p>As inspiration, we provide several simple examples in different programming languages to interact
with Walrus through the various interfaces. They are located at
<a href="https://github.com/MystenLabs/walrus-docs/tree/main/examples">https://github.com/MystenLabs/walrus-docs/tree/main/examples</a> and described below.</p>
<p>In addition, we have built actual applications on top of Walrus. The prime example is <a href="usage/../walrus-sites/intro.html">Walrus
Sites</a>, with code available in the
<a href="https://github.com/MystenLabs/walrus-sites">https://github.com/MystenLabs/walrus-sites</a> repository.</p>
<p>And for an example of how to build a static website and store it as a Walrus Site with GitHub
actions, just look at the <a href="https://github.com/MystenLabs/walrus-docs/blob/main/.github/workflows/publish.yaml">CI
workflow</a> we use
to publish this very site. There is also a <a href="https://github.com/zktx-io/walrus-sites-ga">Walrus-Sites GitHub
Action</a> created by the community you can use to very
easily publish your own Walrus Sites using GitHub Actions (note that this is <em>not</em> created or
officially supported by the Walrus team at Mysten Labs).</p>
<p>See also our list of existing and upcoming <a href="usage/./sdks.html">SDKs and other tools</a>.</p>
<h2 id="python"><a class="header" href="#python">Python</a></h2>
<p>The <a href="https://github.com/MystenLabs/walrus-docs/tree/main/examples/python">Python examples</a> folder
contains a number of examples:</p>
<ul>
<li>How to <a href="https://github.com/MystenLabs/walrus-docs/blob/main/examples/python/hello_walrus_webapi.py">use the HTTP
API</a>
to store and read a blob.</li>
<li>How to <a href="https://github.com/MystenLabs/walrus-docs/blob/main/examples/python/hello_walrus_jsonapi.py">use the JSON
API</a>
to store, read, and check the availability of a blob. Checking the certification of a blob
illustrates reading the Blob Sui object that certifies (see the <a href="usage/../dev-guide/sui-struct.html">Walrus Sui
reference</a>).</li>
<li>How to <a href="https://github.com/MystenLabs/walrus-docs/blob/main/examples/python/track_walrus_events.py">track Walrus related
Events</a>.</li>
</ul>
<h2 id="javascript"><a class="header" href="#javascript">JavaScript</a></h2>
<p>A <a href="https://github.com/MystenLabs/walrus-docs/tree/main/examples/javascript">JavaScript example</a> is
provided showing how to upload and download a blob through a web form using the HTTP API.</p>
<h2 id="move"><a class="header" href="#move">Move</a></h2>
<p>For more complex applications, you may want to interact with Walrus on-chain objects. For that
purpose, the currently deployed Walrus contracts are included <a href="https://github.com/MystenLabs/walrus-docs/tree/main/contracts">in our GitHub
repository</a>.</p>
<p>Furthermore, we provide a simple <a href="https://github.com/MystenLabs/walrus-docs/tree/main/examples/move">example
contract</a> that imports and uses
the Walrus objects.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h1>
<div id="admonition-debug-logging" class="admonition admonish-tip" role="note" aria-labelledby="admonition-debug-logging-title">
<div class="admonition-title">
<div id="admonition-debug-logging-title">
<p>Debug logging</p>
</div>
<a class="admonition-anchor-link" href="usage/troubleshooting.html#admonition-debug-logging"></a>
</div>
<div>
<p>You can enable debug logging for Walrus by setting the environment variable <code>RUST_LOG=walrus=debug</code>.</p>
</div>
</div>
<h2 id="latest-binary"><a class="header" href="#latest-binary">Latest binary</a></h2>
<p>Before undertaking any other steps, make sure you have the <a href="usage/./setup.html#installation">latest <code>walrus</code>
binary</a>. If you have multiple versions in different locations, find the
binary that will actually be used with <code>which walrus</code>. For the current Testnet, a binary version of
at 1.9 or later is required.</p>
<h2 id="old-hardware-or-incompatible-vms"><a class="header" href="#old-hardware-or-incompatible-vms">Old hardware or incompatible VMs</a></h2>
<p>Our standard Ubuntu binary is known to cause problems on certain old hardware and in certain
virtualized environments. If you experience errors like "Illegal instruction (core dumped)",
<a href="usage/./setup.html#installation">install</a> the <code>ubuntu-x86_64-generic</code> version instead, which is compiled
specifically to be compatible with almost all physical and virtual x86-64 CPUs.</p>
<h2 id="latest-walrus-configuration"><a class="header" href="#latest-walrus-configuration">Latest Walrus configuration</a></h2>
<p>The Walrus Testnet is wiped periodically and requires updating to the latest binary and
configuration. If you get an error like "could not retrieve enough confirmations to certify the
blob", you are probably using an outdated configuration pointing to an inactive Walrus system. In
this case, update your configuration file with the latest <a href="usage/./setup.html#configuration">configuration</a>
and make sure the CLI uses the intended configuration.</p>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/troubleshooting.html#admonition-tip"></a>
</div>
<div>
<p>The <code>walrus</code> client binary prints information about the used configuration when starting execution,
including the path to the Walrus configuration file and the Sui wallet.</p>
</div>
</div>
<h2 id="correct-sui-network-configuration"><a class="header" href="#correct-sui-network-configuration">Correct Sui network configuration</a></h2>
<p>If you get an error like "the specified Walrus system object does not exist", make sure your wallet
is set up for Sui <strong>Testnet</strong> and you use the latest <a href="usage/./setup.html#configuration">configuration</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="introduction-to-walrus-sites"><a class="header" href="#introduction-to-walrus-sites">Introduction to Walrus Sites</a></h1>
<p><em>Walrus Sites</em> are "web"-sites that use Sui and Walrus as their underlying technology. They are a
prime example of how Walrus can be used to build new and exciting decentralized applications. Anyone
can build and deploy a Walrus Site and make it accessible to the world! Funnily, this documentation
is itself available as a Walrus Site at <a href="https://docs.walrus.site/walrus-sites/intro.html">https://docs.walrus.site/walrus-sites/intro.html</a> (if you
aren't there already).</p>
<p>At a high level, here are some of the most exciting features:</p>
<ul>
<li>Publishing a site does not require managing servers or complex configurations; just provide the
source files (produced by your favorite web framework), publish them to Walrus Sites using the
<a href="walrus-sites/./overview.html#the-site-builder">site-builder tool</a>, and you are done!</li>
<li>Sites can be linked to from ordinary Sui objects. This feature enables, for example, creating an
NFT collection in which <em>every single NFT</em> has a <em>personalized website dedicated to it</em>.</li>
<li>Walrus Sites are owned by addresses on Sui and can be exchanged, shared, and updated thanks to
Sui's flexible programming model. This means, among other things, that Walrus Sites can leverage
the <a href="https://suins.io/">SuiNS</a> naming system to have human-readable names. No more messing around
with DNS!</li>
<li>Thanks to Walrus's decentralization and extremely high data availability, there is no risk of
having your site wiped for no reason.</li>
<li>Since they live on Walrus, these sites cannot have a backend in the traditional sense, and can be
therefore considered "static" sites. However, the developer can integrate with Sui-compatible
wallets and harness Sui's programmability to add backend functionality to Walrus Sites!</li>
</ul>
<h2 id="show-me"><a class="header" href="#show-me">Show me</a></h2>
<p>To give you a very high-level intuition of how Walrus Sites work, let's look at an example: A simple
NFT collection on Sui that has a frontend dApp to mint the NFTs hosted on Walrus Sites, and in
which <em>each NFT</em> has a <em>specific, personalized Walrus Site</em>.</p>
<p>You can check out the mint page at <a href="https://flatland.walrus.site/">https://flatland.walrus.site/</a>. This site is served to your
browser through the Walrus Site <em>portal</em> <a href="https://walrus.site">https://walrus.site</a>. While the portal's operation is
explained in a <a href="walrus-sites/./portal.html">later section</a>, consider for now that there can be many portals (hosted
by whoever wants to have their own, and even on <code>localhost</code>). Further, the only function of the
portal is to retrieve the metadata (from Sui) and the resource files (from Walrus) that constitute
the site.</p>
<p>If you have a Sui wallet with some Testnet SUI, you can try and "mint a new Flatlander" from the
site. This creates an NFT from the collection and shows you two links: one to the explorer, and one
to the "Flatlander site". This latter site is a special Walrus Site that exists only for that NFT,
and has special characteristics (the background color, the image, ...) that are based on the
contents of the NFT.</p>
<p>The URL to this per-NFT site looks something like this:
<code>https://2hzpawjycxuiuh36047yocxapc69g8ercrypa7ccsk8ek4iqu6.walrus.site/</code>. You'll notice that the
domain remains <code>walrus.site</code>, but the subdomain is a long and random-looking string. This string is
actually the <a href="https://en.wikipedia.org/wiki/Base36">Base36</a> encoding of the object ID of the NFT,
which is
<a href="https://suiscan.xyz/testnet/object/0x644bc958052463785c026a13be051d579c8a4d2dc93b1874dce5839d4fb18c5e">0x644bc958...</a>.</p>
<p>In summary:</p>
<ul>
<li>Walrus Sites are served through a portal; in this case, <code>https://walrus.site</code>. There can be many
portals, and anyone can host one.</li>
<li>The subdomain on the URL points to a specific object on Sui that allows the browser to fetch and
render the site resources. This pointer can be
<ul>
<li>a SuiNS name, such as <code>flatland</code> in <code>https://flatland.walrus.site</code>, or</li>
<li>the Base36 encoding of a the Sui object ID, such as <code>0x644bc958...</code> in the example above.</li>
</ul>
</li>
</ul>
<p>Curious to know how this magic is possible? Read the <a href="walrus-sites/./overview.html">technical overview</a>! If you
just want to get started trying Walrus Sites out, check the <a href="walrus-sites/./tutorial.html">tutorial</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="your-first-walrus-site"><a class="header" href="#your-first-walrus-site">Your first Walrus Site</a></h1>
<p>This tutorial walks you through the steps necessary to publish a Walrus Site. We also provide the
instructions on how to add a SuiNS name to it for convenient browsing.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="installing-the-site-builder"><a class="header" href="#installing-the-site-builder">Installing the site builder</a></h1>
<p>This section describes the steps necessary to setup the Walrus Sites' <code>site-builder</code> tool and
prepare your environment for development.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Before you start, make sure you</p>
<ul>
<li>have a recent version of <a href="https://www.rust-lang.org/tools/install">Rust</a> installed;</li>
<li>followed all <a href="walrus-sites/../usage/setup.html">Walrus setup instructions</a>.</li>
</ul>
<p>Then, follow these additional setup steps.</p>
<h2 id="installation-1"><a class="header" href="#installation-1">Installation</a></h2>
<p>Similar to the <code>walrus</code> client CLI tool, we currently provide the <code>site-builder</code> client binary for
macOS (Intel and Apple CPUs), Ubuntu, and Windows:</p>
<div class="table-wrapper"><table><thead><tr><th>OS</th><th>CPU</th><th>Architecture</th></tr></thead><tbody>
<tr><td>Ubuntu</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-ubuntu-x86_64"><code>ubuntu-x86_64</code></a></td></tr>
<tr><td>Ubuntu</td><td>Intel 64bit (generic)</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-ubuntu-x86_64-generic"><code>ubuntu-x86_64-generic</code></a></td></tr>
<tr><td>MacOS</td><td>Apple Silicon</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-macos-arm64"><code>macos-arm64</code></a></td></tr>
<tr><td>MacOS</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-macos-x86_64"><code>macos-x86_64</code></a></td></tr>
<tr><td>Windows</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-windows-x86_64.exe"><code>windows-x86_64.exe</code></a></td></tr>
</tbody></table>
</div><div id="admonition-windows" class="admonition admonish-note" role="note" aria-labelledby="admonition-windows-title">
<div class="admonition-title">
<div id="admonition-windows-title">
<p>Windows</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-install.html#admonition-windows"></a>
</div>
<div>
<p>We now offer a pre-built binary also for Windows. However, most of the remaining instructions assume
a UNIX-based system for the directory structure, commands, etc. If you use Windows, you may need to
adapt most of those.</p>
</div>
</div>
<p>You can download the latest build from our Google Cloud Storage (GCS) bucket (correctly setting the
<code>$SYSTEM</code> variable):</p>
<pre><code class="language-sh">SYSTEM= # set this to your system: ubuntu-x86_64, ubuntu-x86_64-generic, macos-x86_64, macos-arm64, windows-x86_64.exe
curl https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-$SYSTEM -o site-builder
chmod +x site-builder
</code></pre>
<p>To be able to run it simply as <code>site-builder</code>, move the binary to any directory included in your
<code>$PATH</code> environment variable. Standard locations are <code>/usr/local/bin/</code>, <code>$HOME/bin/</code>, or
<code>$HOME/.local/bin/</code>.</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-install.html#admonition-note"></a>
</div>
<div>
<p>The site builder will look for the default configuration file <code>sites-config.yaml</code> in the current
directory, the <code>$XDG_HOME/walrus/sites-config.yaml</code> and <code>$HOME/walrus/sites-config.yaml</code> directory.
In case you want to use explicitly a different <code>sites-config.yaml</code>, use the <code>--config</code> flag to
specify the path to the configuration file.</p>
</div>
</div>
<p>Once this is done, you should be able to simply type <code>site-builder</code> in your terminal.</p>
<pre><code class="language-terminal">$ site-builder
Usage: site-builder [OPTIONS] &lt;COMMAND&gt;

Commands:
  publish  Publish a new site on Sui
  update   Update an existing site
  convert  Convert an object ID in hex format to the equivalent Base36
               format
  sitemap  Show the pages composing the Walrus site at the given object ID
  help     Print this message or the help of the given subcommand(s)

  ⋮
</code></pre>
<h2 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h2>
<p>The <code>site-builder</code> tool needs a configuration file to work. This file is called <code>sites-config.yaml</code>
and looks like this:</p>
<pre><code class="language-yaml"># module: site
# portal: walrus.site
package: 0xdf9033cac39b7a9b9f76fb6896c9fc5283ba730d6976a2b1d85ad1e6036c3272
# general:
#   rpc_url: https://fullnode.testnet.sui.io:443
#   wallet: /path/to/.sui/sui_config/client.yaml
#   walrus_binary: /path/to/walrus
#   walrus_config: /path/to/devnet_deployment/client_config.yaml
#   gas_budget: 500000000
</code></pre>
<p>As you can see, the configuration file is quite simple. The only mandatory field is the <code>package</code>
field, which represents the Sui object ID of the Walrus Sites smart contract. You can find the
latest version of the package in the <a href="https://github.com/MystenLabs/walrus-sites/tree/testnet">Walrus Sites
repository</a> on the <code>testnet</code> branch.</p>
<div id="admonition-walrus-sites-stable-branch" class="admonition admonish-danger" role="note" aria-labelledby="admonition-walrus-sites-stable-branch-title">
<div class="admonition-title">
<div id="admonition-walrus-sites-stable-branch-title">
<p>Walrus Sites stable branch</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-install.html#admonition-walrus-sites-stable-branch"></a>
</div>
<div>
<p>The stable branch of Walrus Sites is <code>testnet</code>.
Make sure that you always pull the latest changes from there.</p>
</div>
</div>
<p>You can define the location of the <code>sites-config.yaml</code> file using the <code>--config</code> flag when running
the <code>site-builder</code> commands like so:</p>
<pre><code class="language-sh">site-builder --config /path/to/sites-config.yaml publish &lt;build-directory-of-a-site&gt;
</code></pre>
<p>However, if are not a fan of repeating the same flags over and over, it's always easier to have the
configuration file in one of the <a href="walrus-sites/./tutorial-install.html#admonition-note">default locations</a>.</p>
<p>Download the <code>sites-config.yaml</code> file from the repository, and place it in one of the aforementioned
default locations. To illustrate, we will use the <code>~/.config/walrus</code> directory, like so:</p>
<pre><code class="language-sh">curl https://raw.githubusercontent.com/MystenLabs/walrus-sites/refs/heads/testnet/sites-config.yaml -o ~/.config/walrus/sites-config.yaml
</code></pre>
<p>You are now ready to start working on your Walrus Sites! 🎉</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="publishing-a-walrus-site"><a class="header" href="#publishing-a-walrus-site">Publishing a Walrus Site</a></h1>
<p>Now that everything is installed and configured, you should be able to start publishing your first
Walrus Site!</p>
<h2 id="select-the-source-material-for-the-site"><a class="header" href="#select-the-source-material-for-the-site">Select the source material for the site</a></h2>
<p>The <code>site-builder</code> works by uploading a directory of files produced by any web framework to Walrus
and adding the relevant metadata to Sui. This directory should have a file called <code>index.html</code> in
its root, which will be the entry point to the Walrus Site.</p>
<p>There is a very useful <a href="https://github.com/MystenLabs/example-walrus-sites">example-Walrus-sites</a>
repository that contains multiple kinds of sites that you can use for reference.</p>
<p>For simplicity, we will start by publishing the most frugal of the sites, the <code>walrus-snake</code> game.</p>
<p>First, clone the repository of the examples:</p>
<pre><code class="language-sh">git clone https://github.com/MystenLabs/example-walrus-sites.git &amp;&amp; cd example-walrus-sites
</code></pre>
<h2 id="publish-the-site"><a class="header" href="#publish-the-site">Publish the site</a></h2>
<p>Since we have placed the <code>walrus</code> and <code>site-builder</code> binaries and configuration in their default
locations, publishing the <code>./walrus-snake</code> site is as simple as calling the publishing command:</p>
<pre><code class="language-sh">site-builder publish ./walrus-snake --epochs 100
</code></pre>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-publish.html#admonition-tip"></a>
</div>
<div>
<p>Currently on Walrus Testnet, the duration of an epoch is two days. If you want your site to stay up
longer, specify the number of epochs with the <code>--epochs</code> flag (maximum 183 epochs).</p>
</div>
</div>
<p>The end of the output should look like the following:</p>
<pre><code class="language-txt">Execution completed
Resource operations performed:
  - created resource /Oi-Regular.ttf with blob ID 76npyqDyGF10-jP_ov-UBHpi-RaRFnxcWgslueGEfr0
  - created resource /file.svg with blob ID w70pYgtLmi--38Jg1sTGaLlZkQtximNMHXjxDQdXKa0
  - created resource /index.html with blob ID LVLk9VSnBrEgQ2HJHAgU3p8IarKypQpfn38aSeUZzzE
  - created resource /walrus.svg with blob ID 866UDjMAy_BB8SsTcgjGEOFp2uAO9BbcVbLh5-_oBNE
The site routes were modified

Created new site: test site
New site object ID: 0x407a308190eb82b266be9cc28b888d04c5b2e5a503c7d0ffd3f69681ea83b73a
Browse the resulting site at: https://1lupgq2auevjruy7hs9z7tskqwjp5cc8c5ebhci4v57qyl4piy.walrus.site
</code></pre>
<p>This output tells you that, for each file in the folder, a new Walrus blob was created, and the
respective blob ID. Further, it prints the object ID of the Walrus Site object on Sui (so you can
have a look in the explorer and use it to set the SuiNS name) and, finally, the URL at which you can
browse the site.</p>
<p>Note here that we are implicitly using the default <code>sites-config.yaml</code> as the config for the site
builder that we set up previously on the <a href="walrus-sites/./tutorial-install.html">installation section</a>. The
configuration file is necessary to ensure that the <code>site-builder</code> knows the correct Sui package for
the Walrus Sites logic.</p>
<p>More details on the configuration of the <code>site-builder</code> can be found under the <a href="walrus-sites/./builder-config.html">advanced
configuration</a> section.</p>
<h2 id="update-the-site"><a class="header" href="#update-the-site">Update the site</a></h2>
<p>Let's say now you want to update the content of the site, for example by changing the title from
"eat all the blobs!" to "Glob all the Blobs!".</p>
<p>First, make this edit on in the <code>./walrus-snake/index.html</code> file.</p>
<p>Then, you can update the existing site by running the <code>update</code> command, providing the directory
where to find the updated files (still <code>./walrus-snake</code>) and the object ID of the existing site
(<code>0x407a3081...</code>):</p>
<pre><code class="language-sh">site-builder update --epochs 100 ./walrus-snake 0x407a3081...
</code></pre>
<p>The output this time should be:</p>
<pre><code class="language-txt">Execution completed
Resource operations performed:
  - deleted resource /index.html with blob ID LVLk9VSnBrEgQ2HJHAgU3p8IarKypQpfn38aSeUZzzE
  - created resource /index.html with blob ID pcZaosgEFtmP2d2IV3QdVhnUjajvQzY2ev8d9U_D5VY
The site routes were left unchanged

Site object ID: 0x407a308190eb82b266be9cc28b888d04c5b2e5a503c7d0ffd3f69681ea83b73a
Browse the resulting site at: https://1lupgq2auevjruy7hs9z7tskqwjp5cc8c5ebhci4v57qyl4piy.walrus.site
</code></pre>
<p>Compared to the <code>publish</code> action, we can see that now the only actions performed were to delete the
old <code>index.html</code>, and update it with the newer one.</p>
<p>Browsing to the provided URL should reflect the change. You've updated the site!</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-publish.html#admonition-note"></a>
</div>
<div>
<p>The wallet you are using must be the <em>owner</em> of the Walrus Site object to be able to update it.</p>
</div>
</div>
<div id="admonition-extending-the-expiration-date-of-an-existing-site" class="admonition admonish-danger" role="note" aria-labelledby="admonition-extending-the-expiration-date-of-an-existing-site-title">
<div class="admonition-title">
<div id="admonition-extending-the-expiration-date-of-an-existing-site-title">
<p>Extending the expiration date of an existing site</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-publish.html#admonition-extending-the-expiration-date-of-an-existing-site"></a>
</div>
<div>
<p>To extend the expiration date of a previously-stored site, use the <code>update</code> command with the
<code>--force</code> flag, and specify the number of additional epochs (from the current epoch) with the
<code>--epochs</code> flag.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="bonus-set-a-suins-name"><a class="header" href="#bonus-set-a-suins-name">Bonus: Set a SuiNS name</a></h1>
<p>Browsing a URL like <code>https://1lupgq2auevjruy7hs9z7tskqwjp5cc8c5ebhci4v57qyl4piy.walrus.site</code> is not
particularly nice. Therefore, Walrus Sites allows to use SuiNS names (this is like DNS for Sui) to
assign a human-readable name to a Walrus Site. To do so, you simply have to get a SuiNS name you
like, and point it to the object ID of the Walrus Site (as provided by the <code>publish</code> or <code>update</code>
commands).</p>
<p>Let's do this step by step.</p>
<h2 id="get-a-suins-name"><a class="header" href="#get-a-suins-name">Get a SuiNS name</a></h2>
<ul>
<li>
<p>Navigate to <a href="https://testnet.suins.io">https://testnet.suins.io</a> and buy a domain name with your Testnet wallet. For
example, <code>walrusgame</code> (this specific one is already taken, choose another you like).</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-suins.html#admonition-note"></a>
</div>
<div>
<p>At the moment, you can only select names that are composed of letters <code>a-z</code> and numbers <code>0-9</code>, but
no special characters (e.g., <code>-</code>).</p>
</div>
</div>
</li>
</ul>
<h2 id="map-the-suins-name-to-the-walrus-site"><a class="header" href="#map-the-suins-name-to-the-walrus-site">Map the SuiNS name to the Walrus Site</a></h2>
<p>Now, you can set the SuiNS name to point to the address of your Walrus Site. To do so, go to the
<a href="https://testnet.suins.io/account/my-names">"names you own"</a> section of the SuiNS website, click on
the "three dots" menu icon above the name you want to map, and click "Link To Walrus Site". Paste
in the bar the object ID of the Walrus Site, check that it is correct, and click "Apply".</p>
<p>After approving the transaction, we can now browse <a href="https://walrusgame.walrus.site">https://walrusgame.walrus.site</a>!</p>
<div id="admonition-backwards-compatibility" class="admonition admonish-warning" role="note" aria-labelledby="admonition-backwards-compatibility-title">
<div class="admonition-title">
<div id="admonition-backwards-compatibility-title">
<p>Backwards compatibility</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-suins.html#admonition-backwards-compatibility"></a>
</div>
<div>
<p>If you previously linked a SuiNs domain to a Walrus Site, you might recall clicking the "Link To
Wallet Address" button instead of the "Link To Walrus Site" button. These old links remain valid,
but we recommend using the procedure above for all new sites and updates to older sites. The portal
will first check if the domain is linked using the "Link to Walrus Site", and, if that is not set,
it will fall back to checking the "Link to Wallet Address".</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="advanced-functionality"><a class="header" href="#advanced-functionality">Advanced functionality</a></h1>
<p>Keep reading to learn about the advanced features of Walrus Sites, including configuring the site
builder, specifying headers and routing for site resources, and <em>redirecting Sui objects to Walrus
Sites</em> to create per-object websites!</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="site-builder-commands"><a class="header" href="#site-builder-commands">Site builder commands</a></h1>
<p>We now describe in more detail the commands available through the site builder.</p>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-tip"></a>
</div>
<div>
<p>In general, the <code>--help</code> flag is your friend, you can add it to get further details for the whole
CLI (<code>site-builder --help</code>) or individual commands (e.g. <code>site-builder update --help</code>).</p>
</div>
</div>
<h2 id="publish"><a class="header" href="#publish"><code>publish</code></a></h2>
<p>The <code>publish</code> command, as described in the <a href="walrus-sites/./tutorial-publish.html">previous section</a>, publishes a
new site on Sui. The command takes a directory as input and creates a new Walrus Site from the
resources contained within.</p>
<p>The <code>--epochs</code> flag allows you to specify for how long the site data will be stored on Walrus.</p>
<div id="admonition-epoch-duration-on-walrus-testnet" class="admonition admonish-danger" role="note" aria-labelledby="admonition-epoch-duration-on-walrus-testnet-title">
<div class="admonition-title">
<div id="admonition-epoch-duration-on-walrus-testnet-title">
<p>Epoch duration on Walrus Testnet</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-epoch-duration-on-walrus-testnet"></a>
</div>
<div>
<p>On Walrus Testnet, the epoch duration is <strong>two days</strong>. Therefore, consider storing your site for a
large number of epochs if you want to make it available for the following months! The maximum
duration is set to 183 epochs (corresponding to one year).</p>
</div>
</div>
<p>If you are just uploading raw files without an <code>index.html</code>, you may want to use the
<code>--list-directory</code> flag, which will automatically create an index page to browse the files. See for
example <a href="https://bin.blob.store">https://bin.blob.store</a>.</p>
<p>The <code>publish</code> command will also respect the instructions in the <code>ws-resources.json</code> configuration
file. To know more, see the section on <a href="walrus-sites/./routing.html">specifying headers and routing</a>.</p>
<h2 id="update"><a class="header" href="#update"><code>update</code></a></h2>
<p>This command is the equivalent of <code>publish</code>, but for updating an existing site. It takes the same
arguments, with the addition of the Sui object ID of the site to update.</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-note"></a>
</div>
<div>
<p>The wallet you are using to call <code>update</code> must be the <em>owner</em> of the Walrus Site object to be able
to update it.</p>
</div>
</div>
<h2 id="convert"><a class="header" href="#convert"><code>convert</code></a></h2>
<p>The <code>convert</code> command converts an object ID in hex format to the equivalent Base36 format. This
command is useful if you have the Sui object ID of a Walrus Site, and want to know the subdomain
where you can browse it.</p>
<h2 id="site-map"><a class="header" href="#site-map"><code>site-map</code></a></h2>
<p>The <code>sitemap</code> command shows the resources that compose the Walrus Site at the given object ID.</p>
<h2 id="list-directory"><a class="header" href="#list-directory"><code>list-directory</code></a></h2>
<p>With <code>list-directory</code>, you can obtain the <code>index.html</code> file that would be generated by running
<code>publish</code> or <code>update</code> with the <code>--list-directory</code> flag. This is useful to see how the index page
would look like before publishing it—and possibly editing to make it look nicer!</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="configuring-the-site-builder"><a class="header" href="#configuring-the-site-builder">Configuring the site builder</a></h1>
<p>Configuring the <code>site-builder</code> tool is straightforward, but care is required to ensure that
everything works correctly.</p>
<p>The <code>site-builder</code> tool requires a configuration file to know which package to use on Sui, which
wallet to use, the gas budget, and other operational details. Most of these are abstracted away
through sensible defaults, so you should not need to touch them. Yet, for completeness, we provide
here the details for all the configuration options.</p>
<h2 id="minimal-configuration"><a class="header" href="#minimal-configuration">Minimal configuration</a></h2>
<p>The config file is expected to be in one of the <a href="walrus-sites/../usage/setup.html#config-custom-path">default
locations</a>, and it is possible to point elsewhere with the
<code>--config</code> flag. For your first run, it should be sufficient to call the <code>site-builder</code> without
specifying the config explicitly, which is already configured if you followed thoroughly the
<a href="walrus-sites/./tutorial-install.html#configuration">installation steps</a>.</p>
<p>If, for any reason, you didn't add <code>walrus</code> to <code>$PATH</code>, make sure to configure a pointer to the
binary, see below.</p>
<h2 id="additional-options"><a class="header" href="#additional-options">Additional options</a></h2>
<p>If you want to have more control over the behavior of the site builder, you can customize the
following variables in the config file:</p>
<ul>
<li><code>package</code>: the object ID of the Walrus Sites package on Sui. This must always be specified in the
config, and is already appropriately configured in <code>./sites-config.yaml</code>.</li>
<li><code>portal</code>: the name of the portal through which the site will be viewed; this only affects the
output of the CLI, and nothing else (default: <code>walrus.site</code>). All Walrus Sites are accessible
through any portal independent of this setting.</li>
<li><code>general</code>: these are general options that can be configured both through the CLI and the config:
<ul>
<li><code>rpc_url</code>: The URL of the Sui RPC node to use. If not set, the <code>site-builder</code> will infer it from
the wallet.</li>
<li><code>wallet</code>: Pointer to the Sui wallet to be used. By default, it uses the system-wide wallet (the
one from <code>sui client addresses</code>).</li>
<li><code>walrus_binary</code>: Pointer to the <code>walrus</code> binary. By default, this is expected to be run from
<code>$PATH</code>.</li>
<li><code>walrus_config</code>: The configuration for the <code>walrus</code> client binary, see the <a href="walrus-sites/../usage/setup.html">relevant
chapter</a>.</li>
<li><code>gas_budget</code>: The maximum amount of gas to be spent for transactions (default: 500M MIST).</li>
</ul>
</li>
</ul>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/builder-config.html#admonition-note"></a>
</div>
<div>
<p>From time to time there are package upgrades happening. This will require you to
update the <code>package</code> field in the config file.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="specifying-headers-and-routing"><a class="header" href="#specifying-headers-and-routing">Specifying headers and routing</a></h1>
<div id="admonition-new-with-walrus-sites-testnet-version" class="admonition admonish-tip" role="note" aria-labelledby="admonition-new-with-walrus-sites-testnet-version-title">
<div class="admonition-title">
<div id="admonition-new-with-walrus-sites-testnet-version-title">
<p>New with Walrus Sites Testnet version</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-new-with-walrus-sites-testnet-version"></a>
</div>
<div>
<p>The following features have been released with the Walrus Sites Testnet version.</p>
</div>
</div>
<p>In its base configuration, Walrus Sites serves static assets through a portal. However, many modern
web applications require more advanced features, such as custom headers and client-side routing.</p>
<p>Therefore, the site-builder can read a <code>ws-resource.json</code> configuration file, in which you can
directly specify resource headers and routing rules.</p>
<h2 id="the-ws-resourcesjson-file"><a class="header" href="#the-ws-resourcesjson-file">The <code>ws-resources.json</code> file</a></h2>
<p>This file is optionally placed in the root of the site directory, and it is <em>not</em> uploaded with the
site's resources (in other words, the file is not part of the resulting Walrus Site and is not
served by the portal).</p>
<p>If you don't want to use this default location, you can specify the path to the configuration file
with the <code>--ws-resources</code> flag when running the <code>publish</code> or <code>update</code> commands.</p>
<p>The file is JSON-formatted, and looks like the following:</p>
<pre><code class="language-JSON">{
  "headers": {
    "/index.html": {
      "Content-Type": "text/html; charset=utf-8",
      "Cache-Control": "max-age=3500"
    }
  },
  "routes": {
    "/*": "/index.html",
    "/accounts/*": "/accounts.html",
    "/path/assets/*": "/assets/asset_router.html"
  }
}
</code></pre>
<p>We now describe in details the two sections of the configuration file, <code>headers</code> and <code>routes</code>.</p>
<h2 id="specifying-http-response-headers"><a class="header" href="#specifying-http-response-headers">Specifying HTTP response headers</a></h2>
<p>The <code>headers</code> section allows you to specify custom HTTP response headers for specific resources.
The keys in the <code>headers</code> object are the paths of the resources, and the values are lists of
key-value pairs corresponding to the headers that the portal will attach to the response.</p>
<p>For example, in the configuration above, the file <code>index.html</code> will be served with the
<code>Content-Type</code> header set to <code>text/html; charset=utf-8</code> and the <code>Cache-Control</code> header set to
<code>max-age=3500</code>.</p>
<p>This mechanism allows you to control various aspects of the resource delivery, such as caching,
encoding, and content types.</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note"></a>
</div>
<div>
<p>The resource path is always represented as starting from the root <code>/</code>.</p>
</div>
</div>
<h3 id="default-headers"><a class="header" href="#default-headers">Default headers</a></h3>
<p>By default, no headers need to be specified, and the <code>ws-resources.json</code> file can be omitted. The
site-builder will automatically try to infer the <code>Content-Type</code> header based on the file extension,
and set the <code>Content-Encoding</code> to <code>identity</code> (no transformation).</p>
<p>In case the content type cannot be inferred, the <code>Content-Type</code> will be set to
<code>application/octet-stream</code>.</p>
<p>These defaults will be overridden by any headers specified in the <code>ws-resources.json</code> file.</p>
<h2 id="specifying-client-side-routing"><a class="header" href="#specifying-client-side-routing">Specifying client-side routing</a></h2>
<p>The <code>routes</code> section allows you to specify client-side routing rules for your site. This is useful
when you want to use a single-page application (SPA) framework, such as React or Angular.</p>
<p>The configuration in the <code>routes</code> object is a mapping from route keys to resource paths.</p>
<p>The <strong><code>routes</code> keys</strong> are path patterns in the form <code>/path/to/some/*</code>, where the <code>*</code> character
represents a wildcard.</p>
<div id="admonition-note-1" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-1-title">
<div class="admonition-title">
<div id="admonition-note-1-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note-1"></a>
</div>
<div>
<p>Currently, the wildcard <em>can only be specified at the end of the path</em>.
Therefore, <code>/path/*</code> is a valid path, while <code>/path/*/to</code> and <code>*/path/to/*</code> are not.</p>
</div>
</div>
<p>The <strong><code>routes</code> values</strong> are the resource paths that should be served when the route key is matched.</p>
<div id="admonition-important" class="admonition admonish-danger" role="note" aria-labelledby="admonition-important-title">
<div class="admonition-title">
<div id="admonition-important-title">
<p>Important</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-important"></a>
</div>
<div>
<p>The paths in the values <strong>must</strong> be valid resource paths, meaning that they must be present among
the site's resources. The Walrus sites contract will <strong>abort</strong> if the user tries to create a route
that points to a non-existing resource.</p>
</div>
</div>
<p>The simple routing algorithm is as follows:</p>
<ul>
<li>Whenever a resource path <em>is not found among the sites resources</em>, the portal tries to match the
path to the <code>routes</code>.</li>
<li>All matching routes are then <em>lexicographically ordered</em>, and the <em>longest</em> match is chosen.</li>
<li>The resource corresponding to this longest match is then served.</li>
</ul>
<div id="admonition-note-2" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-2-title">
<div class="admonition-title">
<div id="admonition-note-2-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note-2"></a>
</div>
<div>
<p>In other words, the portal will <em>always</em> serve a resource if present, and if not present will serve
the resource with the <em>longest matching prefix</em> among the routes.</p>
</div>
</div>
<p>Recall the example above:</p>
<pre><code class="language-JSON">"routes": {
  "/*": "/index.html",
  "/path/*": "/accounts.html",
  "/path/assets/*": "/assets/asset_router.html"
}
</code></pre>
<p>The following matchings will occur:</p>
<ul>
<li>browsing <code>/any/other/test.html</code> will serve <code>/index.html</code>;</li>
<li>browsing <code>/path/test.html</code> will serve <code>/accounts.html</code>, as it is a more specific match than the
previous one;</li>
<li>similarly, browsing <code>/path/assets/test.html</code> will serve <code>/assets/asset_router.html</code>.</li>
</ul>
<p><code>/index.html</code>, <code>/accounts.html</code>, and <code>/assets/asset_router.html</code> are all existing resources on the
Walrus Sites object on Sui.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="linking-from-and-to-walrus-sites"><a class="header" href="#linking-from-and-to-walrus-sites">Linking from and to Walrus Sites</a></h1>
<div id="admonition-walrus-sites-links-are-currently-unavailable" class="admonition admonish-warning" role="note" aria-labelledby="admonition-walrus-sites-links-are-currently-unavailable-title">
<div class="admonition-title">
<div id="admonition-walrus-sites-links-are-currently-unavailable-title">
<p>Walrus Sites links are currently unavailable</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/linking.html#admonition-walrus-sites-links-are-currently-unavailable"></a>
</div>
<div>
<p>This feature is currently unavailable on server-side portals. So if you are browsing a Walrus Site
on <a href="https://walrus.site">https://walrus.site</a>, you will not be able to use Walrus Sites links.</p>
<p>We are working on enabling this feature. Stay tuned!</p>
</div>
</div>
<p>Links in Walrus Sites work <em>almost</em> as you would expect in a regular website. We specify here a few
of the details.</p>
<h2 id="linking-to-resources-within-the-same-site"><a class="header" href="#linking-to-resources-within-the-same-site">Linking to resources within the same site</a></h2>
<p>Relative and absolute links (<code>href="/path/to/resource.html"</code>) work as usual.</p>
<h2 id="linking-to-resources-on-the-web"><a class="header" href="#linking-to-resources-on-the-web">Linking to resources on the web</a></h2>
<p>Linking to a resource on the web (<code>href="https://some.cdn.example.com/stylesheet.css"</code>) also works
as usual.</p>
<h2 id="linking-to-resources-in-other-walrus-sites"><a class="header" href="#linking-to-resources-in-other-walrus-sites">Linking to resources in other Walrus Sites</a></h2>
<p>Here is the part that is a bit different. Assume there is some image that you can browse at
<code>https://gallery.walrus.site/walrus_arctic.webp</code>, and you want to link it from your own Walrus Site.</p>
<p>Recall that, however, <code>https://walrus.site</code> is just one of the possibly many portals. I.e., the same
resource is browsable from a local portal (<code>http://gallery.localhost:8080/walrus_arctic.webp</code>), or
from any other portal (e.g., <code>https://gallery.blob.store/walrus_arctic.webp</code>). Therefore, how
can you link the resource in a <em>portal-independent way</em>? This is important for interoperability,
availability, and respecting the user's choice of portal.</p>
<h3 id="the-solution-walrus-sites-links"><a class="header" href="#the-solution-walrus-sites-links">The solution: Walrus Sites links</a></h3>
<p>We solve this problem by having the portals interpret special links that are normally invalid on
the web and redirect to the corresponding Walrus Sites resource in the portal itself.</p>
<p>Consider the example above, where the resource <code>/walrus_arctic.webp</code> is browsed from the Walrus Site
with SuiNS name <code>gallery</code>, which points to the object ID <code>abcd123…</code> (in Base36 encoding). Then,
the portal-independent link is: <code>https://gallery.suiobj/walrus_arctic.webp</code>. To fix the object ID
instead of the SuiNS name, you can use <code>https://abcd123….suiobj/walrus_arctic.webp</code>.</p>
<p>Another possibility is to directly point to the Walrus <em>blob ID</em> of the resource, and have the
browser "sniff" the content type. This works for images, for example, but not for script or
stylesheets. For example to point to the blob ID (e.g., containing an image) <code>qwer5678…</code>, use the
URL <code>https://blobid.walrus/qwer5678…</code>.</p>
<p>With such a link, the portal will extract the blob ID and redirect the request to the aggregator it
is using to fetch blobs.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="redirecting-objects-to-walrus-sites"><a class="header" href="#redirecting-objects-to-walrus-sites">Redirecting objects to Walrus Sites</a></h1>
<p>We have seen in the <a href="walrus-sites/./overview.html">overview</a> how a Walrus Site object on Sui looks like. We will
discuss now how you can create ensure that a <em>set of arbitrary objects</em> can all be tied to a
specific, and possibly unique, Walrus Site.</p>
<h2 id="the-goal"><a class="header" href="#the-goal">The goal</a></h2>
<p>Consider a collection of NFTs, such as the one published by <a href="https://flatland.walrus.site">https://flatland.walrus.site</a>. As we
show there, each minted NFT has its own Walrus Site, which can be personalized based on the contents
(e.g., the color) of the NFT itself. How can we achieve this?</p>
<h2 id="redirect-links"><a class="header" href="#redirect-links">Redirect links</a></h2>
<p>The solution is simple: We add a "redirect" in the NFT's
<a href="https://docs.sui.io/standards/display#sui-utility-objects"><code>Display</code></a> property. Each time an NFT's
object ID is browsed through a portal, the portal will check the <code>Display</code> of the NFT and, if it
encounters the <code>walrus site address</code> key, it will go fetch the Walrus Site that is at the
corresponding object ID.</p>
<h3 id="redirects-in-move"><a class="header" href="#redirects-in-move">Redirects in Move</a></h3>
<p>Practically speaking, when creating the <code>Display</code> of the NFT, you can include the key-value pair
that points to the Walrus Site that is to be used.</p>
<pre><code class="language-move">...
const VISUALIZATION_SITE: address = @0x901fb0...;
display.add(b"walrus site address".to_string(), VISUALIZATION_SITE.to_string());
...
</code></pre>
<h3 id="how-to-change-the-site-based-on-the-nft"><a class="header" href="#how-to-change-the-site-based-on-the-nft">How to change the site based on the NFT?</a></h3>
<p>The code above will only open the specified Walrus Site when browsing the object ID of the NFT. How
do we ensure that the properties of the NFT can be used to personalize the site?</p>
<p>This needs to be done in the <code>VISUALIZATION_SITE</code>: Since the subdomain is still pointing to the
NFT's object ID, the Walrus Site that is loaded can check its <code>origin</code> in JavaScript, and use the
subdomain to determine the NFT, fetch it from chain, and use its internal fields to modify the
displayed site.</p>
<p>For an end-to-end example, see the <code>flatland</code>
<a href="https://github.com/MystenLabs/example-walrus-sites/tree/main/flatland">repo</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="technical-overview"><a class="header" href="#technical-overview">Technical Overview</a></h1>
<p>In the following sections, we delve deeper in the technical specification of Walrus Sites.</p>
<h2 id="high-level-picture"><a class="header" href="#high-level-picture">High-level picture</a></h2>
<p>Walrus Sites are enabled by Sui and Walrus. The resources of the Walrus Site (<code>html</code>, <code>css</code>, <code>js</code>,
images, etc.) are stored on Walrus, while the main entry point to it is an object stored on Sui,
which contains the metadata for the site and point to the Walrus blob IDs.</p>
<h3 id="the-walrus-sites-objects-on-sui"><a class="header" href="#the-walrus-sites-objects-on-sui">The Walrus Sites objects on Sui</a></h3>
<p>A Walrus <code>Site</code> is represented on Sui as a very simple object:</p>
<pre><code class="language-move">struct Site has key, store {
    id: UID,
    name: String,
}
</code></pre>
<p>The resources associated with this site are then added to this object as <a href="https://docs.sui.io/concepts/versioning#dynamic-fields">dynamic
fields</a> of type <code>Resource</code>:</p>
<pre><code class="language-move">struct Resource has store, drop {
    path: String,
    // The walrus blob id containing the bytes for this resource
    blob_id: u256,
    ⋮
}
</code></pre>
<p>Importantly, each resource contains:</p>
<ul>
<li>the <code>path</code> of the resource, for example <code>/index.html</code> (all the paths are always represented as
starting from root <code>/</code>);</li>
<li>the <code>blob_id</code>, which is the Walrus blob ID where the resource can be found; and</li>
<li>additional fields, that will be explained later in the documentation.</li>
</ul>
<p>These <code>Resource</code> dynamic fields are keyed with a struct of type <code>ResourcePath</code></p>
<pre><code class="language-move">struct ResourcePath has copy, store, drop {
    path: String,
}
</code></pre>
<p>This struct just holds the string of the path (<code>/index.html</code>); having a separate type ensures that
we will not have namespace collisions with other dynamic fields, possibly added by other packages.</p>
<p>To see this in action, look at <a href="https://suiscan.xyz/testnet/object/0xd20b90149409ba5d005d4a2cd981db9494bc3cdb2f04c47ca1af98dd8f71610a">a Walrus Site in the
explorer</a>,
and check its dynamic fields.</p>
<h3 id="the-site-rendering-path"><a class="header" href="#the-site-rendering-path">The site rendering path</a></h3>
<p>Given the Sui object ID of a Walrus Site, it is easy to look up the resources that compose it
by looking at the dynamic fields, and then fetch these resources from Walrus using the blob ID
contained in the <code>Resource</code> struct.</p>
<p>The only outstanding question is, therefore, how to perform these lookups on the client. A few
approaches are possible:</p>
<ul>
<li>Having a server that accepts requests for a Sui object ID and possibly a path, and performs this
resolution on behalf of the client, serving back the resource as a standard HTML Response.</li>
<li>Using a custom application on the client that has both a web browser and knowledge of how Walrus
Sites work, and can locally perform this resolution.</li>
<li>A hybrid approach based on service workers, where a service worker that is able to perform the
resolution is installed in the browser from a portal.</li>
</ul>
<p>All of these approaches are viable (the first has been used for similar applications in IPFS
gateways, for example), and have trade-offs.</p>
<p>Currently, we provide the server-side and the service-worker based approaches.</p>
<h3 id="browsing-and-domain-isolation"><a class="header" href="#browsing-and-domain-isolation">Browsing and domain isolation</a></h3>
<p>We must ensure that, when browsing multiple sites through a portal, for example the one hosted at
<a href="https://walrus.site">https://walrus.site</a>, these sites are isolated. Isolation is necessary for security, and to ensure
that the wallet connection in the browser works as expected.</p>
<p>To do so, we give each Walrus Site a specific <em>subdomain</em> of the portal's domain. For example, the
Flatland mint dApp is hosted at <a href="https://flatland.walrus.site">https://flatland.walrus.site</a>, where the subdomain <code>flatland</code> is
uniquely associated to the object ID of the Walrus Site through SuiNS.</p>
<p>Walrus Sites also work without SuiNS: a site can <em>always</em> be browsed by using as subdomain the
Base36 encoding of the Sui object ID of the site. For the Flatland dApp, this URL is:
<a href="https://58gr4pinoayuijgdixud23441t55jd94ugep68fsm72b8mwmq2.walrus.site">https://58gr4pinoayuijgdixud23441t55jd94ugep68fsm72b8mwmq2.walrus.site</a>.</p>
<p>Base36 was chosen for two reasons, forced by the subdomain standards:</p>
<ol>
<li>A subdomain can have at most 63 characters, while a Hex-encoded Sui object ID requires 64.</li>
<li>A subdomain is case <em>insensitive</em>, ruling out other popular encodings, e.g., Base64 or Base58.</li>
</ol>
<h2 id="walrus-site-portals"><a class="header" href="#walrus-site-portals">Walrus Site portals</a></h2>
<h3 id="portal-types"><a class="header" href="#portal-types">Portal types</a></h3>
<p>As mentioned before, we provide two types of portals to browse Walrus Sites:</p>
<ul>
<li>The server-side portal, which is a server that resolves a Walrus Site, returning it to the
browser. The server-side portal is hosted at <a href="https://walrus.site">https://walrus.site</a>.</li>
<li>The service-worker portal, which is a service worker that is installed in the browser and
resolves a Walrus Site. The service-worker portal is no longer hosted at a specific domain, but
the code is still maintained so that it can be used by anyone.</li>
</ul>
<p>We now show in greater detail how a Walrus Site is rendered in a client's browser using a generic
portal. Depending on the different type of portal, some details may differ, but the general picture
remains unchanged.</p>
<h3 id="the-end-to-end-resolution-of-a-walrus-site"><a class="header" href="#the-end-to-end-resolution-of-a-walrus-site">The end-to-end resolution of a Walrus Site</a></h3>
<p>The steps below all reference the following figure:</p>
<p><img src="walrus-sites/../assets/walrus-sites-portal-diagram.svg" alt="Walrus Site resolution" /></p>
<ul>
<li><strong>Site publishing</strong> (step 0): The site developer publishes the Walrus Site using the
<a href="walrus-sites/overview.html#the-site-builder"><code>site-builder</code></a>, or making use of a publisher. Assume the developer uses the
SuiNS name <code>dapp.sui</code> to point to the object ID of the created Walrus Site.</li>
<li><strong>Browsing starts</strong> (step 1): A client browses <code>dapp.walrus.site/index.html</code> in their browser.</li>
<li><strong>Site resolution</strong> (steps 2-6): The portal interprets its <em>origin</em> <code>dapp.walrus.site</code>, and makes
a SuiNS resolution for <code>dapp.sui</code>, obtaining the related object ID. Using the object ID, it then
fetches the dynamic fields of the object (also checking <a href="walrus-sites/./portal.html">redirects</a>). From the
dynamic fields, it selects the one for <code>/index.html</code>, and extracts its Walrus blob ID and headers
(see the <a href="walrus-sites/./routing.html">advanced section on headers</a>).</li>
<li><strong>Blob fetch</strong> (steps 7-11): Given the blob ID, the portal queries a Walrus aggregator for the
blob data.</li>
<li><strong>Returning the response</strong> (steps 12-13): Now that the portal has the bytes for <code>/index.html</code>, and
its headers, it can craft a response that is then rendered by the
browser.</li>
</ul>
<p>These steps are executed for all resources the browser may query thereafter (for example, if
<code>/index.html</code> points to <code>assets/cat.png</code>).</p>
<h2 id="the-site-builder"><a class="header" href="#the-site-builder">The site builder</a></h2>
<p>To facilitate the creation of Walrus Sites, we provide the "site builder" tool. The site builder
takes care of creating Walrus Sites object on Sui, with the correct structure, and stores the site
resources to Walrus. Refer to the <a href="walrus-sites/./tutorial.html">tutorial</a> for setup and usage instructions.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="the-walrus-sites-portal"><a class="header" href="#the-walrus-sites-portal">The Walrus Sites portal</a></h1>
<p>We use the term "portal" to indicate any technology that is used to access and browse Walrus Sites.
As mentioned in the <a href="walrus-sites/./overview.html#the-site-rendering-path">overview</a>, we foresee three kinds of
portals:</p>
<ol>
<li>server-side portals;</li>
<li>custom local apps; and</li>
<li>service-worker based portals residing in the browser.</li>
</ol>
<p>Currently, only a server-side portal is served at <a href="https://walrus.site">https://walrus.site</a>.</p>
<div id="admonition-hosting-of-the-service-worker" class="admonition admonish-note" role="note" aria-labelledby="admonition-hosting-of-the-service-worker-title">
<div class="admonition-title">
<div id="admonition-hosting-of-the-service-worker-title">
<p>Hosting of the service worker</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/portal.html#admonition-hosting-of-the-service-worker"></a>
</div>
<div>
<p>In the past, the service-worker based portal was hosted at <a href="https://walrus.site">https://walrus.site</a> and the
server-portal at <a href="https://blob.store">https://blob.store</a>. This is no longer the case.</p>
<p>The service-worker portal is no longer hosted, but you can still run it locally. Its code is
available in the <code>walrus-sites</code> repository. For more information, see
<a href="walrus-sites/portal.html#running-the-portal-locally">running the portal locally</a>.</p>
<p>The old domain, <code>blob.store</code> is currently an alias for <code>walrus.site</code> but will be removed in the
future.</p>
</div>
</div>
<div id="admonition-walrus-sites-stable-branch" class="admonition admonish-danger" role="note" aria-labelledby="admonition-walrus-sites-stable-branch-title">
<div class="admonition-title">
<div id="admonition-walrus-sites-stable-branch-title">
<p>Walrus Sites stable branch</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/portal.html#admonition-walrus-sites-stable-branch"></a>
</div>
<div>
<p>The stable branch of Walrus Sites is <code>testnet</code>.</p>
</div>
</div>
<h2 id="running-a-local-portal"><a class="header" href="#running-a-local-portal">Running a local portal</a></h2>
<p>You can run a portal locally if you want to browse Walrus Sites without accessing
external portals or for development purposes.</p>
<p>Let's start by cloning the <code>walrus-sites</code> repository:</p>
<pre><code class="language-bash">git clone https://github.com/MystenLabs/walrus-sites.git
cd walrus-sites
</code></pre>
<p>Make sure you are on the stable branch:</p>
<pre><code class="language-sh">git checkout testnet
</code></pre>
<p>Next, we will see how to configure the portal and then what options are available
to run it locally.</p>
<h3 id="configuration-2"><a class="header" href="#configuration-2">Configuration</a></h3>
<p>Portal configuration is managed through two key elements:</p>
<ul>
<li>Environment variables: Required for basic functionality.</li>
<li>Constants file: Optional for advanced customization.</li>
</ul>
<h4 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h4>
<p>The environment variables are set in the <code>.env.local</code> file at the root of each portal directory.
To just run a simple instance of a portal, you can use the environment variables specified
in the <code>.env.example</code> file:</p>
<pre><code class="language-sh">cp ./portal/server/.env.example ./portal/server/.env.local
</code></pre>
<p>Likewise, if you want to run the service-worker portal, you can copy the <code>.env.example</code> file to
<code>.env.local</code> in the <code>portal/worker</code> directory.</p>
<pre><code class="language-sh">cp ./portal/worker/.env.example ./portal/worker/.env.local
</code></pre>
<h4 id="constants"><a class="header" href="#constants">Constants</a></h4>
<p>You can find the <code>constants.ts</code> file in the <code>portal/common/lib</code> directory. It holds key
configuration parameters for the portal. Typically, you won't need to modify these, but if you do,
here are the explanations for each parameter:</p>
<ul>
<li><code>MAX_REDIRECT_DEPTH</code>: The number of <a href="walrus-sites/./redirects.html">redirects</a> the portal will follow
before stopping.</li>
<li><code>SITE_NAMES</code>: Hard coded <code>name: objectID</code> mappings, to override the SuiNS names. For development
only. Use this at your own risk, may render some sites with legitimate SuiNS names unusable.</li>
<li><code>FALLBACK_PORTAL</code>: This is related only to the service worker portal. The fallback portal should
be a server side portal that is used in cases where some browsers do not support service workers.</li>
</ul>
<h3 id="deploying-the-portal"><a class="header" href="#deploying-the-portal">Deploying the Portal</a></h3>
<p>To run the portal locally you can either use a Docker container or a local development environment.</p>
<p>You can run the portal via Docker for a quick setup, or use a local development environment if you
want to modify the code or contribute to the project.</p>
<h4 id="docker"><a class="header" href="#docker">Docker</a></h4>
<p>First, make sure you have Docker installed on your system.</p>
<pre><code class="language-sh">docker --version`
</code></pre>
<p>If it is not installed, follow the instructions on the <a href="https://docs.docker.com/get-docker/">Docker website</a>.</p>
<p>Then, build the Docker image with:</p>
<pre><code class="language-sh">docker build -f portal/docker/server/Dockerfile -t server-portal . --build-arg ENABLE_SENTRY=false --no-cache
</code></pre>
<p>Finally, run the Docker container:</p>
<pre><code class="language-sh">docker run -p 3000:3000 server-portal --env-file ./portal/server/.env.local
</code></pre>
<p>Browse the sites at <code>localhost:3000</code>.</p>
<h4 id="local-development"><a class="header" href="#local-development">Local Development</a></h4>
<p>This requires having the <a href="https://bun.sh/"><code>bun</code></a> tool installed:</p>
<p>Check if bun is installed with:</p>
<pre><code class="language-sh">bun --version
</code></pre>
<p>If not installed, run the following command:</p>
<pre><code class="language-sh">curl -fsSL https://bun.sh/install | bash
</code></pre>
<p>Install the dependencies:</p>
<pre><code class="language-sh">cd portal
bun install
</code></pre>
<p>To run a server-side portal:</p>
<pre><code class="language-sh">bun run server
</code></pre>
<p>To run a service-worker portal:</p>
<pre><code class="language-sh">bun build:worker
bun run worker
</code></pre>
<p>To serve one of the portals. Typically, you will find it served at <code>localhost:3000</code> (for the server
side portal) or <code>localhost:8080</code> for the service worker (but check the output of the serve
command).</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="site-data-authentication"><a class="header" href="#site-data-authentication">Site data authentication</a></h1>
<p>Walrus Sites offer a simple mechanism to authenticate the data that is served from the Walrus
storage on the client side. Thus, Walrus Sites can guarantee (with various degrees of confidence,
depending on the setup) that the site data is authentic and has not been tampered with by a
malicious aggregator.</p>
<h2 id="authentication-mechanism"><a class="header" href="#authentication-mechanism">Authentication mechanism</a></h2>
<p>The Walrus Sites resource object on Sui stores, alongside the resource information, a SHA-256 hash
of the resource's content.</p>
<p>When the client requests a resource, the portal will check that the hash of the data received from
the Walrus storage (and the Walrus aggregator in particular) matches the hash stored on Sui.</p>
<p>If the hashes do not match, the portal will return the following warning page:</p>
<p><img src="walrus-sites/../assets/walrus-sites-hash-mismatch.png" alt="Hash mismatch warning page" /></p>
<h2 id="authentication-guarantees"><a class="header" href="#authentication-guarantees">Authentication Guarantees</a></h2>
<p>Depending on the type of deployment, this technique gives increasing levels of confidence that the
site data is authentic. We list them here in increasing order of assurance.</p>
<h3 id="remote-server-side-portal-deployment"><a class="header" href="#remote-server-side-portal-deployment">Remote server-side portal deployment</a></h3>
<p>In this case, the user must fully trust the portal provider to authenticate the data. With a trusted
portal, the authentication mechanism guarantees that the aggregator or cache (from which the blob
has been fetched) did not tamper with the contents of the blob.</p>
<h3 id="remote-service-worker-portal-deployment"><a class="header" href="#remote-service-worker-portal-deployment">Remote service-worker portal deployment</a></h3>
<p>Here, the portal provider is only trusted to provide the correct service worker code to the user.
The user's browser will then perform the fetching and authentication. The guarantees are therefore
the same as with the remote server-side portal, with the addition that the user can inspect the code
returned by the portal provider and verify its integrity (e.g., by comparing it the hash of the
service worker code to one that is known to be correct).</p>
<h3 id="local-portal-deployment"><a class="header" href="#local-portal-deployment">Local portal deployment</a></h3>
<p>Finally, a user can clone the Walrus Sites repository and deploy a portal locally, browsing Walrus
Sites through <code>localhost</code>. In this case, the user has full control over the portal code and can
verify its operation. Therefore, they can fully authenticate that the data served by Walrus and
Walrus Sites is what the original developer intended.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="known-restrictions"><a class="header" href="#known-restrictions">Known restrictions</a></h1>
<p>Walrus Sites can be used to deploy almost any form of traditional static web2 website build for
modern browsers. There are, however, a number of restrictions that a developer should keep in mind
when creating or porting a website to Walrus Sites.</p>
<h2 id="no-secret-values"><a class="header" href="#no-secret-values">No secret values</a></h2>
<p>Walrus Sites are fully publicly accessible, as the metadata is stored on Sui, and the site content
is stored on Walrus. Therefore, developers <em>must not</em> store secret values within the sites.</p>
<p>We emphasize again that any such backend-specific operations (storing secret values, authentication,
etc.) are achievable by leveraging the integration with the Sui blockchain and a Sui-compatible
wallet.</p>
<h2 id="there-is-a-maximum-redirect-depth"><a class="header" href="#there-is-a-maximum-redirect-depth">There is a maximum redirect depth</a></h2>
<p>The number of consecutive redirects a Walrus Site can perform is capped by the
portal (see <a href="walrus-sites/./portal.html">Portal configuration</a>). This measure ensures that loading a Walrus Site
does not result in an infinite loading loop.</p>
<p>Different portals can set this limit as they desire. The limit for the portal hosted at
<a href="https://walrus.site">https://walrus.site</a> has a maximum redirect depth of 3.</p>
<h2 id="service-worker-portal-limitations"><a class="header" href="#service-worker-portal-limitations">Service-worker portal limitations</a></h2>
<p>The following limitations only apply to portals based on service workers.</p>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/restrictions.html#admonition-tip"></a>
</div>
<div>
<p>If you need to support any of the features listed below, you should use a server-side portal.</p>
</div>
</div>
<h3 id="service-worker-portals-cant-serve-sites-based-on-service-workers"><a class="header" href="#service-worker-portals-cant-serve-sites-based-on-service-workers">Service-worker portals, can't serve sites based on service workers</a></h3>
<p>Service-worker portals leverage service workers in the clients' browsers to perform essential
operations:</p>
<ol>
<li>reading the site metadata from Sui;</li>
<li>fetching the page content from Walrus; and</li>
<li>serving the content to the browser.</li>
</ol>
<p>Therefore, a site accessed by a service-worker portal cannot use service workers itself. i.e.
you can't "stack" service workers! Installing a service worker from within a Walrus Site will
result in a dysfunctional site and a poor experience for the user.</p>
<h3 id="ios-sui-mobile-wallets-do-not-work-with-the-service-worker-portal"><a class="header" href="#ios-sui-mobile-wallets-do-not-work-with-the-service-worker-portal">iOS Sui mobile wallets do not work with the service-worker portal</a></h3>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/restrictions.html#admonition-warning"></a>
</div>
<div>
<p>This limitation <strong>only applies to portal based on service workers</strong>. If you need to access sites
that support this feature, you should use a server-side portal.</p>
</div>
</div>
<p>Service workers cannot be loaded inside an in-app browser on iOS, because of a limitation of the
WebKit engine. As a consequence, Walrus Sites that are accessed through a service worker portal
cannot be used within Sui-compatible wallet apps on iOS. Therefore, Sui wallets cannot currently
be used on a service-worker portal on iOS. Note, however, that <em>browsing</em> a Walrus Site is still
possible on iOS through any browser.</p>
<p>Given that you decided to use a service-worker portal as your main point of access to your sites,
to provide a seamless experience for iOS users (and other users on browsers that do not support
service workers), it is recommended to redirect to a server-side portal (<a href="https://walrus.site">https://walrus.site</a>).
Whenever a user on an iOS wallet browses a Walrus Site, the redirect will automatically take them
to the <code>&lt;site_name&gt;.walrus.site</code> server-side portal. This way, the user can still use the wallet.</p>
<h3 id="service-worker-portals-do-not-support-progressive-web-apps-pwas"><a class="header" href="#service-worker-portals-do-not-support-progressive-web-apps-pwas">Service worker portals do not support progressive web apps (PWAs)</a></h3>
<div id="admonition-warning-1" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-1-title">
<div class="admonition-title">
<div id="admonition-warning-1-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/restrictions.html#admonition-warning-1"></a>
</div>
<div>
<p>This limitation <strong>only applies to portal based on service workers</strong>. If you need to access sites
that support this feature, you should use a server-side portal.</p>
</div>
</div>
<p>With the current design, service-worker portals cannot be used to access progressive web apps
(PWAs).</p>
<p>Two characteristics of the service-worker portal prevent support for PWAs:</p>
<ul>
<li>Since the service worker needs to be registered for the page to work, the PWA's manifest file
cannot be loaded by the browser directly.</li>
<li>There can only be one service worker registered per origin. Therefore, registering a PWA's service
worker would remove the Walrus Sites service worker, breaking Walrus Sites' functionality.</li>
</ul>
<p>Note that the server-side portal does not share these limitations. However, for the moment, we
support both technologies: Walrus Sites must be able to load from both a service-worker portal and a
server-side portal, and therefore have to be built with the more restrictive feature set. For more
details, see the <a href="https://en.wikipedia.org/wiki/Progressive_web_app#Installation_criteria">installation requirements for
PWAs</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<!-- markdownlint-disable -->
<h1 id="walrus-sites---terms-of-service"><a class="header" href="#walrus-sites---terms-of-service">Walrus Sites - TERMS of SERVICE</a></h1>
<p>Last Updated: June 18, 2024</p>
<p>These Terms of Service (“<strong>Terms</strong>”) govern your use of certain software services, including Walrus
Sites provided by Mysten Labs, Inc. (“<strong>Mysten Labs</strong>”) (collectively the "<strong>Services</strong>"). By
accessing the Services, you agree to and accept these terms and conditions. If you don’t agree to be
bound by these Terms, do not use the Services.</p>
<p>IMPORTANT NOTICE REGARDING ARBITRATION FOR U.S. CUSTOMERS: WHEN YOU AGREE TO THESE TERMS YOU ARE
AGREEING (WITH LIMITED EXCEPTION) TO RESOLVE ANY DISPUTE BETWEEN YOU AND MYSTEN LABS THROUGH
BINDING, INDIVIDUAL ARBITRATION RATHER THAN IN COURT. PLEASE REVIEW CAREFULLY SECTION XIV “DISPUTE
RESOLUTION” BELOW FOR DETAILS REGARDING ARBITRATION.</p>
<h2 id="i-privacy-policy"><a class="header" href="#i-privacy-policy">I. Privacy Policy</a></h2>
<p>Please review our <a href="walrus-sites/../legal/privacy.html">Privacy Policy</a>, which also governs your use of the
Services, for information on how we collect, use and share your information. By using the Services
you agree to be bound by our Privacy Policy.</p>
<h2 id="ii-eligibility"><a class="header" href="#ii-eligibility">II. Eligibility</a></h2>
<p>You may use the Services only if you are 18 years or older and capable of forming a binding contract
with Mysten Labs, and not otherwise barred from using the Services under applicable law, including
applicable U.S. and non-U.S. export control and trade sanctions laws.</p>
<h2 id="iii-walrus-sites"><a class="header" href="#iii-walrus-sites">III. Walrus Sites</a></h2>
<p>The Services allow you access website resources (“<strong>Stored Objects</strong>”) that are stored in the Walrus
Store and linked by the Sui blockchain. In providing the Services, Mysten Labs provides you with a
means to access the Stored Objects, but Mysten Labs does not process the Stored Objects
directly. Mysten Labs has no responsibility to screen or moderate Stored Objects accessible via the
Services. Stored Objects are developed by people over whom Mysten Labs exercises no control. The
Services may provide you with access to Stored Objects that some people find objectionable,
inappropriate, or offensive. We assume no responsibility for the content of Stored Objects accessed
through the Services.</p>
<h2 id="iv-service-conditions-and-disclaimers"><a class="header" href="#iv-service-conditions-and-disclaimers">IV. Service Conditions and Disclaimers</a></h2>
<ol>
<li>
<p><u>Fees</u>. We may charge fees for some or part of the Services we make available to you. We
reserve the right to change those fees at any time, in our sole and absolute discretion.</p>
</li>
<li>
<p><u>Acknowledgment of Certain Risks; Disclaimers</u>. Mysten Labs disclaims any and all
responsibility or liability for the accuracy, content, completeness, legality, reliability, or
operability or availability of information or material accessed via the Services. Mysten Labs
disclaims any responsibility for the deletion, failure to store, misdelivery, or untimely
delivery of any information or material. Mysten Labs disclaims any responsibility for any harm
resulting from accessing any information or material on any blockchain through the Services. YOU
UNDERSTAND AND AGREE THAT YOU DOWNLOAD OR OTHERWISE OBTAIN MATERIAL OR DATA THROUGH THE USE OF
THE SERVICES AT YOUR OWN DISCRETION AND RISK AND THAT YOU WILL BE SOLELY RESPONSIBLE FOR ANY
DAMAGES TO YOUR COMPUTER SYSTEM OR LOSS OF DATA THAT RESULTS IN THE DOWNLOAD OF SUCH MATERIAL OR
DATA.</p>
<p>The Services could be impacted by one or more regulatory inquiries or regulatory actions, which
could impede or limit the ability of Mysten Labs to continue to make its proprietary software,
and thus, could impede or limit your ability to continue to use the Services.</p>
<p>You understand that the Walrus Store and Sui blockchain (and all other networks with which the
Services may be compatible) remain under development, which creates technological and security
risks when using the Services in addition to uncertainty relating to Digital Assets and
transactions therein. You acknowledge that the cost of transacting on the Sui blockchain is
variable and may increase at any time, thereby impacting any activities taking place on the Sui
blockchain, which may result in price fluctuations or increased prices for using the Services.</p>
<p>The Services are provided to you "as-is" and "with all faults." We make no warranties or
representations regarding the functionality, quality, or fitness for a particular purpose of the
Services. By using the Services, you acknowledge and agree to the following:</p>
<ol>
<li>Mysten Labs disclaims all warranties, whether express, implied, or statutory, including but
not limited to any warranties of merchantability, non-infringement, and fitness for a
particular purpose.</li>
<li>Mysten Labs does not guarantee that the Services will be free from errors, bugs, or
interruptions in service, including failed transactions for which you have paid associated gas
fees. Any use of the Services is at your own risk.</li>
<li>Mysten Labs shall not be liable for any direct, indirect, incidental, special, or
consequential damages, whether arising from the use of the Services or any inability to use
the Services, even if Mysten Labs has been advised of the possibility of such damages.</li>
<li>It is your responsibility to evaluate the accuracy, completeness, and usefulness of any
information, content, or data provided by the Services.</li>
<li>Mysten Labs is under no obligation to provide support, maintenance, updates, or fixes for the
Services.</li>
<li>Mysten Labs is not obligated to correct or address any errors, defects, or issues identified
in the Services.</li>
<li>Mysten Labs may change, update, or discontinue the Services at any time without notice.</li>
<li>Your use of the Services indicates your acceptance of the risk associated with its use.</li>
</ol>
</li>
</ol>
<h2 id="v-ownership"><a class="header" href="#v-ownership">V. Ownership</a></h2>
<p>We grant you a limited, non-exclusive, revocable, non-transferable, non-sublicensable license to use
the Services, only as authorized in these Terms. We reserve all rights not expressly granted to you
in these Terms. The Services are protected by copyright, trademark, patent, and other laws of the
United States and other countries. We own all rights, title, interest in and to the Services and all
copies of the Services. These Terms do not grant you any rights to our trademarks or service marks.</p>
<p>You may submit feedback, comments, or ideas about the Services (“<strong>Ideas</strong>”). Submitting Ideas is
entirely voluntary, and we will be free to use such Ideas as we see fit and without any obligation
to you.</p>
<h2 id="vi-general-prohibitions-and-mysten-labss-enforcement-rights"><a class="header" href="#vi-general-prohibitions-and-mysten-labss-enforcement-rights">VI. General Prohibitions and Mysten Labs’s Enforcement Rights.</a></h2>
<p>You agree not to do any of the following:</p>
<ol>
<li>Use, display, mirror or frame the Services or any individual element within the Services, Mysten
Labs’s name, any Mysten Labs trademark, logo or other proprietary information, or the layout and
design of any page or form contained on a page, without Mysten Labs’s express written consent;</li>
<li>Access, tamper with, or use non-public areas of the Services, Mysten Labs’s computer systems, or
the technical delivery systems of Mysten Labs’s providers;</li>
<li>Attempt to probe, scan or test the vulnerability of any Mysten Labs system or network or breach
any security or authentication measures;</li>
<li>Avoid, bypass, remove, deactivate, impair, descramble or otherwise circumvent any technological
measure implemented by Mysten Labs or any of Mysten Labs’s providers or any other third party
(including another user) to protect the Services;</li>
<li>Attempt to access or search the Services or download content from the Services using any engine,
software, tool, agent, device or mechanism (including spiders, robots, crawlers, data mining
tools or the like) other than the software and/or search agents provided by Mysten Labs or other
generally available third-party web browsers;</li>
<li>Send any unsolicited or unauthorized advertising, promotional materials, email, junk mail, spam,
chain letters or other form of solicitation;</li>
<li>Use any meta tags or other hidden text or metadata utilizing a Mysten Labs trademark, logo URL or
product name without Mysten Labs’s express written consent;</li>
<li>Use the Services, or any portion thereof, for any commercial purpose or for the benefit of any
third party or in any manner not permitted by these Terms;</li>
<li>Forge any TCP/IP packet header or any part of the header information in any email or newsgroup
posting, or in any way use the Services to send altered, deceptive or false source-identifying
information;</li>
<li>Attempt to decipher, decompile, disassemble or reverse engineer any of the software used to
provide the Services;</li>
<li>Interfere with, or attempt to interfere with, the access of any user, host or network,
including, without limitation, sending a virus, overloading, flooding, spamming, or mail-bombing
the Services;</li>
<li>Collect or store any personally identifiable information from the Services from other users of
the Services without their express permission;</li>
<li>Impersonate or misrepresent your affiliation with any person or entity;</li>
<li>Violate any applicable law or regulation; or</li>
<li>Encourage or enable any other individual to do any of the foregoing. Mysten Labs is not obligated
to monitor access to or use of the Services or to review or edit any content. However, we have
the right to do so for the purpose of operating the Services, to ensure compliance with these
Terms and to comply with applicable law or other legal requirements. We reserve the right, but
are not obligated, to remove or disable access to any content, at any time and without notice,
including, but not limited to, if we, at our sole discretion, consider it objectionable or in
violation of these Terms.</li>
</ol>
<p>We have the right to investigate violations of these Terms or conduct that affects the Services. We may also consult and cooperate with law enforcement authorities to prosecute users who violate the law.</p>
<h2 id="vii-dmcacopyright-policy"><a class="header" href="#vii-dmcacopyright-policy">VII. DMCA/Copyright Policy</a></h2>
<p>Mysten Labs respects copyright law and expects its users to do the same. It is Mysten Labs’ policy
to terminate in appropriate circumstances users who repeatedly infringe or are believed to be
repeatedly infringing the rights of copyright holders.</p>
<h2 id="viii-sanctions"><a class="header" href="#viii-sanctions">VIII. Sanctions</a></h2>
<p>Without limiting the foregoing, you may not download or use the Services if (i) you are in, under
the control of, or a national or resident of Cuba, Iran, North Korea, Syria or any other country
subject to United States embargo, or if you are on the U.S. Treasury Department's Specially
Designated Nationals List or the U.S. Commerce Department's Denied Persons List, Unverified List, or
Entity List; or (ii) you intend to supply any Services to Cuba, Iran, North Korea, Sudan or Syria or
any other country subject to United States embargo (or a national or resident of one of these
countries), or to a person on the Specially Designated Nationals List, Denied Persons List,
Unverified List, or Entity List.</p>
<h2 id="ix-termination"><a class="header" href="#ix-termination">IX. Termination</a></h2>
<p>We may suspend or terminate your access to and use of the Services, including suspending access to
or terminating your account, at our sole discretion, at any time and without notice to you. You may
cancel your account, if you have one, at any time by removing the Wallet web browser extension and
ceasing any and all use of the Services. Upon any termination, discontinuation or cancellation of
the Services or your account, the following Sections will survive: VIII and IX- XV</p>
<h2 id="x-warranty-disclaimers"><a class="header" href="#x-warranty-disclaimers">X. Warranty Disclaimers</a></h2>
<p>THE SERVICES ARE PROVIDED “AS IS,” WITHOUT WARRANTY OF ANY KIND. WITHOUT LIMITING THE FOREGOING, WE
EXPLICITLY DISCLAIM ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,
QUIET ENJOYMENT AND NON-INFRINGEMENT, AND ANY WARRANTIES ARISING OUT OF COURSE OF DEALING OR USAGE
OF TRADE. We make no warranty that the Services will meet your requirements, will function as
intended, will be free from bugs or errors, or be available on an uninterrupted, secure, or
error-free basis. We make no warranty regarding the quality, accuracy, timeliness, truthfulness,
completeness or reliability of any information or content on the Services. We may modify or
terminate the Services at any time, with or without notice to you.</p>
<h2 id="xi-indemnity"><a class="header" href="#xi-indemnity">XI. Indemnity</a></h2>
<p>You will indemnify and hold Mysten Labs and its officers, directors, employees and agents, harmless
from and against any claims, disputes, demands, liabilities, damages, losses, and costs and
expenses, including, without limitation, reasonable legal and accounting fees arising out of or in
any way connected with (a) your access to or use of the Services, (b) your User Content, or (c) your
violation of these Terms.</p>
<h2 id="xii-limitation-of-liability"><a class="header" href="#xii-limitation-of-liability">XII. Limitation of Liability</a></h2>
<ol>
<li>TO THE MAXIMUM EXTENT PERMITTED BY LAW, NEITHER MYSTEN LABS NOR ITS SERVICE PROVIDERS INVOLVED IN
CREATING, PRODUCING, OR DELIVERING THE SERVICES WILL BE LIABLE FOR ANY INCIDENTAL, SPECIAL,
EXEMPLARY OR CONSEQUENTIAL DAMAGES, OR DAMAGES FOR LOST PROFITS, LOST REVENUES, LOST SAVINGS,
LOST BUSINESS OPPORTUNITY, LOSS OF DATA OR GOODWILL, SERVICE INTERRUPTION, COMPUTER DAMAGE OR
SYSTEM FAILURE OR THE COST OF SUBSTITUTE SERVICES OF ANY KIND ARISING OUT OF OR IN CONNECTION
WITH THESE TERMS OR FROM THE USE OF OR INABILITY TO USE THE SERVICES, WHETHER BASED ON WARRANTY,
CONTRACT, TORT (INCLUDING NEGLIGENCE), PRODUCT LIABILITY OR ANY OTHER LEGAL THEORY, AND WHETHER
OR NOT MYSTEN LABS OR ITS SERVICE PROVIDERS HAVE BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGE,
EVEN IF A LIMITED REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE.</li>
<li>TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT WILL MYSTEN LABS’ TOTAL LIABILITY ARISING OUT
OF OR IN CONNECTION WITH THESE TERMS OR FROM THE USE OF OR INABILITY TO USE THE SERVICES EXCEED
THE AMOUNTS YOU HAVE PAID OR ARE PAYABLE BY YOU TO MYSTEN LABS FOR USE OF THE SERVICES OR ONE
HUNDRED DOLLARS ($100), IF YOU HAVE NOT HAD ANY PAYMENT OBLIGATIONS TO MYSTEN LABS, AS
APPLICABLE.</li>
<li>THE EXCLUSIONS AND LIMITATIONS OF DAMAGES SET FORTH ABOVE ARE FUNDAMENTAL ELEMENTS OF THE BASIS
OF THE BARGAIN BETWEEN MYSTEN LABS AND YOU.</li>
</ol>
<h2 id="xiii-governing-law-and-forum-choice"><a class="header" href="#xiii-governing-law-and-forum-choice">XIII. Governing Law and Forum Choice.</a></h2>
<p>These Terms and any action related thereto will be governed by the Federal Arbitration Act, federal
arbitration law, and the laws of the State of California, without regard to its conflict of laws
provisions. Except as otherwise expressly set forth in Section XVII “Dispute Resolution,” the
exclusive jurisdiction for all Disputes (defined below) that you and Mysten Labs are not required to
arbitrate will be the state and federal courts located in the County of Santa Clara, and you and
Mysten Labs each waive any objection to jurisdiction and venue in such courts.</p>
<h2 id="xiv-dispute-resolution"><a class="header" href="#xiv-dispute-resolution">XIV. Dispute Resolution</a></h2>
<ol>
<li><u>Mandatory Arbitration of Disputes</u>. We each agree that any dispute, claim or controversy
arising out of or relating to these Terms or the breach, termination, enforcement, interpretation
or validity thereof or the use of the Services (collectively, “Disputes”) will be resolved solely
by binding, individual arbitration and not in a class, representative or consolidated action or
proceeding. You and Mysten Labs agree that the U.S. Federal Arbitration Act governs the
interpretation and enforcement of these Terms, and that you and Mysten Labs are each waiving the
right to a trial by jury or to participate in a class action. This arbitration provision shall
survive termination of these Terms.</li>
<li><u>Exceptions</u>. As limited exceptions to Section XVII(A) above: (i) we both may seek to
resolve a Dispute in small claims court if it qualifies; and (ii) we each retain the right to seek
injunctive or other equitable relief from a court to prevent (or enjoin) the infringement or
misappropriation of our intellectual property rights.</li>
<li><u>Conducting Arbitration and Arbitration Rules</u>. The arbitration will be conducted by the
American Arbitration Association (“AAA”) under its Consumer Arbitration Rules (the “AAA Rules”)
then in effect, except as modified by these Terms. The AAA Rules are available at www.adr.org or
by calling 1-800-778-7879. A party who wishes to start arbitration must submit a written Demand
for Arbitration to AAA and give notice to the other party as specified in the AAA Rules. The AAA
provides a form Demand for Arbitration at <a href="http://www.adr.org"><u>www.adr.org</u></a>. Any
arbitration hearings will take place in the county (or parish) where you live, unless we both
agree to a different location. The parties agree that the arbitrator shall have exclusive
authority to decide all issues relating to the interpretation, applicability, enforceability and
scope of this arbitration agreement.</li>
<li><u>Arbitration Costs</u>. Payment of all filing, administration and arbitrator fees will be
governed by the AAA Rules, and we won’t seek to recover the administration and arbitrator fees we
are responsible for paying, unless the arbitrator finds your Dispute frivolous. If we prevail in
arbitration we’ll pay all of our attorneys’ fees and costs and won’t seek to recover them from
you. If you prevail in arbitration you will be entitled to an award of attorneys’ fees and
expenses to the extent provided under applicable law.</li>
<li><u>Injunctive and Declaratory Relief</u>. Except as provided in Section XIV(B) above, the
arbitrator shall determine all issues of liability on the merits of any claim asserted by either
party and may award declaratory or injunctive relief only in favor of the individual party seeking
relief and only to the extent necessary to provide relief warranted by that party’s individual
claim. To the extent that you or we prevail on a claim and seek public injunctive relief (that is,
injunctive relief that has the primary purpose and effect of prohibiting unlawful acts that
threaten future injury to the public), the entitlement to and extent of such relief must be
litigated in a civil court of competent jurisdiction and not in arbitration. The parties agree
that litigation of any issues of public injunctive relief shall be stayed pending the outcome of
the merits of any individual claims in arbitration.</li>
<li><u>Class Action Waiver</u>. YOU AND MYSTEN LABS AGREE THAT EACH MAY BRING CLAIMS AGAINST THE
OTHER ONLY IN YOUR OR ITS INDIVIDUAL CAPACITY, AND NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY
PURPORTED CLASS OR REPRESENTATIVE PROCEEDING. Further, if the parties’ Dispute is resolved through
arbitration, the arbitrator may not consolidate another person’s claims with your claims, and may
not otherwise preside over any form of a representative or class proceeding. If this specific
provision is found to be unenforceable, then the entirety of this Dispute Resolution section shall
be null and void.</li>
<li><u>Severability</u>. With the exception of any of the provisions in Section XVII(F) of these
Terms (“<strong>Class Action Waiver</strong>”), if an arbitrator or court of competent jurisdiction decides
that any part of these Terms is invalid or unenforceable, the other parts of these Terms will
still apply.</li>
</ol>
<h2 id="xv-general-terms"><a class="header" href="#xv-general-terms">XV. General Terms</a></h2>
<ol>
<li><u>Reservation of Rights</u>. Mysten Labs and its licensors exclusively own all right, title and
interest in and to the Services, including all associated intellectual property rights. You
acknowledge that the Services are protected by copyright, trademark, and other laws of the United
States and foreign countries. You agree not to remove, alter or obscure any copyright, trademark,
service mark or other proprietary rights notices incorporated in or accompanying the Services.</li>
<li><u>Entire Agreement</u>. These Terms constitute the entire and exclusive understanding and
agreement between Mysten Labs and you regarding the Services, and these Terms supersede and
replace all prior oral or written understandings or agreements between Mysten Labs and you
regarding the Services. If any provision of these Terms is held invalid or unenforceable by an
arbitrator or a court of competent jurisdiction, that provision will be enforced to the maximum
extent permissible and the other provisions of these Terms will remain in full force and
effect. Except where provided by applicable law in your jurisdiction, you may not assign or
transfer these Terms, by operation of law or otherwise, without Mysten Labs’ prior written
consent. Any attempt by you to assign or transfer these Terms absent our consent or your statutory
right, without such consent, will be null. Mysten Labs may freely assign or transfer these Terms
without restriction. Subject to the foregoing, these Terms will bind and inure to the benefit of
the parties, their successors and permitted assigns.</li>
<li><u>Notices</u>. Any notices or other communications provided by Mysten Labs under these Terms
will be given: (i) via email; or (ii) by posting to the Services. For notices made by email, the
date of receipt will be deemed the date on which such notice is transmitted.</li>
<li><u>Waiver of Rights</u>. Mysten Labs’ failure to enforce any right or provision of these Terms
will not be considered a waiver of such right or provision. The waiver of any such right or
provision will be effective only if in writing and signed by a duly authorized representative of
Mysten Labs. Except as expressly set forth in these Terms, the exercise by either party of any of
its remedies under these Terms will be without prejudice to its other remedies under these Terms
or otherwise.</li>
</ol>
<h2 id="xvi-contact-information"><a class="header" href="#xvi-contact-information">XVI. Contact Information</a></h2>
<p>If you have any questions about these Terms or the Services, please contact Mysten Labs at
<a href="mailto:legal@mystenlabs.com"><u>legal@mystenlabs.com</u></a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="walrus-glossary"><a class="header" href="#walrus-glossary">Walrus Glossary</a></h1>
<p>To make communication as clear and efficient as possible, we make sure to use a single term for
every Walrus entity/concept and <em>do not</em> use any synonyms. The following table lists various
concepts, their canonical name, and how they relate to or differ from other terms.</p>
<p>Italicized terms in the description indicate other specific Walrus terms contained in the table.</p>
<div class="table-wrapper"><table><thead><tr><th>Approved name</th><th>Description</th></tr></thead><tbody>
<tr><td>storage node (SN)</td><td>entity storing data for Walrus; holds one or several <em>shards</em></td></tr>
<tr><td>blob</td><td>single unstructured data object stored on Walrus</td></tr>
<tr><td>permanent blob</td><td>blob which cannot be deleted by its owner and is guaranteed to be available until at least its expiry epoch (assuming it is valid)</td></tr>
<tr><td>deletable blob</td><td>blob which can be deleted by its owner at any time to be able to reuse the storage resource</td></tr>
<tr><td>shard</td><td>(disjoint) subset of erasure-encoded data of all <em>blobs</em>; at every point in time, a <em>shard</em> is assigned to and stored on a single <em>SN</em></td></tr>
<tr><td>RedStuff</td><td>our erasure-encoding approach, which uses two different encodings (<em>primary</em> and <em>secondary</em>) to enable shard recovery; details are available in the <a href="./walrus.pdf">whitepaper</a></td></tr>
<tr><td>sliver</td><td>erasure-encoded data of one <em>shard</em> corresponding to a single blob for one of the two encodings; this contains several erasure-encoded symbols of that blob but not the <em>blob metadata</em></td></tr>
<tr><td>sliver pair</td><td>the combination of a shard’s primary and secondary sliver</td></tr>
<tr><td>blob ID</td><td>cryptographic ID computed from a <em>blob</em>’s <em>slivers</em></td></tr>
<tr><td>blob metadata</td><td>metadata of one <em>blob</em>; in particular, this contains a hash per <em>shard</em> to enable the authentication of <em>slivers</em> and recovery symbols</td></tr>
<tr><td>(end) user</td><td>any entity/person that wants to store or read <em>blobs</em> on/from Walrus; can act as a Walrus client itself or use the simple interface exposed by <em>publishers</em> and <em>caches</em></td></tr>
<tr><td>publisher</td><td>service interacting with Sui and the <em>SNs</em> to store <em>blobs</em> on Walrus; offers a simple <code>HTTP POST</code> endpoint to <em>end users</em></td></tr>
<tr><td>aggregator</td><td>service that reconstructs <em>blobs</em> by interacting with <em>SNs</em> and exposes a simple <code>HTTP GET</code> endpoint to <em>end users</em></td></tr>
<tr><td>cache</td><td>an <em>aggregator</em> with additional caching capabilities</td></tr>
<tr><td>(Walrus) client</td><td>entity interacting directly with the <em>SNs</em>; this can be an <em>aggregator</em>/<em>cache</em>, a <em>publisher</em>, or an <em>end user</em></td></tr>
<tr><td>(blob) reconstruction</td><td>decoding of the primary <em>slivers</em> to obtain the blob; includes re-encoding the <em>blob</em> and checking the Merkle proofs</td></tr>
<tr><td>(shard/sliver) recovery</td><td>process of an <em>SN</em> recovering a <em>sliver</em> or full <em>shard</em> by obtaining recovery symbols from other <em>SNs</em></td></tr>
<tr><td>storage attestation</td><td>process where <em>SNs</em> exchange challenges and responses to demonstrate that they are storing their currently assigned <em>shards</em></td></tr>
<tr><td>certificate of availability (CoA)</td><td>a <em>blob ID</em> with signatures of <em>SNs</em> holding at least <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> <em>shards</em> in a specific <em>epoch</em></td></tr>
<tr><td>point of availability (PoA)</td><td>point in time when a <em>CoA</em> is submitted to Sui and the corresponding <em>blob</em> is guaranteed to be available until its expiration</td></tr>
<tr><td>inconsistency proof</td><td>set of several recovery symbols with their Merkle proofs such that the decoded <em>sliver</em> does not match the corresponding hash; this proves an incorrect/inconsistent encoding by the client</td></tr>
<tr><td>inconsistency certificate</td><td>an aggregated signature from 2/3 of <em>SNs</em> (weighted by their number of <em>shards</em>) that they have seen and stored an <em>inconsistency proof</em> for a <em>blob ID</em></td></tr>
<tr><td>storage committee</td><td>the set of <em>SNs</em> for a <em>storage epoch</em>, including metadata about the <em>shards</em> they are responsible for and other metadata</td></tr>
<tr><td>member</td><td>an <em>SN</em> that is part of a <em>committee</em> at some <em>epoch</em></td></tr>
<tr><td>storage epoch</td><td>the epoch for Walrus as distinct to the epoch for Sui</td></tr>
<tr><td>availability period</td><td>the period specified in <em>storage epochs</em> for which a <em>blob</em> is certified to be available on Walrus</td></tr>
<tr><td>expiry</td><td>the end epoch at which a blob is no longer available and can be deleted; the end epoch is always exclusive</td></tr>
<tr><td>WAL</td><td>the native Token of Walrus</td></tr>
<tr><td>FROST</td><td>the smallest unit of WAL (similar to MIST for SUI); 1 WAL is equal to 1 billion (1000000000) FROST</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<!-- markdownlint-disable proper-names -->
<h1 id="testnet-terms-of-service---walrus"><a class="header" href="#testnet-terms-of-service---walrus">TESTNET TERMS OF SERVICE - WALRUS</a></h1>
<p>Last updated: October 17, 2024</p>
<p>By using Mysten Labs Testnet software, technologies, tools, and other services (collectively
<strong>“Testnet”</strong>), you agree to the general Terms of Service and these additional Testnet Terms of
Service (together, the <strong>“Terms”</strong>). If you do not agree, do not participate in Testnet. If you are
using Testnet on behalf of an organization, you represent and warrant that you are an authorized
representative of that organization and have the authority to bind that business or entity to the
Terms.</p>
<h2 id="privacy-policy"><a class="header" href="#privacy-policy">Privacy Policy</a></h2>
<p>Please review our <a href="legal/../legal/privacy.html">Privacy Policy</a>, which also governs your use of Testnet, for
information on how we collect, use and share your information. By using Testnet you agree to be
bound by our Privacy Policy.</p>
<h2 id="eligibility-criteria"><a class="header" href="#eligibility-criteria">Eligibility Criteria</a></h2>
<p>You may use Testnet only if you:</p>
<ul>
<li>Are 18 years or older and capable of forming a binding contract with us.</li>
<li>Are not otherwise barred from participating in Testnet under applicable law.</li>
</ul>
<p>We may, at our discretion, introduce new or change existing eligibility criteria or conditions we
deem appropriate. Testnet may operate in certain phases, and your participation in any one phase of
Testnet does not guarantee that you will be able to participate in any other phases of Testnet.</p>
<h2 id="duration"><a class="header" href="#duration">Duration</a></h2>
<p>Testnet will commence on the date we prescribe and continue until terminated at our discretion. We
may change, discontinue, or wipe, temporarily or permanently, all or any part of Testnet, at any
time and without notice at our discretion, including, without limitation, the modification of the
presence, amounts, or any other conditions applicable to the Testnet tokens, without any liability
to you or other Testnet users. We do not guarantee that Testnet tokens will continue to be offered
for any particular length of time and you may not rely upon the continued availability of any
Testnet tokens. In the event of the expiration of Testnet, you acknowledge and agree that your
access to and use of your Testnet tokens will be removed, and all accrued Testnet tokens will be
deleted from the Testnet system. Testnet tokens will not be converted into any future rewards
offered by Mysten Labs.</p>
<h2 id="testnet-tokens"><a class="header" href="#testnet-tokens">Testnet Tokens</a></h2>
<p>During Testnet you may accumulate Testnet tokens, such as through the Testnet faucet, which are not,
and will never convert to or accrue to become Mainnet tokens or any other tokens or virtual assets.
Testnet tokens are virtual items with no monetary value. Testnet tokens do not constitute any
currency or property of any type and are not redeemable, refundable, or eligible for any fiat or
virtual currency or anything else of monetary value, under any circumstances. Testnet tokens are not
transferable between users outside of the Testnet, and you may not attempt to sell, trade, or
transfer any Testnet tokens outside of the Testnet, or obtain any manner of credit using any Testnet
tokens. Any attempt to sell, trade, or transfer any Testnet tokens outside of the Testnet will be
null and void.</p>
<h2 id="no-warranty"><a class="header" href="#no-warranty">No Warranty</a></h2>
<p>Mysten Labs provides the Testnet platform solely as a developer test environment. Testnet is
provided "as is" and "with all faults." We make no warranties, express or implied, regarding the
reliability, accuracy, performance, or fitness for a particular purpose of the service provided. You
accept all risks associated with the use of Testnet and agree that Mysten Labs, its affiliates, and
its employees shall not be liable for any damages, whether direct, indirect, incidental, special,
consequential, or punitive, arising out of the use or inability to use the service, including but
not limited to lost profits, loss of business, or data loss.</p>
<p>No employee or representative of Mysten Labs is authorized to make any warranties or representations
beyond those stated in this agreement. Any statements made by employees or representatives of Mysten
Labs regarding the service shall not be construed as warranties or representations, and customers
agree to indemnify and hold harmless Mysten Labs from any such statements.</p>
<p>Any deficiencies or errors in the Testnet platform shall not constitute a breach of this agreement,
and customers agree to waive any right to seek a refund or compensation based on such deficiencies
or errors. This "as is, no warranty" provision shall survive the termination or expiration of any
other agreements between you and Mysten Labs.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<!-- markdownlint-disable -->
<h1 id="privacy-policy-1"><a class="header" href="#privacy-policy-1">PRIVACY POLICY</a></h1>
<p><strong>Last Updated:</strong> June 18, 2024</p>
<p>This Privacy Policy is designed to help you understand how Mysten Labs, Inc., its subsidiaries and
affiliates (collectively called "<strong>Mysten Labs</strong>", "<strong>we</strong>," "<strong>us</strong>," and "<strong>our</strong>") collects,
uses, and shares your personal information and to help you understand and exercise your privacy
rights in accordance with applicable law. This Policy applies when you use our websites, contact our
team members, engage with us on social media or otherwise interact with us.</p>
<ol>
<li><a href="legal/privacy.html#scope">SCOPE</a></li>
<li><a href="legal/privacy.html#changes-to-our-privacy-policy">CHANGES TO OUR PRIVACY POLICY</a></li>
<li><a href="legal/privacy.html#personal-information-we-collect">PERSONAL INFORMATION WE
COLLECT</a></li>
<li><a href="legal/privacy.html#how-we-use-your-information">HOW WE USE YOUR INFORMATION</a></li>
<li><a href="legal/privacy.html#how-we-disclose-your-information">HOW WE DISCLOSE YOUR
INFORMATION</a></li>
<li><a href="legal/privacy.html#your-privacy-choices-and-rights">YOUR PRIVACY CHOICES AND
RIGHTS</a></li>
<li><a href="legal/privacy.html#security-of-your-information">SECURITY OF YOUR
INFORMATION</a></li>
<li><a href="legal/privacy.html#international-data-transfers">INTERNATIONAL DATA
TRANSFERS</a></li>
<li><a href="legal/privacy.html#retention-of-personal-information">RETENTION OF PERSONAL
INFORMATION</a></li>
<li><a href="legal/privacy.html#supplemental-notice-for-california-residents">SUPPLEMENTAL NOTICE FOR CALIFORNIA
RESIDENTS</a></li>
<li><a href="legal/privacy.html#supplemental-notice-for-nevada-residents">SUPPLEMENTAL NOTICE FOR NEVADA
RESIDENTS</a></li>
<li><a href="legal/privacy.html#childrens-information">CHILDREN'S INFORMATION</a></li>
<li><a href="legal/privacy.html#third-party-websitesapplications">THIRD-PARTY'S
WEBSITES/APPLICATIONS</a></li>
<li><a href="legal/privacy.html#supervisory-authority">SUPERVISORY AUTHORITY</a></li>
<li><a href="legal/privacy.html#contact-us">CONTACT US</a></li>
</ol>
<h2 id="scope"><a class="header" href="#scope">SCOPE</a></h2>
<p>This Privacy Policy applies to personal information processed by Mysten
Labs, including on our websites (the "<strong>Site</strong>"), and other online and
offline offerings. The Site, our services and our other online and
offline offerings are collectively called the "<strong>Services</strong>." For
clarity, the Services do not include the Walrus Protocol or any other
decentralized aspect of the Walrus or Sui Blockchain that is not
controlled by Mysten Labs due to the decentralized nature of these
blockchains.</p>
<h2 id="changes-to-our-privacy-policy"><a class="header" href="#changes-to-our-privacy-policy">CHANGES TO OUR PRIVACY POLICY</a></h2>
<p>We may revise this Privacy Policy from time to time in our sole
discretion. If there are any material changes to this Privacy Policy, we
will notify you as required by applicable law. You understand and agree
that you will be deemed to have accepted the updated Privacy Policy if
you continue to use our Services after the new Privacy Policy takes
effect.</p>
<h2 id="personal-information-we-collect"><a class="header" href="#personal-information-we-collect">PERSONAL INFORMATION WE COLLECT</a></h2>
<p>The categories of personal information we collect depend on how you
interact with us, our Services and the requirements of applicable law.
We collect information that you provide to us, information we obtain
automatically when you use our Services, and information from other
sources such as third-party services and organizations, as described
below.</p>
<p>A.  <strong>Information You Provide to Us Directly</strong></p>
<p>We may collect the following personal information that you provide to
us.</p>
<ul>
<li><strong>Account Creation</strong>. We may collect information if you create an
account with us, such as your name, username, email address, or
password.</li>
<li><strong>Wallet and Transaction Information.</strong> In order to engage in
transactions on the Services, you may need to provide us or our
third-party payment processors with access to or information about
your digital wallet. We will never ask you for or collect your
private keys.</li>
<li><strong>Other Transactions</strong>. We may collect personal information and
details associated with your activities on our Services, including
to deliver you your rewards associated with your use of the
Services.</li>
<li><strong>Your Communications with Us</strong>. We may collect personal
information, such as email address when you request information
about our Services, register for our newsletter or marketing
promotions, request customer or technical support, apply for a job
or otherwise communicate with us.</li>
<li><strong>Interactive Features</strong>. We and others who use our Services may
collect personal information that you submit or make available
through our interactive features (e.g., via the Mysten Labs
community, commenting functionalities, forums, blogs, and social
media pages). Any personal information you provide on the public
sections of these features will be considered "public," unless
otherwise required by applicable law, and is not subject to the
privacy protections referenced herein.</li>
<li><strong>Surveys</strong>. We may contact you to participate in surveys. If you
decide to participate, you may be asked to provide certain
information which may include personal information.</li>
<li><strong>Sweepstakes, Giveaways or Contests</strong>. We may collect personal
information you provide for any sweepstakes, giveaways or contests
that we offer. In some jurisdictions, we are required to publicly
share information of sweepstakes and contest winners.</li>
<li><strong>Events.</strong> We may collect personal information from individuals
when we attend or host conferences, trade shows, and other events.</li>
<li><strong>Business Development and Strategic Partnerships.</strong> We may collect
personal information from individuals and third parties to assess
and pursue potential business opportunities.</li>
<li><strong>Job Applications.</strong> We may post job openings and opportunities on
our Services. If you reply to one of these postings by submitting
your application, CV and/or cover letter to us, we will collect and
use this information to assess your qualifications.</li>
</ul>
<p>B.  <strong>Information Collected Automatically</strong></p>
<p>We may collect personal information automatically when you use our
Services:</p>
<ul>
<li><strong>Automatic Data Collection</strong>. We may collect certain information
automatically when you use our Services, such as your Internet
protocol (IP) address, user settings, MAC address, cookie
identifiers, mobile carrier, mobile advertising and other unique
identifiers, browser or device information, location information
(including approximate location derived from IP address), Internet
service provider, and metadata about the content you provide. We may
also automatically collect information regarding your use of our
Services, such as pages that you visit before, during and after
using our Services, information about the links you click, the types
of content you interact with, the frequency and duration of your
activities, and other information about how you use our Services.</li>
<li><strong>Cookies, Pixel Tags/Web Beacons, and Other Technologies</strong>. We, as
well as third parties that provide content, advertising, or other
functionality on our Services, may use cookies, pixel tags, local
storage, and other technologies ("<strong>Technologies</strong>") to
automatically collect information through your use of our Services.</li>
<li><strong>Cookies</strong>. Cookies are small text files placed in device browsers
that store preferences and facilitate and enhance your experience.</li>
<li><strong>Pixel Tags/Web Beacons</strong>. A pixel tag (also known as a web beacon)
is a piece of code embedded in our Services that collects
information about engagement on our Services. The use of a pixel tag
allows us to record, for example, that a user has visited a
particular web page or clicked on a particular advertisement. We may
also include web beacons in e-mails to understand whether messages
have been opened, acted on, or forwarded.</li>
</ul>
<blockquote>
<p>Our uses of these Technologies fall into the following general
categories:</p>
</blockquote>
<ul>
<li><strong>Operationally Necessary</strong>. This includes Technologies that allow
you access to our Services, applications, and tools that are
required to identify irregular website behavior, prevent fraudulent
activity, improve security, or allow you to make use of our
functionality;</li>
<li><strong>Performance-Related</strong>. We may use Technologies to assess the
performance of our Services, including as part of our analytic
practices to help us understand how individuals use our Services
(<em>see Analytics below</em>);</li>
<li><strong>Functionality-Related</strong>. We may use Technologies that allow us to
offer you enhanced functionality when accessing or using our
Services. This may include identifying you when you sign into our
Services or keeping track of your specified preferences, interests,
or past items viewed;</li>
<li><strong>Advertising- or Targeting-Related</strong>. We may use first party or
third-party Technologies to deliver content, including ads relevant
to your interests, on our Services or on third-party websites.</li>
</ul>
<blockquote>
<p><em>See "<a href="legal/privacy.html#your-privacy-choices-and-rights">Your Privacy Choices and
Rights</a>" below to understand your
choices regarding these Technologies.</em></p>
</blockquote>
<ul>
<li><strong>Analytics</strong>. We may use our Technologies and other third-party
tools to process analytics information on our Services. These
technologies allow us to process usage data to better understand how
our website and web-related Services are used, and to continually
improve and personalize our Services. Some of our analytics partners
include:</li>
<li><strong>Google Analytics</strong>. For more information about how Google uses
your data (including for its own purposes, e.g., for profiling or
linking it to other data), please visit <a href="http://www.google.com/policies/privacy/partners/">Google Analytics' Privacy
Policy</a>.
To learn more about how to opt-out of Google Analytics' use of your
information, please click
<a href="http://tools.google.com/dlpage/gaoptout">here</a>.</li>
<li><strong>LinkedIn Analytics</strong>. For more information, please visit
<a href="https://www.linkedin.com/legal/privacy-policy">LinkedIn Analytics' Privacy
Policy</a>.
To learn more about how to opt-out of LinkedIn's use of your
information, please click
<a href="https://www.linkedin.com/help/linkedin/answer/62931?trk=microsites-frontend_legal_privacy-policy&amp;lang=en">here</a>.</li>
<li><strong>Facebook Connect</strong>. For more information, please visit Facebook's
<a href="https://www.facebook.com/policy.php?ref=pf">Data
Policy</a>.
You can object to the collection of your data by Facebook pixel, or
to the use of your data for the purpose of displaying Facebook ads
by contacting the following address while logged into your Facebook
account: https://www.facebook.com/settings?tab=ads.</li>
<li><strong>Mixpanel</strong>. For more information about Mixpanel, please visit
<a href="https://mixpanel.com/legal/privacy-policy/">Mixpanel's Privacy
Policy</a>.</li>
<li><strong>Social Media Platforms</strong>. Our Services may contain social media
buttons, such as Discord, Twitter, Instagram, TikTok, Youtube, and
Telegram, which might include widgets such as the "share this"
button or other interactive mini programs. These features may
collect your IP address and which page you are visiting on our
Services and may set a cookie to enable the feature to function
properly. Your interactions with these platforms are governed by the
privacy policy of the company providing it.</li>
</ul>
<p>C. <strong>Information Collected from Other Sources</strong></p>
<ul>
<li><strong>Third-Party Sources.</strong> We may obtain information about you from
other sources, including through third-party services and
organizations. For example, if you access our Services through a
third-party application, such as an app store, a third-party login
service, or a social networking site, we may collect information
about you from that third-party application that you have made
available via your privacy settings.</li>
<li><strong>Referrals, Sharing and Other Features</strong>. Our Services may offer
various tools and functionalities that allow you to provide
information about your friends through our referral service; third
parties may also use these services to upload information about you.
Our referral services may also allow you to forward or share certain
content with a friend or colleague, such as an email inviting your
friend to use our Services. Please only share with us contact
information of people with whom you have a relationship (e.g.,
relative, friend, neighbor, or co-worker).</li>
</ul>
<h2 id="how-we-use-your-information"><a class="header" href="#how-we-use-your-information">HOW WE USE YOUR INFORMATION</a></h2>
<p>We use your information for a variety of business purposes, including to
provide our Services, for administrative purposes, and to market our
products and Services, as described below.</p>
<p>A.  <strong>Provide Our Services</strong></p>
<p>We use your information to fulfill our contract with you and provide you
with our Services and perform our contract with you, such as:</p>
<ul>
<li>Managing your information and accounts;</li>
<li>Providing access to certain areas, functionalities, and features of
our Services;</li>
<li>Answering requests for customer or technical support;</li>
<li>Communicating with you about your account, activities on our
Services, and policy changes;</li>
<li>Processing information about your wallet to facilitate transfers via
the Services;</li>
<li>Processing applications if you apply for a job, we post on our
Services; and</li>
<li>Allowing you to register for events.</li>
</ul>
<p>B.  <strong>Administrative Purposes</strong></p>
<p>We use your information for our legitimate interest, such as:</p>
<ul>
<li>Pursuing our legitimate interests such as direct marketing, research
and development (including marketing research), network and
information security, and fraud prevention;</li>
<li>Detecting security incidents, protecting against malicious,
deceptive, fraudulent or illegal activity, and prosecuting those
responsible for that activity;</li>
<li>Measuring interest and engagement in our Services;</li>
<li>Improving, upgrading or enhancing our Services;</li>
<li>Developing new products and Services;</li>
<li>Ensuring internal quality control and safety;</li>
<li>Authenticating and verifying individual identities;</li>
<li>Debugging to identify and repair errors with our Services;</li>
<li>Auditing relating to interactions, transfers and other compliance
activities;</li>
<li>Sharing information with third parties as needed to provide the
Services;</li>
<li>Enforcing our agreements and policies; and</li>
<li>Other uses as required to comply with our legal obligations.</li>
</ul>
<p>C.  <strong>Marketing and Advertising our Products and Services</strong></p>
<p>We may use personal information to tailor and provide you with content
and advertisements. We may provide you with these materials as permitted
by applicable law. Some of the ways we may market to you include email
campaigns, custom audiences advertising, and "interest-based" or
"personalized advertising," including through cross-device tracking.</p>
<p>If you have any questions about our marketing practices or if you would
like to opt out of the use of your personal information for marketing
purposes, you may contact us at any time as set forth in "<a href="legal/privacy.html#contact-us">Contact
Us</a>" below.</p>
<p>D.  <strong>With Your Consent</strong></p>
<p>We may use personal information for other purposes that are clearly
disclosed to you at the time you provide personal information or with
your consent.</p>
<p>E.  <strong>Other Purposes</strong></p>
<p>We also use your information for other purposes as requested by you or
as permitted by applicable law.</p>
<ul>
<li><strong>Automated Decision Making</strong>. We may engage in automated decision
making, including profiling. Mysten Labs's processing of your
personal information will not result in a decision based solely on
automated processing that significantly affects you unless such a
decision is necessary as part of a contract we have with you, we
have your consent, or we are permitted by law to engage in such
automated decision making. If you have questions about our automated
decision making, you may contact us as set forth in "<a href="legal/privacy.html#contact-us">Contact
Us</a>" below.</li>
<li><strong>De-identified and Aggregated Information.</strong> We may use personal
information and other information about you to create de-identified
and/or aggregated information, such as de-identified demographic
information, de-identified location information, information about
the device from which you access our Services, or other analyses we
create.</li>
</ul>
<h2 id="how-we-disclose-your-information"><a class="header" href="#how-we-disclose-your-information">HOW WE DISCLOSE YOUR INFORMATION</a></h2>
<p>We disclose your information to third parties for a variety of business
purposes, including to provide our Services, to protect us or others, or
in the event of a major business transaction such as a merger, sale, or
asset transfer, as described below.</p>
<p>A.  <strong>Disclosures to Provide our Services</strong></p>
<p>The categories of third parties with whom we may share your information
are described below.</p>
<ul>
<li><strong>Notice Regarding Use of Blockchain.</strong> Transactions on the Services
will be conducted via Blockchain. Information about your transfers
will be provided to a Blockchain and may be accessible to third
parties due to the public nature of the Blockchain. Because entries
to a Blockchain are, by their nature, public, and because it may be
possible for someone to identify you through your pseudonymous,
public wallet address using external sources of information, any
transaction you enter onto the Blockchain could possibly be used to
identify you, or information about you.</li>
<li><strong>Other Users of the Services and Parties You Transact With.</strong> Some
of your personal information may be visible to other users of the
Services (e.g., information featured on generally accessible parts
of your profile; usernames of other Mysten Labs Services users). In
addition, to complete transfers via the Services, we will need to
share some of your personal information with the party that you are
transacting with.</li>
<li><strong>Third Party Websites and Applications.</strong> You may choose to share
personal information or interact with third-party websites and/or
third-party applications, including, but not limited to, third-party
electronic wallet extensions. Once your personal information has
been shared with a third-party website or a third-party application,
it will also be subject to such third party's privacy policy. We
encourage you to closely read each third-party website or
third-party application privacy policy before sharing your personal
information or otherwise interacting with them. Please note that we
do not control, and we are not responsible for the third-party
website's or the third-party application's processing of your
personal information.</li>
<li><strong>Service Providers</strong>. We may share your personal information with
our third-party service providers who use that information to help
us provide our Services. This includes service providers that
provide us with IT support, hosting, customer service, and related
services.</li>
<li><strong>Business Partners</strong>. We may share your personal information with
business partners to provide you with a product or service you have
requested. We may also share your personal information to business
partners with whom we jointly offer products or services.</li>
<li><strong>Affiliates</strong>. We may share your personal information with members
of our corporate family.</li>
<li><strong>Other Users/Website Visitors</strong>. As described above in "<a href="legal/privacy.html#personal-information-we-collect">Personal
Information We
Collect</a>," our
Services allow you to share your profile and/or User Content with
other users or publicly, including to those who do not use our
Services.</li>
<li><strong>Advertising Partners</strong>. We may share your personal information
with third-party advertising partners. These third-party advertising
partners may set Technologies and other tracking tools on our
Services to collect information regarding your activities and your
device (e.g., your IP address, cookie identifiers, page(s) visited,
location, time of day). These advertising partners may use this
information (and similar information collected from other services)
for purposes of delivering personalized advertisements to you when
you visit digital properties within their networks. This practice is
commonly referred to as "interest-based advertising" or
"personalized advertising."</li>
<li><strong>APIs/SDKs</strong>. We may use third-party application program interfaces
("<strong>APIs</strong>") and software development kits ("<strong>SDKs</strong>") as part of
the functionality of our Services. For more information about our
use of APIs and SDKs, please contact us as set forth in "<a href="legal/privacy.html#contact-us">Contact
Us</a>" below.</li>
</ul>
<p>B.  <strong>Disclosures to Protect Us or Others</strong></p>
<p>We may access, preserve, and disclose any information we store
associated with you to external parties if we, in good faith, believe
doing so is required or appropriate to: comply with law enforcement or
national security requests and legal process, such as a court order or
subpoena; protect your, our, or others' rights, property, or safety;
enforce our policies or contracts; collect amounts owed to us; or assist
with an investigation or prosecution of suspected or actual illegal
activity.</p>
<p>C.  <strong>Disclosure in the Event of Merger, Sale, or Other Asset
Transfers</strong></p>
<p>If we are involved in a merger, acquisition, financing due diligence,
reorganization, bankruptcy, receivership, purchase or sale of assets, or
transition of service to another provider, your information may be sold
or transferred as part of such a transaction, as permitted by law and/or
contract.</p>
<h2 id="your-privacy-choices-and-rights"><a class="header" href="#your-privacy-choices-and-rights">YOUR PRIVACY CHOICES AND RIGHTS</a></h2>
<p><strong>Your Privacy Choices</strong>. The privacy choices you may have about your
personal information are determined by applicable law and are described
below.</p>
<ul>
<li><strong>Email Communications</strong>. If you receive an unwanted email from us,
you can use the unsubscribe link found at the bottom of the email to
opt out of receiving future emails. Note that you will continue to
receive transfer-related emails regarding Services you have
requested. We may also send you certain non-promotional
communications regarding us and our Services, and you will not be
able to opt out of those communications (e.g., communications
regarding our Services or updates to our Terms of Service or this
Privacy Policy).</li>
<li><strong>Text Messages</strong>. You may opt out of receiving text messages from
us by following the instructions in the text message you have
received from us or by otherwise contacting us.</li>
<li><strong>Mobile Devices</strong>. We may send you push notifications through our
mobile application. You may opt out from receiving these push
notifications by changing the settings on your mobile device. With
your consent, we may also collect precise location-based information
via our mobile application. You may opt out of this collection by
changing the settings on your mobile device.</li>
<li><strong>"Do Not Track</strong>.<strong>"</strong> Do Not Track ("<strong>DNT</strong>") is a privacy
preference that users can set in certain web browsers. Please note
that we do not respond to or honor DNT signals or similar mechanisms
transmitted by web browsers.</li>
<li><strong>Cookies and Interest-Based Advertising</strong>. You may stop or restrict
the placement of Technologies on your device or remove them by
adjusting your preferences as your browser or device permits.
However, if you adjust your preferences, our Services may not work
properly. Please note that cookie-based opt-outs are not effective
on mobile applications. However, you may opt-out of personalized
advertisements on some mobile applications by following the
instructions for
<a href="https://support.google.com/googleplay/android-developer/answer/6048248?hl=en">Android</a>,
<a href="https://support.apple.com/en-us/HT202074">iOS</a> and
<a href="https://www.networkadvertising.org/mobile-choice/">others</a>.</li>
</ul>
<blockquote>
<p>The online advertising industry also provides websites from which you
may opt out of receiving targeted ads from data partners and other
advertising partners that participate in self-regulatory programs. You
can access these and learn more about targeted advertising and
consumer choice and privacy by visiting the <a href="http://www.networkadvertising.org/managing/opt_out.asp">Network Advertising
Initiative</a>,
<a href="http://www.aboutads.info/choices/">the Digital Advertising
Alliance</a>, <a href="https://www.youronlinechoices.eu/">the
European Digital Advertising
Alliance</a>, and <a href="https://youradchoices.ca/choices/">the
Digital Advertising Alliance of
Canada</a>.</p>
<p>Please note you must separately opt out in each browser and on each
device.</p>
</blockquote>
<p><strong>Your Privacy Rights</strong>. In accordance with applicable law, you may have
the right to:</p>
<ul>
<li>
<p><strong>Access Personal Information about you, including: (i) confirming whether we are processing your
personal information; (ii) obtaining access to or a copy of your personal information; or (iii)
receiving an electronic copy of personal information that you have provided to us, or asking us to
send that information to another company (aka the right of data portability);</strong></p>
</li>
<li>
<p><strong>Request Correction</strong> of your personal information where it is
inaccurate or incomplete. In some cases, we may provide self-service
tools that enable you to update your personal information;</p>
</li>
</ul>
<h2 id="request-deletion-of-your-personal-information"><a class="header" href="#request-deletion-of-your-personal-information">Request Deletion of your personal information;</a></h2>
<ul>
<li><strong>Request Restriction of or Object</strong> to our processing of your
personal information, including where the processing of your
personal information is based on our legitimate interest or for
direct marketing purposes; and</li>
</ul>
<p><strong>Withdraw Your Consent to our processing of your personal information. Please note that your
withdrawal will only take effect for future processing and will not affect the lawfulness of
processing before the withdrawal.</strong></p>
<p>If you would like to exercise any of these rights, please contact us as
set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below. We will
process such requests in accordance with applicable laws.</p>
<h2 id="security-of-your-information"><a class="header" href="#security-of-your-information">SECURITY OF YOUR INFORMATION</a></h2>
<p>We take steps designed to ensure that your information is treated
securely and in accordance with this Privacy Policy. Unfortunately, no
system is 100% secure, and we cannot ensure or warrant the security of
any information you provide to us. To the fullest extent permitted by
applicable law, we do not accept liability for unauthorized disclosure.</p>
<p>By using our Services or providing personal information to us, you agree
that we may communicate with you electronically regarding security,
privacy, and administrative issues relating to your use of our Services.
If we learn of a security system's breach, we may attempt to notify you
electronically by posting a notice on our Services, by mail or by
sending an email to you.</p>
<h2 id="international-data-transfers"><a class="header" href="#international-data-transfers">INTERNATIONAL DATA TRANSFERS</a></h2>
<p>All information processed by us may be transferred, processed, and
stored anywhere in the world, including, but not limited to, the United
States or other countries, which may have data protection laws that are
different from the laws where you live. We endeavor to safeguard your
information consistent with the requirements of applicable laws.</p>
<p>If we transfer personal information which originates in the European
Economic Area, Switzerland, and/or the United Kingdom to a country that
has not been found to provide an adequate level of protection under
applicable data protection laws, one of the safeguards we may use to
support such transfer is the EU Standard Contractual Clauses.</p>
<h2 id="retention-of-personal-information"><a class="header" href="#retention-of-personal-information">RETENTION OF PERSONAL INFORMATION</a></h2>
<p>We store the personal information we collect as described in this
Privacy Policy for as long as you use our Services or as necessary to
fulfill the purpose(s) for which it was collected, provide our Services,
resolve disputes, establish legal defenses, conduct audits, pursue
legitimate business purposes, enforce our agreements, and comply with
applicable laws.</p>
<p>To determine the appropriate retention period for personal information,
we may consider applicable legal requirements, the amount, nature, and
sensitivity of the personal information, certain risk factors, the
purposes for which we process your personal information, and whether we
can achieve those purposes through other means.</p>
<h2 id="supplemental-notice-for-california-residents"><a class="header" href="#supplemental-notice-for-california-residents">SUPPLEMENTAL NOTICE FOR CALIFORNIA RESIDENTS</a></h2>
<p>This Supplemental Notice for California Residents only applies to our
processing of personal information that is subject to the California
Consumer Privacy Act of 2018 ("<strong>CCPA</strong>"). Mysten Labs does not believe
it is subject to the CCPA. That said, Mysten Labs provides this
supplemental notice for purposes of transparency. The CCPA provides
California residents with the right to know what categories of personal
information Mysten Labs has collected about them and whether Mysten Labs
disclosed that personal information for a business purpose (e.g., to a
service provider) in the preceding twelve months. California residents
can find this information below:</p>
<table style="text-align: left;">
<colgroup>
<col style="width: 62%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th><strong>Category of Personal Information Collected by Mysten
Labs</strong></th>
<th><strong>Categories of Third Parties Personal Information is
Disclosed to for a Business Purpose</strong></th>
</tr>
</thead>
<tr >
<th><p><strong>Identifiers</strong></p>
<p>A real name, postal address, unique personal identifier, online
identifier, Internet Protocol address, email address, account name, or
other similar identifiers.</p></th>
<th><ul >
<li><p>Service providers</p></li>
<li><p>Third-party websites or applications</p></li>
<li><p>Blockchain networks</p></li>
<li><p>Other users or third parties you interact with</p></li>
<li><p>Advertising partners</p></li>
<li><p>Data analytics providers</p></li>
<li><p>Other users/public (alias only)</p></li>
</ul></th>
</tr>
<tr >
<th><p><strong>Personal information categories listed in Cal. Civ. Code
§ 1798.80(e)</strong></p>
<p>A name, signature, Social Security number, address, telephone number,
passport number, driver’s license or state identification card number,
insurance policy number, education, employment, employment history, bank
account number, credit card number, debit card number, or any other
financial information. Personal Information does not include publicly
available information that is lawfully made available to the general
public from federal, state, or local government records. Note: Some
personal information included in this category may overlap with other
categories.</p></th>
<th><ul >
<li><p>Service providers</p></li>
<li><p>Third-party websites or applications (e.g., wallet<br />
providers; third-party identity verification services)</p></li>
<li><p>Blockchain networks</p></li>
<li><p>Data analytics providers</p></li>
<li><p>Other users or third parties you interact with</p></li>
</ul></th>
</tr>
<tr >
<th><p><strong>Protected classification characteristics under California
or federal law</strong></p>
<p>Age (40 years or older), race, color, ancestry, national origin,
citizenship, religion or creed, marital status, medical condition,
physical or mental disability, sex (including gender, gender identity,
gender expression, pregnancy or childbirth and related medical
conditions), sexual orientation, veteran or military status, genetic
information (including familial genetic information).</p></th>
<th><ul >
<li><p>Service providers (recruitment context).</p></li>
</ul></th>
</tr>
<tr >
<th><p><strong>Commercial information</strong></p>
<p>Records of personal property, products or services purchased,
obtained, or considered, or other purchasing or consuming histories or
tendencies.</p></th>
<th><ul >
<li><p>Service providers</p></li>
<li><p>Blockchain networks</p></li>
<li><p>Data analytics providers</p></li>
<li><p>Other users or third parties you interact with</p></li>
</ul></th>
</tr>
<tr >
<th><p><strong>Internet or other electronic network
activity</strong></p>
<p>Browsing history, search history, information on a consumer’s
interaction with an internet website, application, or
advertisement.</p></th>
<th><ul >
<li><p>Service providers</p></li>
<li><p>Blockchain networks</p></li>
<li><p>Data analytics providers</p></li>
<li><p>Other users or third parties you interact with</p></li>
<li><p>Advertising partners</p></li>
</ul></th>
</tr>
<tr >
<th><p><strong>Professional or employment-related
information</strong></p>
<p>Current or past job history or performance evaluations.</p></th>
<th><ul >
<li><p>Service providers</p></li>
</ul></th>
</tr>
<tr >
<th><p><strong>Inferences drawn from other personal information to
create a profile about a consumer</strong></p>
<p>Profile reflecting a consumer’s preferences, characteristics,
psychological trends, predispositions, behavior, attitudes,
intelligence, abilities, and aptitudes.</p></th>
<th><ul >
<li><p>Service providers</p></li>
<li><p>Data analytics providers</p></li>
<li><p>Advertising partners</p></li>
</ul></th>
</tr>
<tbody>
</tbody>
</table>
<p>The categories of sources from which we collect personal information and
our business and commercial purposes for using personal information are
set forth in "<a href="legal/privacy.html#personal-information-we-collect">Personal Information we
Collect</a>" and "<a href="legal/privacy.html#how-we-use-your-information">How We
Use of Your Information</a>" above,
respectively.</p>
<p><strong>"Sales" of Personal Information under the CCPA.</strong> For purposes of the
CCPA, Mysten Labs does not "sell" personal information, nor do we have
actual knowledge of any "sale" of personal information of minors under
16 years of age.</p>
<p><strong>Additional Privacy Rights for California Residents</strong></p>
<p><strong>Non-Discrimination.</strong> California residents have the right not to
receive discriminatory treatment by us for the exercise of their rights
conferred by the CCPA.</p>
<p><strong>Authorized Agent.</strong> Only you, or someone legally authorized to act on
your behalf, may make a verifiable consumer request related to your
personal information. To designate an authorized agent, please contact
us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below and
provide written authorization signed by you and your designated agent.</p>
<p><strong>Verification</strong>. To protect your privacy, we will take the following
steps to verify your identity before fulfilling your request. When you
make a request, we will ask you to provide sufficient information that
allows us to reasonably verify you are the person about whom we
collected personal information or an authorized representative, which
may include confirming the email address associated with any personal
information we have about you. If you are a California resident and
would like to exercise any of your rights under the CCPA, please contact
us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below. We
will process such requests in accordance with applicable laws.</p>
<p>**Refer-a-Friend and Similar In
"<a href="legal/privacy.html#how-we-use-your-information">How We Use Your Personal
Information</a> we may offer referral
programs or other incentivized data collection programs. For example, we
may offer incentives to you such as discounts or promotional items or
credit in connection with these programs, wherein you provide your
personal information in exchange for a reward, or provide personal
information regarding your friends or colleagues (such as their email
address) and receive rewards when they sign up to use our Services. (The
referred party may also receive rewards for signing up via your
referral.) These programs are entirely voluntary and allow us to grow
our business and provide additional benefits to you. The value of your
data to us depends on how you ultimately use our Services, whereas the
value of the referred party's data to us depends on whether the referred
party ultimately becomes a user and uses our Services. Said value will
be reflected in the incentive offered in connection with each program.</p>
<p><strong>Accessibility</strong>. This Privacy Policy uses industry-standard
technologies and was developed in line with the World Wide Web
Consortium's Web Content Accessibility Guidelines, version 2.1. If you
wish to print this policy, please do so from your web browser or by
saving the page as a PDF.</p>
<p><strong>California Shine the Light</strong>. The California "Shine the Light" law
permits users who are California residents to request and obtain from us
once a year, free of charge, a list of the third parties to whom we have
disclosed their personal information (if any) for their direct marketing
purposes in the prior calendar year, as well as the type of personal
information disclosed to those parties.</p>
<p><strong>Right for minors to remove posted content.</strong> Where required by law,
California residents under the age of 18 may request to have their
posted content or information removed from the publicly viewable
portions of the Services by contacting us directly as set forth in
"<a href="legal/privacy.html#contact-us">Contact Us</a>" below.</p>
<h2 id="supplemental-notice-for-nevada-residents"><a class="header" href="#supplemental-notice-for-nevada-residents">SUPPLEMENTAL NOTICE FOR NEVADA RESIDENTS</a></h2>
<p>If you are a resident of Nevada, you have the right to opt-out of the
sale of certain personal information to third parties who intend to
license or sell that personal information. You can exercise this right
by contacting us as set forth in "<a href="legal/privacy.html#contact-us">Contact
Us</a>" below with the subject line "Nevada Do
Not Sell Request" and providing us with your name and the email address
associated with your account. Please note that we do not currently sell
your personal information as sales are defined in Nevada Revised
Statutes Chapter 603A.</p>
<h2 id="childrens-information"><a class="header" href="#childrens-information">CHILDREN'S INFORMATION</a></h2>
<p>The Services are not directed to children under 13 (or other age as
required by local law), and we do not knowingly collect personal
information from children. If you learn that your child has provided us
with personal information without your consent, you may contact us as
set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below. If we
learn that we have collected a child's personal information in violation
of applicable law, we will promptly take steps to delete such
information.</p>
<h2 id="third-party-websitesapplications"><a class="header" href="#third-party-websitesapplications">THIRD-PARTY WEBSITES/APPLICATIONS</a></h2>
<p>The Services may contain links to other websites/applications (such as
GitHub) and other websites/applications may reference or link to our
Services. These third-party services are not controlled by us. We
encourage our users to read the privacy policies of each website and
application with which they interact. We do not endorse, screen or
approve, and are not responsible for, the privacy practices or content
of such other websites or applications. Providing personal information
to third-party websites or applications is at your own risk.</p>
<h2 id="supervisory-authority"><a class="header" href="#supervisory-authority">SUPERVISORY AUTHORITY</a></h2>
<p>If you are located in the European Economic Area, Switzerland, the
United Kingdom, or Brazil, you have the right to lodge a complaint with
a supervisory authority if you believe our processing of your personal
information violates applicable law.</p>
<h2 id="contact-us"><a class="header" href="#contact-us">CONTACT US</a></h2>
<p>If you have any questions about our privacy practices or this Privacy
Policy, or to exercise your rights as detailed in this Privacy Policy,
please contact us at:</p>
<p>Mysten Labs, Inc. <br />
Attn: Privacy Group <br />
379 University Ave, #200 <br />
Palo Alto, CA 94301 <br />
<a href="mailto:privacy@mystenlabs.com">privacy@mystenlabs.com</a> <br />
+1 (408) 384-8237</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
